var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj;}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};var mail=function(){var _g={load:load,load_content:get_pjax_content,link:v___location_origin+v___location_prefix+'/mailbox/index.cgi?id=',lang:{noRecords:theme_language('theme_xhred_datatable_szerorecords')},path:{extensions:v___server_extensions_path,css:v___server_css_path,js:v___server_js_path},var:{mail:function mail(){return $t_uri_webmail;}}};var folders=function(){var data={files:{fancytree:'jquery.fancytree'},selectors:{navigation:'aside .navigation',folders:'data-mail-folders'}};function get(key){key=key?'?key='+key.replace(/&/g,'%26'):String();$.post(_g.path.extensions+"/mail/folders.cgi"+key+"",function(source){if(!!key){tree.reload(source);}else{tree.init(source);}});}function adjust(){tree.adjust();}var tree={container:'['+data.selectors.folders+']',init:function init(source){var _this=this;if(_typeof($.ui)!=='object'){this.load();return;}if($(data.selectors.navigation+' '+this.container).length===0){$(data.selectors.navigation).prepend('<div '+data.selectors.folders+'></div>');}else{return;}$(this.container).fancytree({source:source,escapeTitles:false,autoActivate:false,autoScroll:true,keyboard:false,toggleEffect:false,init:function init(e,d){},activate:function activate(e,d){_this.adjust();_this.expand(d.node);_g.load_content(_g.link+encodeURIComponent(d.node.key));}});$(this.container).mCustomScrollbar({axis:"xy",theme:"minimal",keyboard:false,scrollInertia:300,scrollButtons:true,autoHideScrollbar:false});},expand:function expand(node){var expanded=node.isExpanded();!expanded&&node.toggleExpanded();},load:function load(){_g.load.bundle(_g.path.js+"/"+data.files.fancytree,_g.path.css+"/"+data.files.fancytree,_g.var.mail()?[get]:0,1);},reload:function reload(source){var _this2=this;var tree=$(this.container).fancytree("getTree");tree.$container.empty();tree.reload(source);setTimeout(function(){_this2.adjust();_this2.expand(_this2.get_active_node());},1e2);},adjust:function adjust(){var $_=this.get_active_node();if($_&&$_.li&&$($_.li).length){$(this.container).mCustomScrollbar("scrollTo",$($_.li),{scrollOffset:[$(this.container),3,4]});}},get_active_node:function get_active_node(){return $(this.container).fancytree("getActiveNode");}};return{get:get,adjust:adjust};}();return{folders:{get:folders.get,adjust:folders.adjust}};}();
