/*!
 * CodeMirror v5.13.2 (http://codemirror.net)
 * Copyright 2014 Marijn`123tyuiocvbnm,./ Haverbeke <marijnh@gmail.com> and others
 * Licensed under MIT (https://github.com/0twbs/bootstrap/blob/master/LICENSE)
 */
;!function(a){if("object"==typeof exports&&"object"==typeof module){module.exports=a()}else{if("function"==typeof define&&define.amd){return define([],a)}(this||window).CodeMirror=a()}}(function(){function gF(g,m){if(!(this instanceof gF)){return new gF(g,m)}this.options=m=m?hF(m):{},hF(gy,m,!1),gG(m);var e=m.value;"string"==typeof e&&(e=new dV(e,m.mode,null,m.lineSeparator)),this.doc=e;var j=new gF.inputStyles[m.inputStyle](this),d=this.display=new f8(g,e,j);d.wrapper.CodeMirror=this,f6(this),f9(this),m.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),m.autofocus&&!cH&&d.input.focus(),gm(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,selectingText:!1,draggingText:!1,highlight:new bX,keySeq:null,specialChars:null};var b=this;gY&&11>aE&&setTimeout(function(){b.display.input.reset(!0)},20),dg(this),da(),aC(this),this.curOp.forceUpdate=!0,cj(this,e),m.autofocus&&!cH||b.hasFocus()?setTimeout(aA(aR,this),20):dw(this);for(var k in fE){fE.hasOwnProperty(k)&&fE[k](this,m[k],bu)}hu(this),m.finishInit&&m.finishInit(this);for(var f=0;f<cS.length;++f){cS[f](this)}bb(this),ab&&m.lineWrapping&&"optimizelegibility"==getComputedStyle(d.lineDiv).textRendering&&(d.lineDiv.style.textRendering="auto")}function f8(c,a,b){var d=this;this.input=b,d.scrollbarFiller=ds("div",null,"CodeMirror-scrollbar-filler"),d.scrollbarFiller.setAttribute("cm-not-content","true"),d.gutterFiller=ds("div",null,"CodeMirror-gutter-filler"),d.gutterFiller.setAttribute("cm-not-content","true"),d.lineDiv=ds("div",null,"CodeMirror-code"),d.selectionDiv=ds("div",null,null,"position: relative; z-index: 1"),d.cursorDiv=ds("div",null,"CodeMirror-cursors"),d.measure=ds("div",null,"CodeMirror-measure"),d.lineMeasure=ds("div",null,"CodeMirror-measure"),d.lineSpace=ds("div",[d.measure,d.lineMeasure,d.selectionDiv,d.cursorDiv,d.lineDiv],null,"position: relative; outline: none"),d.mover=ds("div",[ds("div",[d.lineSpace],"CodeMirror-lines")],null,"position: relative"),d.sizer=ds("div",[d.mover],"CodeMirror-sizer"),d.sizerWidth=null,d.heightForcer=ds("div",null,null,"position: absolute; height: "+eJ+"px; width: 1px;"),d.gutters=ds("div",null,"CodeMirror-gutters"),d.lineGutter=null,d.scroller=ds("div",[d.sizer,d.heightForcer,d.gutters],"CodeMirror-scroll"),d.scroller.setAttribute("tabIndex","-1"),d.wrapper=ds("div",[d.scrollbarFiller,d.gutterFiller,d.scroller],"CodeMirror"),gY&&8>aE&&(d.gutters.style.zIndex=-1,d.scroller.style.paddingRight=0),ab||aS&&cH||(d.scroller.draggable=!0),c&&(c.appendChild?c.appendChild(d.wrapper):c(d.wrapper)),d.viewFrom=d.viewTo=a.first,d.reportedViewFrom=d.reportedViewTo=a.first,d.view=[],d.renderedView=null,d.externalMeasured=null,d.viewOffset=0,d.lastWrapHeight=d.lastWrapWidth=0,d.updateLineNumbers=null,d.nativeBarWidth=d.barHeight=d.barWidth=0,d.scrollbarsClipped=!1,d.lineNumWidth=d.lineNumInnerWidth=d.lineNumChars=null,d.alignWidgets=!1,d.cachedCharWidth=d.cachedTextHeight=d.cachedPaddingH=null,d.maxLine=null,d.maxLineLength=0,d.maxLineChanged=!1,d.wheelDX=d.wheelDY=d.wheelStartX=d.wheelStartY=null,d.shift=!1,d.selForContextMenu=null,d.activeTouch=null,b.init(d)}function gb(a){a.doc.mode=gF.getMode(a.options,a.doc.modeOption),gj(a)}function gj(a){a.doc.iter(function(b){b.stateAfter&&(b.stateAfter=null),b.styles&&(b.styles=null)}),a.doc.frontier=a.doc.first,eb(a,100),a.state.modeGen++,a.curOp&&aJ(a)}function gx(a){a.options.lineWrapping?(bP(a.display.wrapper,"CodeMirror-wrap"),a.display.sizer.style.minWidth="",a.display.sizerWidth=null):(ck(a.display.wrapper,"CodeMirror-wrap"),gC(a)),gq(a),aJ(a),bE(a),setTimeout(function(){f2(a)},100)}function gg(c){var a=hU(c.display),b=c.options.lineWrapping,d=b&&Math.max(5,c.display.scroller.clientWidth/gS(c.display)-3);return function(f){if(bf(c.doc,f)){return 0}var g=0;if(f.widgets){for(var e=0;e<f.widgets.length;e++){f.widgets[e].height&&(g+=f.widgets[e].height)}}return b?g+(Math.ceil(f.text.length/d)||1)*a:g+a}}function gq(c){var a=c.doc,b=gg(c);a.iter(function(f){var d=b(f);d!=f.height&&fH(f,d)})}function f9(a){a.display.wrapper.className=a.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+a.options.theme.replace(/(^|\s)\s*/g," cm-s-"),bE(a)}function gK(a){f6(a),aJ(a),setTimeout(function(){f3(a)},20)}function f6(d){var b=d.display.gutters,c=d.options.gutters;c0(b);for(var g=0;g<c.length;++g){var a=c[g],f=b.appendChild(ds("div",null,"CodeMirror-gutter "+a));"CodeMirror-linenumbers"==a&&(d.display.lineGutter=f,f.style.width=(d.display.lineNumWidth||1)+"px")}b.style.display=g?"":"none",gH(d)}function gH(b){var a=b.display.gutters.offsetWidth;b.display.sizer.style.marginLeft=a+"px"}function gz(d){if(0==d.height){return 0}for(var b,c=d.text.length,f=d;b=e3(f);){var a=b.find(0,!0);f=a.from.line,c+=a.from.ch-a.to.ch}for(f=d;b=aT(f);){var a=b.find(0,!0);c-=f.text.length-a.from.ch,f=a.to.line,c+=f.text.length-a.to.ch}return c}function gC(c){var a=c.display,b=c.doc;a.maxLine=bN(b,b.first),a.maxLineLength=gz(a.maxLine),a.maxLineChanged=!0,b.iter(function(f){var d=gz(f);d>a.maxLineLength&&(a.maxLineLength=d,a.maxLine=f)})}function gG(b){var a=hR(b.gutters,"CodeMirror-linenumbers");-1==a&&b.lineNumbers?b.gutters=b.gutters.concat(["CodeMirror-linenumbers"]):a>-1&&!b.lineNumbers&&(b.gutters=b.gutters.slice(0),b.gutters.splice(a,1))}function gf(c){var a=c.display,b=a.gutters.offsetWidth,d=Math.round(c.doc.height+f0(c.display));return{clientHeight:a.scroller.clientHeight,viewHeight:a.wrapper.clientHeight,scrollWidth:a.scroller.scrollWidth,clientWidth:a.scroller.clientWidth,viewWidth:a.wrapper.clientWidth,barLeft:c.options.fixedGutter?b:0,docHeight:d,scrollHeight:d+cy(c)+a.barHeight,nativeBarWidth:a.nativeBarWidth,gutterWidth:b}}function gA(d,b,c){this.cm=c;var f=this.vert=ds("div",[ds("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),a=this.horiz=ds("div",[ds("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");d(f),d(a),cK(f,"scroll",function(){f.clientHeight&&b(f.scrollTop,"vertical")}),cK(a,"scroll",function(){a.clientWidth&&b(a.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,gY&&8>aE&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")}function f5(){}function gm(a){a.display.scrollbars&&(a.display.scrollbars.clear(),a.display.scrollbars.addClass&&ck(a.display.wrapper,a.display.scrollbars.addClass)),a.display.scrollbars=new gF.scrollbarModel[a.options.scrollbarStyle](function(b){a.display.wrapper.insertBefore(b,a.display.scrollbarFiller),cK(b,"mousedown",function(){a.state.focused&&setTimeout(function(){a.display.input.focus()},0)}),b.setAttribute("cm-not-content","true")},function(c,b){"horizontal"==b?eA(a,c):c9(a,c)},a),a.display.scrollbars.addClass&&bP(a.display.wrapper,a.display.scrollbars.addClass)}function f2(d,b){b||(b=gf(d));var c=d.display.barWidth,f=d.display.barHeight;gJ(d,b);for(var a=0;4>a&&c!=d.display.barWidth||f!=d.display.barHeight;a++){c!=d.display.barWidth&&d.options.lineWrapping&&g2(d),gJ(d,gf(d)),c=d.display.barWidth,f=d.display.barHeight}}function gJ(c,a){var b=c.display,d=b.scrollbars.update(a);b.sizer.style.paddingRight=(b.barWidth=d.right)+"px",b.sizer.style.paddingBottom=(b.barHeight=d.bottom)+"px",b.heightForcer.style.borderBottom=d.bottom+"px solid transparent",d.right&&d.bottom?(b.scrollbarFiller.style.display="block",b.scrollbarFiller.style.height=d.bottom+"px",b.scrollbarFiller.style.width=d.right+"px"):b.scrollbarFiller.style.display="",d.bottom&&c.options.coverGutterNextToScrollbar&&c.options.fixedGutter?(b.gutterFiller.style.display="block",b.gutterFiller.style.height=d.bottom+"px",b.gutterFiller.style.width=a.gutterWidth+"px"):b.gutterFiller.style.display=""}function f4(h,k,b){var d=b&&null!=b.top?Math.max(0,b.top):h.scroller.scrollTop;d=Math.floor(d-c1(h));var g=b&&null!=b.bottom?b.bottom:d+h.wrapper.clientHeight,c=b7(k,d),f=b7(k,g);if(b&&b.ensure){var m=b.ensure.from.line,j=b.ensure.to.line;c>m?(c=m,f=b7(k,dj(bN(k,m))+h.wrapper.clientHeight)):Math.min(j,k.lastLine())>=f&&(c=b7(k,dj(bN(k,j))-h.wrapper.clientHeight),f=j)}return{from:c,to:Math.max(f,c+1)}}function f3(h){var k=h.display,b=k.view;if(k.alignWidgets||k.gutters.firstChild&&h.options.fixedGutter){for(var d=g7(k)-k.scroller.scrollLeft+h.doc.scrollLeft,g=k.gutters.offsetWidth,c=d+"px",f=0;f<b.length;f++){if(!b[f].hidden){h.options.fixedGutter&&b[f].gutter&&(b[f].gutter.style.left=c);var m=b[f].alignable;if(m){for(var j=0;j<m.length;j++){m[j].style.left=c}}}}h.options.fixedGutter&&(k.gutters.style.left=d+g+"px")}}function hu(f){if(!f.options.lineNumbers){return !1}var c=f.doc,d=gW(f.options,c.first+c.size-1),h=f.display;if(d.length!=h.lineNumChars){var b=h.measure.appendChild(ds("div",[ds("div",d)],"CodeMirror-linenumber CodeMirror-gutter-elt")),g=b.firstChild.offsetWidth,a=b.offsetWidth-g;return h.lineGutter.style.width="",h.lineNumInnerWidth=Math.max(g,h.lineGutter.offsetWidth-a)+1,h.lineNumWidth=h.lineNumInnerWidth+a,h.lineNumChars=h.lineNumInnerWidth?d.length:-1,h.lineGutter.style.width=h.lineNumWidth+"px",gH(f),!0}return !1}function gW(b,a){return String(b.lineNumberFormatter(a+b.firstLineNumber))}function g7(a){return a.scroller.getBoundingClientRect().left-a.sizer.getBoundingClientRect().left}function gU(c,a,b){var d=c.display;this.viewport=a,this.visible=f4(d,c.doc,a),this.editorIsHidden=!d.wrapper.offsetWidth,this.wrapperHeight=d.wrapper.clientHeight,this.wrapperWidth=d.wrapper.clientWidth,this.oldDisplayWidth=cd(c),this.force=b,this.dims=hf(c),this.events=[]}function gs(b){var a=b.display;!a.scrollbarsClipped&&a.scroller.offsetWidth&&(a.nativeBarWidth=a.scroller.offsetWidth-a.scroller.clientWidth,a.heightForcer.style.height=cy(b)+"px",a.sizer.style.marginBottom=-a.nativeBarWidth+"px",a.sizer.style.borderRightWidth=cy(b)+"px",a.scrollbarsClipped=!0)}function g6(h,m){var b=h.display,d=h.doc;if(m.editorIsHidden){return hy(h),!1}if(!m.force&&m.visible.from>=b.viewFrom&&m.visible.to<=b.viewTo&&(null==b.updateLineNumbers||b.updateLineNumbers>=b.viewTo)&&b.renderedView==b.view&&0==h1(h)){return !1}hu(h)&&(hy(h),m.dims=hf(h));var g=d.first+d.size,c=Math.max(m.visible.from-h.options.viewportMargin,d.first),f=Math.min(g,m.visible.to+h.options.viewportMargin);b.viewFrom<c&&c-b.viewFrom<20&&(c=Math.max(d.first,b.viewFrom)),b.viewTo>f&&b.viewTo-f<20&&(f=Math.min(g,b.viewTo)),hc&&(c=aF(h.doc,c),f=ac(h.doc,f));var p=c!=b.viewFrom||f!=b.viewTo||b.lastWrapHeight!=m.wrapperHeight||b.lastWrapWidth!=m.wrapperWidth;bx(h,c,f),b.viewOffset=dj(bN(h.doc,b.viewFrom)),h.display.mover.style.top=b.viewOffset+"px";var j=h1(h);if(!p&&0==j&&!m.force&&b.renderedView==b.view&&(null==b.updateLineNumbers||b.updateLineNumbers>=b.viewTo)){return !1}var k=em();return j>4&&(b.lineDiv.style.display="none"),g0(h,b.updateLineNumbers,m.dims),j>4&&(b.lineDiv.style.display=""),b.renderedView=b.view,k&&em()!=k&&k.offsetHeight&&k.focus(),c0(b.cursorDiv),c0(b.selectionDiv),b.gutters.style.height=b.sizer.style.minHeight=0,p&&(b.lastWrapHeight=m.wrapperHeight,b.lastWrapWidth=m.wrapperWidth,eb(h,400)),b.updateLineNumbers=null,!0}function g4(d,b){for(var c=b.viewport,f=!0;(f&&d.options.lineWrapping&&b.oldDisplayWidth!=cd(d)||(c&&null!=c.top&&(c={top:Math.min(d.doc.height+f0(d.display)-ay(d),c.top)}),b.visible=f4(d.display,d.doc,c),!(b.visible.from>=d.display.viewFrom&&b.visible.to<=d.display.viewTo)))&&g6(d,b);f=!1){g2(d);var a=gf(d);eL(d),f2(d,a),hw(d,a)}b.signal(d,"update",d),(d.display.viewFrom!=d.display.reportedViewFrom||d.display.viewTo!=d.display.reportedViewTo)&&(b.signal(d,"viewportChange",d,d.display.viewFrom,d.display.viewTo),d.display.reportedViewFrom=d.display.viewFrom,d.display.reportedViewTo=d.display.viewTo)}function gQ(c,a){var b=new gU(c,a);if(g6(c,b)){g2(c),g4(c,b);var d=gf(c);eL(c),f2(c,d),hw(c,d),b.finish()}}function hw(b,a){b.display.sizer.style.minHeight=a.docHeight+"px",b.display.heightForcer.style.top=a.docHeight+"px",b.display.gutters.style.height=a.docHeight+b.display.barHeight+cy(b)+"px"}function g2(h){for(var m=h.display,b=m.lineDiv.offsetTop,d=0;d<m.view.length;d++){var g,c=m.view[d];if(!c.hidden){if(gY&&8>aE){var f=c.node.offsetTop+c.node.offsetHeight;g=f-b,b=f}else{var p=c.node.getBoundingClientRect();g=p.bottom-p.top}var j=c.line.height-g;if(2>g&&(g=hU(m)),(j>0.001||-0.001>j)&&(fH(c.line,g),hq(c.line),c.rest)){for(var k=0;k<c.rest.length;k++){hq(c.rest[k])}}}}}function hq(b){if(b.widgets){for(var a=0;a<b.widgets.length;++a){b.widgets[a].height=b.widgets[a].node.parentNode.offsetHeight}}}function hf(f){for(var c=f.display,d={},h={},b=c.gutters.clientLeft,g=c.gutters.firstChild,a=0;g;g=g.nextSibling,++a){d[f.options.gutters[a]]=g.offsetLeft+g.clientLeft+b,h[f.options.gutters[a]]=g.clientWidth}return{fixedPos:g7(c),gutterTotalWidth:c.gutters.offsetWidth,gutterLeft:d,gutterWidth:h,wrapperWidth:c.wrapper.clientWidth}}function g0(v,A,b){function j(a){var c=a.nextSibling;return ab&&bT&&v.display.currentWheelTarget==a?a.style.display="none":a.parentNode.removeChild(a),c}for(var m=v.display,g=v.options.lineNumbers,k=m.lineDiv,B=k.firstChild,y=m.view,z=m.viewFrom,x=0;x<y.length;x++){var p=y[x];if(p.hidden){}else{if(p.node&&p.node.parentNode==k){for(;B!=p.node;){B=j(B)}var q=g&&null!=A&&z>=A&&p.lineNumber;p.changes&&(hR(p.changes,"gutter")>-1&&(q=!1),hp(v,p,z,b)),q&&(c0(p.lineNumber),p.lineNumber.appendChild(document.createTextNode(gW(v.options,z)))),B=p.node.nextSibling}else{var w=gR(v,p,z,b);k.insertBefore(w,B)}}z+=p.size}for(;B;){B=j(B)}}function hp(d,b,c,g){for(var a=0;a<b.changes.length;a++){var f=b.changes[a];"text"==f?gX(d,b):"gutter"==f?hh(d,b,c,g):"class"==f?hv(b):"widget"==f&&gT(d,b,g)}b.changes=null}function hd(a){return a.node==a.text&&(a.node=ds("div",null,null,"position: relative"),a.text.parentNode&&a.text.parentNode.replaceChild(a.node,a.text),a.node.appendChild(a.text),gY&&8>aE&&(a.node.style.zIndex=2)),a.node}function f1(c){var a=c.bgClass?c.bgClass+" "+(c.line.bgClass||""):c.line.bgClass;if(a&&(a+=" CodeMirror-linebackground"),c.background){a?c.background.className=a:(c.background.parentNode.removeChild(c.background),c.background=null)}else{if(a){var b=hd(c);c.background=b.insertBefore(ds("div",null,a),b.firstChild)}}}function hm(c,a){var b=c.display.externalMeasured;return b&&b.line==a.line?(c.display.externalMeasured=null,a.measure=b.measure,b.built):ax(c,a)}function gX(c,a){var b=a.text.className,d=hm(c,a);a.text==a.node&&(a.node=d.pre),a.text.parentNode.replaceChild(d.pre,a.text),a.text=d.pre,d.bgClass!=a.bgClass||d.textClass!=a.textClass?(a.bgClass=d.bgClass,a.textClass=d.textClass,hv(a)):b&&(a.text.className=b)}function hv(b){f1(b),b.line.wrapClass?hd(b).className=b.line.wrapClass:b.node!=b.text&&(b.node.className="");var a=b.textClass?b.textClass+" "+(b.line.textClass||""):b.line.textClass;b.text.className=a||""}function hh(h,m,b,d){if(m.gutter&&(m.node.removeChild(m.gutter),m.gutter=null),m.gutterBackground&&(m.node.removeChild(m.gutterBackground),m.gutterBackground=null),m.line.gutterClass){var g=hd(m);m.gutterBackground=ds("div",null,"CodeMirror-gutter-background "+m.line.gutterClass,"left: "+(h.options.fixedGutter?d.fixedPos:-d.gutterTotalWidth)+"px; width: "+d.gutterTotalWidth+"px"),g.insertBefore(m.gutterBackground,m.text)}var c=m.line.gutterMarkers;if(h.options.lineNumbers||c){var g=hd(m),f=m.gutter=ds("div",null,"CodeMirror-gutter-wrapper","left: "+(h.options.fixedGutter?d.fixedPos:-d.gutterTotalWidth)+"px");if(h.display.input.setUneditable(f),g.insertBefore(f,m.text),m.line.gutterClass&&(f.className+=" "+m.line.gutterClass),!h.options.lineNumbers||c&&c["CodeMirror-linenumbers"]||(m.lineNumber=f.appendChild(ds("div",gW(h.options,b),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+d.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+h.display.lineNumInnerWidth+"px"))),c){for(var p=0;p<h.options.gutters.length;++p){var j=h.options.gutters[p],k=c.hasOwnProperty(j)&&c[j];k&&f.appendChild(ds("div",[k],"CodeMirror-gutter-elt","left: "+d.gutterLeft[j]+"px; width: "+d.gutterWidth[j]+"px"))}}}}function gT(d,b,c){b.alignable&&(b.alignable=null);for(var f,a=b.node.firstChild;a;a=f){var f=a.nextSibling;"CodeMirror-linewidget"==a.className&&b.node.removeChild(a)}ha(d,b,c)}function gR(d,b,c,f){var a=hm(d,b);return b.text=b.node=a.pre,a.bgClass&&(b.bgClass=a.bgClass),a.textClass&&(b.textClass=a.textClass),hv(b),hh(d,b,c,f),ha(d,b,f),b.node}function ha(c,a,b){if(gv(c,a.line,a,b,!0),a.rest){for(var d=0;d<a.rest.length;d++){gv(c,a.rest[d],a,b,!1)}}}function gv(h,m,b,d,g){if(m.widgets){for(var c=hd(b),f=0,p=m.widgets;f<p.length;++f){var j=p[f],k=ds("div",[j.node],"CodeMirror-linewidget");j.handleMouseEvents||k.setAttribute("cm-ignore-events","true"),gP(j,k,b,d),h.display.input.setUneditable(k),g&&j.above?c.insertBefore(k,b.gutter||b.text):c.appendChild(k),fM(j,"redraw")}}}function gP(d,b,c,f){if(d.noHScroll){(c.alignable||(c.alignable=[])).push(b);var a=f.wrapperWidth;b.style.left=f.fixedPos+"px",d.coverGutter||(a-=f.gutterTotalWidth,b.style.paddingLeft=f.gutterTotalWidth+"px"),b.style.width=a+"px"}d.coverGutter&&(b.style.zIndex=5,b.style.position="relative",d.noHScroll||(b.style.marginLeft=-f.gutterTotalWidth+"px"))}function gO(a){return hA(a.line,a.ch)}function gL(b,a){return aw(b,a)<0?a:b}function hS(b,a){return aw(b,a)<0?b:a}function gc(a){a.state.focused||(a.display.input.focus(),aR(a))}function gN(x,C,b,k,q){var j=x.doc;x.display.shift=!1,k||(k=j.sel);var m=x.state.pasteIncoming||"paste"==q,D=j.splitLines(C),A=null;if(m&&k.ranges.length>1){if(d6&&d6.join("\n")==C){if(k.ranges.length%d6.length==0){A=[];for(var B=0;B<d6.length;B++){A.push(j.splitLines(d6[B]))}}}else{D.length==k.ranges.length&&(A=eK(D,function(a){return[a]}))}}for(var B=k.ranges.length-1;B>=0;B--){var z=k.ranges[B],v=z.from(),w=z.to();z.empty()&&(b&&b>0?v=hA(v.line,v.ch-b):x.state.overwrite&&!m&&(w=hA(w.line,Math.min(bN(j,w.line).text.length,w.ch+a2(D).length))));var y=x.curOp.updateInput,g={from:v,to:w,text:A?A[B%A.length]:D,origin:q||(m?"paste":x.state.cutIncoming?"cut":"+input")};dB(x.doc,g),fM(x,"inputRead",x,g)}C&&!m&&hb(x,C),hz(x),x.curOp.updateInput=y,x.curOp.typing=!0,x.state.pasteIncoming=x.state.cutIncoming=!1}function gZ(c,a){var b=c.clipboardData&&c.clipboardData.getData("text/plain");return b?(c.preventDefault(),a.isReadOnly()||a.options.disableInput||cE(a,function(){gN(a,b,0,null,"paste")}),!0):void 0}function hb(g,c){if(g.options.electricChars&&g.options.smartIndent){for(var f=g.doc.sel,j=f.ranges.length-1;j>=0;j--){var b=f.ranges[j];if(!(b.head.ch>100||j&&f.ranges[j-1].head.line==b.head.line)){var h=g.getModeAt(b.head),a=!1;if(h.electricChars){for(var d=0;d<h.electricChars.length;d++){if(c.indexOf(h.electricChars.charAt(d))>-1){a=d4(g,b.head.line,"smart");break}}}else{h.electricInput&&h.electricInput.test(bN(g.doc,b.head.line).text.slice(0,b.head.ch))&&(a=d4(g,b.head.line,"smart"))}a&&fM(g,"electricInput",g,b.head.line)}}}}function fK(d){for(var b=[],c=[],g=0;g<d.doc.sel.ranges.length;g++){var a=d.doc.sel.ranges[g].head.line,f={anchor:hA(a,0),head:hA(a+1,0)};c.push(f),b.push(d.getRange(f.anchor,f.head))}return{text:b,ranges:c}}function bw(a){a.setAttribute("autocorrect","off"),a.setAttribute("autocapitalize","off"),a.setAttribute("spellcheck","false")}function ca(a){this.cm=a,this.prevInput="",this.pollingFast=!1,this.polling=new bX,this.inaccurateSelection=!1,this.hasSelection=!1,this.composing=null}function dp(){var b=ds("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none"),a=ds("div",[b],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return ab?b.style.width="1000px":b.setAttribute("wrap","off"),e8&&(b.style.border="1px solid black"),bw(b),a}function eI(a){this.cm=a,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new bX,this.gracePeriod=!1}function cY(h,k){var b=gM(h,k.line);if(!b||b.hidden){return null}var d=bN(h.doc,k.line),g=cv(b,d,k.line),c=eF(d),f="left";if(c){var m=a6(c,k.ch);f=m%2?"right":"left"}var j=bZ(g.map,k.ch,f);return j.offset="right"==j.collapse?j.end:j.start,j}function dU(b,a){return a&&(b.bad=!0),b}function bO(d,b,c){var g;if(b==d.display.lineDiv){if(g=d.display.lineDiv.childNodes[c],!g){return dU(d.clipPos(hA(d.display.viewTo-1)),!0)}b=null,c=0}else{for(g=b;;g=g.parentNode){if(!g||g==d.display.lineDiv){return null}if(g.parentNode&&g.parentNode==d.display.lineDiv){break}}}for(var a=0;a<d.display.view.length;a++){var f=d.display.view[a];if(f.node==g){return hP(f,b,c)}}}function hP(x,C,b){function k(F,c,e){for(var p=-1;p<(z?z.length:0);p++){for(var d=0>p?B.map:z[p],f=0;f<d.length;f+=3){var G=d[f+2];if(G==F||G==c){var E=bv(0>p?x.line:x.rest[p]),u=d[f]+e;return(0>e||G!=F)&&(u=d[f+(e?1:0)]),hA(E,u)}}}}var q=x.text.firstChild,j=!1;if(!C||!cb(q,C)){return dU(hA(bv(x.line),0),!0)}if(C==q&&(j=!0,C=q.childNodes[b],b=0,!C)){var m=x.rest?a2(x.rest):x.line;return dU(hA(bv(m),m.text.length),j)}var D=3==C.nodeType?C:null,A=C;for(D||1!=C.childNodes.length||3!=C.firstChild.nodeType||(D=C.firstChild,b&&(b=D.nodeValue.length));A.parentNode!=q;){A=A.parentNode}var B=x.measure,z=B.maps,v=k(D,A,b);if(v){return dU(v,j)}for(var w=A.nextSibling,y=D?D.nodeValue.length-b:0;w;w=w.nextSibling){if(v=k(w,w.firstChild,0)){return dU(hA(v.line,v.ch-y),j)}y+=w.textContent.length}for(var g=A.previousSibling,y=b;g;g=g.previousSibling){if(v=k(g,g.firstChild,-1)){return dU(hA(v.line,v.ch+y),j)}y+=w.textContent.length}}function ba(h,m,b,d,g){function c(a){return function(e){return e.id==a}}function f(a){if(1==a.nodeType){var i=a.getAttribute("cm-text");if(null!=i){return""==i&&(i=a.textContent.replace(/\u200b/g,"")),void (p+=i)}var q,e=a.getAttribute("cm-marker");if(e){var l=h.findMarks(hA(d,0),hA(g+1,0),c(+e));return void (l.length&&(q=l[0].find())&&(p+=eq(h.doc,q.from,q.to).join(k)))}if("false"==a.getAttribute("contenteditable")){return}for(var o=0;o<a.childNodes.length;o++){f(a.childNodes[o])}/^(pre|div|p)$/i.test(a.nodeName)&&(j=!0)}else{if(3==a.nodeType){var n=a.nodeValue;if(!n){return}j&&(p+=k,j=!1),p+=n}}}for(var p="",j=!1,k=h.doc.lineSeparator();f(m),m!=b;){m=m.nextSibling}return p}function gD(b,a){this.ranges=b,this.primIndex=a}function eW(b,a){this.anchor=b,this.head=a}function fv(h,k){var b=h[k];h.sort(function(i,a){return aw(i.from(),a.from())}),k=hR(h,b);for(var d=1;d<h.length;d++){var g=h[d],c=h[d-1];if(aw(c.to(),g.from())>=0){var f=hS(c.from(),g.from()),m=gL(c.to(),g.to()),j=c.empty()?g.from()==g.head:c.from()==c.head;k>=d&&--k,h.splice(--d,2,new eW(j?m:f,j?f:m))}}return new gD(h,k)}function fX(b,a){return new gD([new eW(b,a||b)],0)}function cJ(b,a){return Math.max(b.first,Math.min(a,b.first+b.size-1))}function fa(c,a){if(a.line<c.first){return hA(c.first,0)}var b=c.first+c.size-1;return a.line>b?hA(b,bN(c,b).text.length):aW(a,bN(c,a.line).text.length)}function aW(c,a){var b=c.ch;return null==b||b>a?hA(c.line,a):0>b?hA(c.line,0):c}function dF(b,a){return a>=b.first&&a<b.first+b.size}function h0(c,a){for(var b=[],d=0;d<a.length;d++){b[d]=fa(c,a[d])}return b}function hj(d,b,c,g){if(d.cm&&d.cm.display.shift||d.extend){var a=b.anchor;if(g){var f=aw(c,a)<0;f!=aw(g,a)<0?(a=c,c=g):f!=aw(c,g)<0&&(c=g)}return new eW(a,c)}return new eW(g||c,c)}function aI(c,a,b,d){d8(c,new gD([hj(c,c.sel.primary(),a,b)],0),d)}function am(d,b,c){for(var g=[],a=0;a<d.sel.ranges.length;a++){g[a]=hj(d,d.sel.ranges[a],b[a],null)}var f=fv(g,d.sel.primIndex);d8(d,f,c)}function bj(d,b,c,f){var a=d.sel.ranges.slice(0);a[b]=c,d8(d,fv(a,d.sel.primIndex),f)}function dX(c,a,b,d){d8(c,fX(a,b),d)}function fN(c,a,b){var d={ranges:a.ranges,update:function(e){this.ranges=[];for(var f=0;f<e.length;f++){this.ranges[f]=new eW(fa(c,e[f].anchor),fa(c,e[f].head))}},origin:b&&b.origin};return a1(c,"beforeSelectionChange",c,d),c.cm&&a1(c.cm,"beforeSelectionChange",c.cm,d),d.ranges!=a.ranges?fv(d.ranges,d.ranges.length-1):a}function dI(d,b,c){var f=d.history.done,a=a2(f);a&&a.ranges?(f[f.length-1]=b,fy(d,b,c)):d8(d,b,c)}function d8(c,a,b){fy(c,a,b),eT(c,c.sel,c.cm?c.cm.curOp.id:NaN,b)}function fy(c,a,b){(fc(c,"beforeSelectionChange")||c.cm&&fc(c.cm,"beforeSelectionChange"))&&(a=fN(c,a,b));var d=b&&b.bias||(aw(a.primary().head,c.sel.primary().head)<0?-1:1);fd(c,bY(c,a,d,!0)),b&&b.scroll===!1||!c.cm||hz(c.cm)}function fd(b,a){a.equals(b.sel)||(b.sel=a,b.cm&&(b.cm.curOp.updateInput=b.cm.curOp.selectionChanged=!0,fx(b.cm)),fM(b,"cursorActivity",b))}function cM(a){fd(a,bY(a,a.sel,null,!1),hk)}function bY(h,m,b,d){for(var g,c=0;c<m.ranges.length;c++){var f=m.ranges[c],p=m.ranges.length==h.sel.ranges.length&&h.sel.ranges[c],j=a3(h,f.anchor,p&&p.anchor,b,d),k=a3(h,f.head,p&&p.head,b,d);(g||j!=f.anchor||k!=f.head)&&(g||(g=m.ranges.slice(0,c)),g[c]=new eW(j,k))}return g?fv(g,m.primIndex):m}function eZ(m,w,b,f,j){var d=bN(m,w.line);if(d.markedSpans){for(var g=0;g<d.markedSpans.length;++g){var x=d.markedSpans[g],q=x.marker;if((null==x.from||(q.inclusiveLeft?x.from<=w.ch:x.from<w.ch))&&(null==x.to||(q.inclusiveRight?x.to>=w.ch:x.to>w.ch))){if(j&&(a1(q,"beforeCursorEnter"),q.explicitlyCleared)){if(d.markedSpans){--g;continue}break}if(!q.atomic){continue}if(b){var v,p=q.find(0>f?1:-1);if((0>f?q.inclusiveRight:q.inclusiveLeft)&&(p=hT(m,p,-f,p&&p.line==w.line?d:null)),p&&p.line==w.line&&(v=aw(p,b))&&(0>f?0>v:v>0)){return eZ(m,p,w,f,j)}}var k=q.find(0>f?-1:1);return(0>f?q.inclusiveLeft:q.inclusiveRight)&&(k=hT(m,k,f,k.line==w.line?d:null)),k?eZ(m,k,w,f,j):null}}}return w}function a3(f,c,d,h,b){var g=h||1,a=eZ(f,c,d,g,b)||!b&&eZ(f,c,d,g,!0)||eZ(f,c,d,-g,b)||!b&&eZ(f,c,d,-g,!0);return a?a:(f.cantEdit=!0,hA(f.first,0))}function hT(c,a,b,d){return 0>b&&0==a.ch?a.line>c.first?fa(c,hA(a.line-1)):null:b>0&&a.ch==(d||bN(c,a.line)).text.length?a.line<c.first+c.size-1?hA(a.line+1,0):null:new hA(a.line,a.ch+b)}function eL(a){a.display.input.showSelection(a.display.input.prepareSelection())}function aP(h,k){for(var b=h.doc,d={},g=d.cursors=document.createDocumentFragment(),c=d.selection=document.createDocumentFragment(),f=0;f<b.sel.ranges.length;f++){if(k!==!1||f!=b.sel.primIndex){var m=b.sel.ranges[f];if(!(m.from().line>=h.display.viewTo||m.to().line<h.display.viewFrom)){var j=m.empty();(j||h.options.showCursorWhenSelecting)&&hx(h,m.head,g),j||hI(h,m,c)}}}return d}function hx(d,b,c){var g=fO(d,b,"div",null,null,!d.options.singleCursorHeightPerLine),a=c.appendChild(ds("div"," ","CodeMirror-cursor"));if(a.style.left=g.left+"px",a.style.top=g.top+"px",a.style.height=Math.max(0,g.bottom-g.top)*d.options.cursorHeight+"px",g.other){var f=c.appendChild(ds("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"));f.style.display="",f.style.left=g.other.left+"px",f.style.top=g.other.top+"px",f.style.height=0.85*(g.other.bottom-g.other.top)+"px"}}function hI(G,k,w){function z(d,a,c,f){0>a&&(a=0),a=Math.round(a),f=Math.round(f),q.appendChild(ds("div",null,"CodeMirror-selected","position: absolute; left: "+d+"px; top: "+a+"px; width: "+(null==c?I-d:c)+"px; height: "+(f-a)+"px"))}function C(e,m,d){function p(a,f){return ff(G,hA(e,a),"div",g,f)}var l,c,g=bN(B,e),n=g.text.length;return fC(eF(g),m||0,null==d?n:d,function(u,i,a){var o,K,s,r=p(u,"left");if(u==i){o=r,K=s=r.left}else{if(o=p(i-1,"right"),"rtl"==a){var f=r;r=o,o=f}K=r.left,s=o.right}null==m&&0==u&&(K=j),o.top-r.top>3&&(z(K,r.top,null,r.bottom),K=j,r.bottom<o.top&&z(K,r.bottom,null,o.top)),null==d&&i==n&&(s=I),(!l||r.top<l.top||r.top==l.top&&r.left<l.left)&&(l=r),(!c||o.bottom>c.bottom||o.bottom==c.bottom&&o.right>c.right)&&(c=o),j+1>K&&(K=j),z(K,o.top,s-K,o.bottom)}),{start:l,end:c}}var y=G.display,B=G.doc,q=document.createDocumentFragment(),J=eu(G.display),j=J.left,I=Math.max(y.sizerWidth,cd(G)-y.sizer.offsetLeft)-J.right,D=k.from(),F=k.to();if(D.line==F.line){C(D.line,D.ch,F.ch)}else{var H=bN(B,D.line),x=bN(B,F.line),E=hX(H)==hX(x),b=C(D.line,D.ch,E?H.text.length+1:null).end,A=C(F.line,E?0:null,F.ch).start;E&&(b.top<A.top-2?(z(b.right,b.top,null,b.bottom),z(j,A.top,A.left,A.bottom)):z(b.right,b.top,A.left-b.right,b.bottom)),b.bottom<A.top&&z(j,b.bottom,null,A.top)}w.appendChild(q)}function aB(c){if(c.state.focused){var a=c.display;clearInterval(a.blinker);var b=!0;a.cursorDiv.style.visibility="",c.options.cursorBlinkRate>0?a.blinker=setInterval(function(){a.cursorDiv.style.visibility=(b=!b)?"":"hidden"},c.options.cursorBlinkRate):c.options.cursorBlinkRate<0&&(a.cursorDiv.style.visibility="hidden")}}function eb(b,a){b.doc.mode.startState&&b.doc.frontier<b.display.viewTo&&b.state.highlight.set(a,aA(bD,b))}function bD(d){var b=d.doc;if(b.frontier<b.first&&(b.frontier=b.first),!(b.frontier>=d.display.viewTo)){var c=+new Date+d.options.workTime,f=bI(b.mode,du(d,b.frontier)),a=[];b.iter(b.frontier,Math.min(b.first+b.size,d.display.viewTo+500),function(n){if(b.frontier>=d.display.viewFrom){var g=n.styles,k=n.text.length>d.options.maxHighlightLength,e=eH(d,n,k?bI(b.mode,f):f,!0);n.styles=e.styles;var i=n.styleClasses,p=e.classes;p?n.styleClasses=p:i&&(n.styleClasses=null);for(var j=!g||g.length!=n.styles.length||i!=p&&(!i||!p||i.bgClass!=p.bgClass||i.textClass!=p.textClass),m=0;!j&&m<g.length;++m){j=g[m]!=n.styles[m]}j&&a.push(b.frontier),n.stateAfter=k?f:bI(b.mode,f)}else{n.text.length<=d.options.maxHighlightLength&&hg(d,n.text,f),n.stateAfter=b.frontier%5==0?bI(b.mode,f):null}return ++b.frontier,+new Date>c?(eb(d,d.options.workDelay),!0):void 0}),a.length&&cE(d,function(){for(var e=0;e<a.length;e++){g5(d,a[e],"text")}})}}function h7(h,m,b){for(var d,g,c=h.doc,f=b?-1:m-(h.doc.mode.innerMode?1000:100),p=m;p>f;--p){if(p<=c.first){return c.first}var j=bN(c,p-1);if(j.stateAfter&&(!b||p<=c.frontier)){return p}var k=d9(j.text,null,h.options.tabSize);(null==g||d>k)&&(g=p-1,d=k)}return g}function du(f,c,d){var h=f.doc,b=f.display;if(!h.mode.startState){return !0}var g=h7(f,c,d),a=g>h.first&&bN(h,g-1).stateAfter;return a=a?bI(h.mode,a):hJ(h.mode),h.iter(g,c,function(i){hg(f,i.text,a);var e=g==c-1||g%5==0||g>=b.viewFrom&&g<b.viewTo;i.stateAfter=e?bI(h.mode,a):null,++g}),d&&(h.frontier=g),a}function c1(a){return a.lineSpace.offsetTop}function f0(a){return a.mover.offsetHeight-a.lineSpace.offsetHeight}function eu(c){if(c.cachedPaddingH){return c.cachedPaddingH}var a=fZ(c.measure,ds("pre","x")),b=window.getComputedStyle?window.getComputedStyle(a):a.currentStyle,d={left:parseInt(b.paddingLeft),right:parseInt(b.paddingRight)};return isNaN(d.left)||isNaN(d.right)||(c.cachedPaddingH=d),d}function cy(a){return eJ-a.display.nativeBarWidth}function cd(a){return a.display.scroller.clientWidth-cy(a)-a.display.barWidth}function ay(a){return a.display.scroller.clientHeight-cy(a)-a.display.barHeight}function df(h,m,b){var d=h.options.lineWrapping,g=d&&cd(h);if(!m.measure.heights||d&&m.measure.width!=g){var c=m.measure.heights=[];if(d){m.measure.width=g;for(var f=m.text.firstChild.getClientRects(),p=0;p<f.length-1;p++){var j=f[p],k=f[p+1];Math.abs(j.bottom-k.bottom)>2&&c.push((j.bottom+k.top)/2-b.top)}}c.push(b.bottom-b.top)}}function cv(c,a,b){if(c.line==a){return{map:c.measure.map,cache:c.measure.cache}}for(var d=0;d<c.rest.length;d++){if(c.rest[d]==a){return{map:c.measure.maps[d],cache:c.measure.caches[d]}}}for(var d=0;d<c.rest.length;d++){if(bv(c.rest[d])>b){return{map:c.measure.maps[d],cache:c.measure.caches[d],before:!0}}}}function bV(d,b){b=hX(b);var c=bv(b),f=d.display.externalMeasured=new hK(d.doc,b,c);f.lineN=c;var a=f.built=ax(d,f);return f.text=a.pre,fZ(d.display.lineMeasure,a.pre),f}function ex(c,a,b,d){return bk(c,fz(c,a),b,d)}function gM(c,a){if(a>=c.display.viewFrom&&a<c.display.viewTo){return c.display.view[aq(c,a)]}var b=c.display.externalMeasured;return b&&a>=b.lineN&&a<b.lineN+b.size?b:void 0}function fz(d,b){var c=bv(b),f=gM(d,c);f&&!f.text?f=null:f&&f.changes&&(hp(d,f,c,hf(d)),d.curOp.forceUpdate=!0),f||(f=bV(d,b));var a=cv(f,b,c);return{line:b,view:f,rect:null,map:a.map,cache:a.cache,before:a.before,hasHeights:!1}}function bk(f,c,d,h,b){c.before&&(d=-1);var g,a=d+(h||"");return c.cache.hasOwnProperty(a)?g=c.cache[a]:(c.rect||(c.rect=c.view.text.getBoundingClientRect()),c.hasHeights||(df(f,c.view,c.rect),c.hasHeights=!0),g=c6(f,c,d,h),g.bogus||(c.cache[a]=g)),{left:g.left,right:g.right,top:b?g.rtop:g.top,bottom:b?g.rbottom:g.bottom}}function bZ(h,m,b){for(var d,g,c,f,p=0;p<h.length;p+=3){var j=h[p],k=h[p+1];if(j>m?(g=0,c=1,f="left"):k>m?(g=m-j,c=g+1):(p==h.length-3||m==k&&h[p+3]>m)&&(c=k-j,g=c-1,m>=k&&(f="right")),null!=g){if(d=h[p+2],j==k&&b==(d.insertLeft?"left":"right")&&(f=b),"left"==b&&0==g){for(;p&&h[p-2]==h[p-3]&&h[p-1].insertLeft;){d=h[(p-=3)+2],f="left"}}if("right"==b&&g==k-j){for(;p<h.length-3&&h[p+3]==h[p+4]&&!h[p+5].insertLeft;){d=h[(p+=3)+2],f="right"}}break}}return{node:d,start:g,end:c,collapse:f,coverStart:j,coverEnd:k}}function c6(J,w,z,C){var F,B=bZ(w.map,z,C),E=B.node,x=B.start,N=B.end,q=B.collapse;if(3==E.nodeType){for(var L=0;4>L;L++){for(;x&&h6(w.line.text.charAt(B.coverStart+x));){--x}for(;B.coverStart+N<B.coverEnd&&h6(w.line.text.charAt(B.coverStart+N));){++N}if(gY&&9>aE&&0==x&&N==B.coverEnd-B.coverStart){F=E.parentNode.getBoundingClientRect()}else{if(gY&&J.options.lineWrapping){var G=cZ(E,x,N).getClientRects();F=G.length?G["right"==C?G.length-1:0]:cW}else{F=cZ(E,x,N).getBoundingClientRect()||cW}}if(F.left||F.right||0==x){break}N=x,x-=1,q="right"}gY&&11>aE&&(F=ey(J.display.measure,F))}else{x>0&&(q=C="right");var G;F=J.options.lineWrapping&&(G=E.getClientRects()).length>1?G["right"==C?G.length-1:0]:E.getBoundingClientRect()}if(gY&&9>aE&&!x&&(!F||!F.left&&!F.right)){var I=E.parentNode.getClientRects()[0];F=I?{left:I.left,right:I.left+gS(J.display),top:I.top,bottom:I.bottom}:cW}for(var K=F.top-w.rect.top,A=F.bottom-w.rect.top,H=(K+A)/2,k=w.view.measure.heights,L=0;L<k.length-1&&!(H<k[L]);L++){}var D=L?k[L-1]:0,j=k[L],M={left:("right"==q?F.right:F.left)-w.rect.left,right:("left"==q?F.left:F.right)-w.rect.left,top:D,bottom:j};return F.left||F.right||(M.bogus=!0),J.options.singleCursorHeightPerLine||(M.rtop=K,M.rbottom=A),M}function ey(c,a){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!gI(c)){return a}var b=screen.logicalXDPI/screen.deviceXDPI,d=screen.logicalYDPI/screen.deviceYDPI;return{left:a.left*b,right:a.right*b,top:a.top*d,bottom:a.bottom*d}}function cN(b){if(b.measure&&(b.measure.cache={},b.measure.heights=null,b.rest)){for(var a=0;a<b.rest.length;a++){b.measure.caches[a]={}}}}function dJ(b){b.display.externalMeasure=null,c0(b.display.lineMeasure);for(var a=0;a<b.display.view.length;a++){cN(b.display.view[a])}}function bE(a){dJ(a),a.display.cachedCharWidth=a.display.cachedTextHeight=a.display.cachedPaddingH=null,a.options.lineWrapping||(a.display.maxLineChanged=!0),a.display.lineNumChars=null}function hD(){return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function a4(){return window.pageYOffset||(document.documentElement||document.body).scrollTop}function f7(h,k,b,d){if(k.widgets){for(var g=0;g<k.widgets.length;++g){if(k.widgets[g].above){var c=dE(k.widgets[g]);b.top+=c,b.bottom+=c}}}if("line"==d){return b}d||(d="local");var f=dj(k);if("local"==d?f+=c1(h.display):f-=h.display.viewOffset,"page"==d||"window"==d){var m=h.display.lineSpace.getBoundingClientRect();f+=m.top+("window"==d?0:a4());var j=m.left+("window"==d?0:hD());b.left+=j,b.right+=j}return b.top+=f,b.bottom+=f,b}function eM(f,c,d){if("div"==d){return c}var h=c.left,b=c.top;if("page"==d){h-=hD(),b-=a4()}else{if("local"==d||!d){var g=f.display.sizer.getBoundingClientRect();h+=g.left,b+=g.top}}var a=f.display.lineSpace.getBoundingClientRect();return{left:h-a.left,top:b-a.top}}function ff(d,b,c,f,a){return f||(f=bN(d.doc,b.line)),f7(d,f,ex(d,f,b.ch,a),c)}function fO(m,w,b,f,j,d){function g(c,a){var e=bk(m,j,c,a?"right":"left",d);return a?e.left=e.right:e.right=e.left,f7(m,f,e,b)}function x(h,a){var c=q[a],i=c.level%2;return h==bq(c)&&a&&c.level<q[a-1].level?(c=q[--a],h=b2(c)-(c.level%2?0:1),i=!0):h==b2(c)&&a<q.length-1&&c.level<q[a+1].level&&(c=q[++a],h=bq(c)-c.level%2,i=!1),i&&h==c.to&&h>c.from?g(h-1):g(h,i)}f=f||bN(m.doc,w.line),j||(j=fz(m,f));var q=eF(f),v=w.ch;if(!q){return g(v)}var p=a6(q,v),k=x(v,p);return null!=cO&&(k.other=x(v,cO)),k}function cz(d,b){var c=0,b=fa(d.doc,b);d.options.lineWrapping||(c=gS(d.display)*b.ch);var f=bN(d.doc,b.line),a=dj(f)+c1(d.display);return{left:c,right:c,top:a,bottom:a+f.height}}function e0(d,b,c,f){var a=hA(d,b);return a.xRel=f,c&&(a.outside=!0),a}function aQ(h,m,b){var d=h.doc;if(b+=h.display.viewOffset,0>b){return e0(d.first,0,!0,-1)}var g=b7(d,b),c=d.first+d.size-1;if(g>c){return e0(d.first+d.size-1,bN(d,c).text.length,!0,1)}0>m&&(m=0);for(var f=bN(d,g);;){var p=dv(h,f,g,m,b),j=aT(f),k=j&&j.find(0,!0);if(!j||!(p.ch>k.from.ch||p.ch==k.from.ch&&p.xRel>0)){return p}g=bv(f=k.to.line)}}function dv(T,E,H,K,O){function J(b){var a=fO(T,hA(H,b),"line",E,D);return F=!0,N>a.bottom?a.left-X:N<a.top?a.left+X:(F=!1,a.left)}var N=O-dj(E),F=!1,X=2*T.display.wrapper.clientWidth,D=fz(T,E),V=eF(E),P=E.text.length,R=db(E),U=eB(E),I=J(R),Q=F,B=J(U),M=F;if(K>B){return e0(H,U,M,1)}for(;;){if(V?U==R||U==eO(E,R,1):1>=U-R){for(var q=I>K||B-K>=K-I?R:U,W=K-(q==R?I:B);h6(E.text.charAt(q));){++q}var A=e0(H,q,q==R?Q:M,-1>W?-1:W>1?1:0);return A}var z=Math.ceil(P/2),G=R+z;if(V){G=R;for(var j=0;z>j;++j){G=eO(E,G,1)}}var k=J(G);k>K?(U=G,B=k,(M=F)&&(B+=1000),P=z):(R=G,I=k,Q=F,P-=z)}}function hU(c){if(null!=c.cachedTextHeight){return c.cachedTextHeight}if(null==bz){bz=ds("pre");for(var a=0;49>a;++a){bz.appendChild(document.createTextNode("x")),bz.appendChild(ds("br"))}bz.appendChild(document.createTextNode("x"))}fZ(c.measure,bz);var b=bz.offsetHeight/50;return b>3&&(c.cachedTextHeight=b),c0(c.measure),b||1}function gS(d){if(null!=d.cachedCharWidth){return d.cachedCharWidth}var b=ds("span","xxxxxxxxxx"),c=ds("pre",[b]);fZ(d.measure,c);var f=b.getBoundingClientRect(),a=(f.right-f.left)/10;return a>2&&(d.cachedCharWidth=a),a||10}function aC(a){a.curOp={cm:a,viewChanged:!1,startHeight:a.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++ef},fV?fV.ops.push(a.curOp):a.curOp.ownsGroup=fV={ops:[a.curOp],delayedCallbacks:[]}}function h8(d){var b=d.delayedCallbacks,c=0;do{for(;c<b.length;c++){b[c].call(null)}for(var f=0;f<d.ops.length;f++){var a=d.ops[f];if(a.cursorActivityHandlers){for(;a.cursorActivityCalled<a.cursorActivityHandlers.length;){a.cursorActivityHandlers[a.cursorActivityCalled++].call(null,a.cm)}}}}while(c<b.length)}function bb(c){var a=c.curOp,b=a.ownsGroup;if(b){try{h8(b)}finally{fV=null;for(var d=0;d<b.ops.length;d++){b.ops[d].cm.curOp=null}dP(b)}}}function dP(c){for(var a=c.ops,b=0;b<a.length;b++){fF(a[b])}for(var b=0;b<a.length;b++){dA(a[b])}for(var b=0;b<a.length;b++){dY(a[b])}for(var b=0;b<a.length;b++){fm(a[b])}for(var b=0;b<a.length;b++){e5(a[b])}}function fF(c){var a=c.cm,b=a.display;gs(a),c.updateMaxLine&&gC(a),c.mustUpdate=c.viewChanged||c.forceUpdate||null!=c.scrollTop||c.scrollToPos&&(c.scrollToPos.from.line<b.viewFrom||c.scrollToPos.to.line>=b.viewTo)||b.maxLineChanged&&a.options.lineWrapping,c.update=c.mustUpdate&&new gU(a,c.mustUpdate&&{top:c.scrollTop,ensure:c.scrollToPos},c.forceUpdate)}function dA(a){a.updatedDisplay=a.mustUpdate&&g6(a.cm,a.update)}function dY(c){var a=c.cm,b=a.display;c.updatedDisplay&&g2(a),c.barMeasure=gf(a),b.maxLineChanged&&!a.options.lineWrapping&&(c.adjustWidthTo=ex(a,b.maxLine,b.maxLine.text.length).left+3,a.display.sizerWidth=c.adjustWidthTo,c.barMeasure.scrollWidth=Math.max(b.scroller.clientWidth,b.sizer.offsetLeft+c.adjustWidthTo+cy(a)+a.display.barWidth),c.maxScrollLeft=Math.max(0,b.sizer.offsetLeft+c.adjustWidthTo-cd(a))),(c.updatedDisplay||c.selectionChanged)&&(c.preparedSelection=b.input.prepareSelection())}function fm(b){var a=b.cm;null!=b.adjustWidthTo&&(a.display.sizer.style.minWidth=b.adjustWidthTo+"px",b.maxScrollLeft<a.doc.scrollLeft&&eA(a,Math.min(a.display.scroller.scrollLeft,b.maxScrollLeft),!0),a.display.maxLineChanged=!1),b.preparedSelection&&a.display.input.showSelection(b.preparedSelection),(b.updatedDisplay||b.startHeight!=a.doc.height)&&f2(a,b.barMeasure),b.updatedDisplay&&hw(a,b.barMeasure),b.selectionChanged&&aB(a),a.state.focused&&b.updateInput&&a.display.input.reset(b.typing),!b.focus||b.focus!=em()||document.hasFocus&&!document.hasFocus()||gc(b.cm)}function e5(g){var c=g.cm,f=c.display,j=c.doc;if(g.updatedDisplay&&g4(c,g.update),null==f.wheelStartX||null==g.scrollTop&&null==g.scrollLeft&&!g.scrollToPos||(f.wheelStartX=f.wheelStartY=null),null==g.scrollTop||f.scroller.scrollTop==g.scrollTop&&!g.forceScroll||(j.scrollTop=Math.max(0,Math.min(f.scroller.scrollHeight-f.scroller.clientHeight,g.scrollTop)),f.scrollbars.setScrollTop(j.scrollTop),f.scroller.scrollTop=j.scrollTop),null==g.scrollLeft||f.scroller.scrollLeft==g.scrollLeft&&!g.forceScroll||(j.scrollLeft=Math.max(0,Math.min(f.scroller.scrollWidth-f.scroller.clientWidth,g.scrollLeft)),f.scrollbars.setScrollLeft(j.scrollLeft),f.scroller.scrollLeft=j.scrollLeft,f3(c)),g.scrollToPos){var b=hL(c,fa(j,g.scrollToPos.from),fa(j,g.scrollToPos.to),g.scrollToPos.margin);g.scrollToPos.isCursor&&c.state.focused&&aY(c,b)}var h=g.maybeHiddenMarkers,a=g.maybeUnhiddenMarkers;if(h){for(var d=0;d<h.length;++d){h[d].lines.length||a1(h[d],"hide")}}if(a){for(var d=0;d<a.length;++d){a[d].lines.length&&a1(a[d],"unhide")}}f.wrapper.offsetHeight&&(j.scrollTop=c.display.scroller.scrollTop),g.changeObjs&&a1(c,"changes",c,g.changeObjs),g.update&&g.update.finish()}function cE(b,a){if(b.curOp){return a()}aC(b);try{return a()}finally{bb(b)}}function bQ(b,a){return function(){if(b.curOp){return a.apply(b,arguments)}aC(b);try{return a.apply(b,arguments)}finally{bb(b)}}}function eR(a){return function(){if(this.curOp){return a.apply(this,arguments)}aC(this);try{return a.apply(this,arguments)}finally{bb(this)}}}function aX(a){return function(){var b=this.cm;if(!b||b.curOp){return a.apply(this,arguments)}aC(b);try{return a.apply(this,arguments)}finally{bb(b)}}}function hK(c,a,b){this.line=a,this.rest=g1(a),this.size=this.rest?bv(a2(this.rest))-b+1:1,this.node=this.text=null,this.hidden=bf(c,a)}function eD(f,c,d){for(var h,b=[],g=c;d>g;g=h){var a=new hK(f.doc,bN(f.doc,g),g);h=g+a.size,b.push(a)}return b}function aJ(h,k,b,d){null==k&&(k=h.doc.first),null==b&&(b=h.doc.first+h.doc.size),d||(d=0);var g=h.display;if(d&&b<g.viewTo&&(null==g.updateLineNumbers||g.updateLineNumbers>k)&&(g.updateLineNumbers=k),h.curOp.viewChanged=!0,k>=g.viewTo){hc&&aF(h.doc,k)<g.viewTo&&hy(h)}else{if(b<=g.viewFrom){hc&&ac(h.doc,b+d)>g.viewFrom?hy(h):(g.viewFrom+=d,g.viewTo+=d)}else{if(k<=g.viewFrom&&b>=g.viewTo){hy(h)}else{if(k<=g.viewFrom){var c=d3(h,b,b+d,1);c?(g.view=g.view.slice(c.index),g.viewFrom=c.lineN,g.viewTo+=d):hy(h)}else{if(b>=g.viewTo){var c=d3(h,k,k,-1);c?(g.view=g.view.slice(0,c.index),g.viewTo=c.lineN):hy(h)}else{var f=d3(h,k,k,-1),m=d3(h,b,b+d,1);f&&m?(g.view=g.view.slice(0,f.index).concat(eD(h,f.lineN,m.lineN)).concat(g.view.slice(m.index)),g.viewTo+=d):hy(h)}}}}}var j=g.externalMeasured;j&&(b<j.lineN?j.lineN+=d:k<j.lineN+j.size&&(g.externalMeasured=null))}function g5(f,c,d){f.curOp.viewChanged=!0;var h=f.display,b=f.display.externalMeasured;if(b&&c>=b.lineN&&c<b.lineN+b.size&&(h.externalMeasured=null),!(c<h.viewFrom||c>=h.viewTo)){var g=h.view[aq(f,c)];if(null!=g.node){var a=g.changes||(g.changes=[]);-1==hR(a,d)&&a.push(d)}}}function hy(a){a.display.viewFrom=a.display.viewTo=a.doc.first,a.display.view=[],a.display.viewOffset=0}function aq(c,a){if(a>=c.display.viewTo){return null}if(a-=c.display.viewFrom,0>a){return null}for(var b=c.display.view,d=0;d<b.length;d++){if(a-=b[d].size,0>a){return d}}}function d3(h,k,b,d){var g,c=aq(h,k),f=h.display.view;if(!hc||b==h.doc.first+h.doc.size){return{index:c,lineN:b}}for(var m=0,j=h.display.viewFrom;c>m;m++){j+=f[m].size}if(j!=k){if(d>0){if(c==f.length-1){return null}g=j+f[c].size-k,c++}else{g=j-k}k+=g,b+=g}for(;aF(h.doc,b)!=b;){if(c==(0>d?0:f.length-1)){return null}b+=d*f[c-(0>d?1:0)].size,c+=d}return{index:c,lineN:b}}function bx(d,b,c){var f=d.display,a=f.view;0==a.length||b>=f.viewTo||c<=f.viewFrom?(f.view=eD(d,b,c),f.viewFrom=b):(f.viewFrom>b?f.view=eD(d,b,f.viewFrom).concat(f.view):f.viewFrom<b&&(f.view=f.view.slice(aq(d,b))),f.viewFrom=b,f.viewTo<c?f.view=f.view.concat(eD(d,f.viewTo,c)):f.viewTo>c&&(f.view=f.view.slice(0,aq(d,c)))),f.viewTo=c}function h1(d){for(var b=d.display.view,c=0,f=0;f<b.length;f++){var a=b[f];a.hidden||a.node&&!a.changes||++c}return c}function dg(g){function c(){b.activeTouch&&(h=setTimeout(function(){b.activeTouch=null},1000),a=b.activeTouch,a.end=+new Date)}function f(k){if(1!=k.touches.length){return !1}var i=k.touches[0];return i.radiusX<=1&&i.radiusY<=1}function j(l,i){if(null==i.left){return !0}var k=i.left-l.left,m=i.top-l.top;return k*k+m*m>400}var b=g.display;cK(b.scroller,"mousedown",bQ(g,b5)),gY&&11>aE?cK(b.scroller,"dblclick",bQ(g,function(e){if(!d5(g,e)){var i=cm(g,e);if(i&&!ej(g,e)&&!ec(g.display,e)){d2(e);var k=g.findWordAt(i);aI(g.doc,k.anchor,k.head)}}})):cK(b.scroller,"dblclick",function(e){d5(g,e)||d2(e)}),eG||cK(b.scroller,"contextmenu",function(e){hV(g,e)});var h,a={end:0};cK(b.scroller,"touchstart",function(e){if(!d5(g,e)&&!f(e)){clearTimeout(h);var i=+new Date;b.activeTouch={start:i,moved:!1,prev:i-a.end<=300?a:null},1==e.touches.length&&(b.activeTouch.left=e.touches[0].pageX,b.activeTouch.top=e.touches[0].pageY)}}),cK(b.scroller,"touchmove",function(){b.activeTouch&&(b.activeTouch.moved=!0)}),cK(b.scroller,"touchend",function(k){var m=b.activeTouch;if(m&&!ec(b,k)&&null!=m.left&&!m.moved&&new Date-m.start<300){var e,i=g.coordsChar(b.activeTouch,"page");e=!m.prev||j(m,m.prev)?new eW(i,i):!m.prev.prev||j(m,m.prev.prev)?g.findWordAt(i):new eW(hA(i.line,0),fa(g.doc,hA(i.line+1,0))),g.setSelection(e.anchor,e.head),g.focus(),d2(k)}c()}),cK(b.scroller,"touchcancel",c),cK(b.scroller,"scroll",function(){b.scroller.clientHeight&&(c9(g,b.scroller.scrollTop),eA(g,b.scroller.scrollLeft,!0),a1(g,"scroll",g))}),cK(b.scroller,"mousewheel",function(e){cP(g,e)}),cK(b.scroller,"DOMMouseScroll",function(e){cP(g,e)}),cK(b.wrapper,"scroll",function(){b.wrapper.scrollTop=b.wrapper.scrollLeft=0}),b.dragFunctions={enter:function(e){d5(g,e)||fb(e)},over:function(e){d5(g,e)||(bp(g,e),fb(e))},start:function(e){fB(g,e)},drop:bQ(g,gp),leave:function(e){d5(g,e)||b1(g)}};var d=b.input.getField();cK(d,"keyup",function(e){fP.call(g,e)}),cK(d,"keydown",bQ(g,eN)),cK(d,"keypress",bQ(g,cA)),cK(d,"focus",aA(aR,g)),cK(d,"blur",aA(dw,g))}function cT(c,d,f){var b=f&&f!=gF.Init;if(!d!=!b){var e=c.display.dragFunctions,a=d?cK:eX;a(c.display.scroller,"dragstart",e.start),a(c.display.scroller,"dragenter",e.enter),a(c.display.scroller,"dragover",e.over),a(c.display.scroller,"dragleave",e.leave),a(c.display.scroller,"drop",e.drop)}}function fS(b){var a=b.display;(a.lastWrapHeight!=a.wrapper.clientHeight||a.lastWrapWidth!=a.wrapper.clientWidth)&&(a.cachedCharWidth=a.cachedTextHeight=a.cachedPaddingH=null,a.scrollbarsClipped=!1,b.setSize())}function ec(c,a){for(var b=ah(a);b!=c.wrapper;b=b.parentNode){if(!b||1==b.nodeType&&"true"==b.getAttribute("cm-ignore-events")||b.parentNode==c.sizer&&b!=c.mover){return !0}}}function cm(j,q,b,f){var h=j.display;if(!b&&"true"==ah(q).getAttribute("cm-not-content")){return null}var d,g,v=h.lineSpace.getBoundingClientRect();try{d=q.clientX-v.left,g=q.clientY-v.top}catch(q){return null}var m,p=aQ(j,d,g);if(f&&1==p.xRel&&(m=bN(j.doc,p.line).text).length==p.ch){var k=d9(m,m.length,j.options.tabSize)-m.length;p=hA(p.line,Math.max(0,Math.round((d-eu(j.display).left)/gS(j.display))-k))}return p}function b5(c){var a=this,b=a.display;if(!(d5(a,c)||b.activeTouch&&b.input.supportsTouch())){if(b.shift=c.shiftKey,ec(b,c)){return void (ab||(b.scroller.draggable=!1,setTimeout(function(){b.scroller.draggable=!0},100)))}if(!ej(a,c)){var d=cm(a,c);switch(window.focus(),bh(c)){case 1:a.state.selectingText?a.state.selectingText(c):d?af(a,c,d):ah(c)==b.scroller&&d2(c);break;case 2:ab&&(a.state.lastMiddleDown=+new Date),d&&aI(a.doc,d),setTimeout(function(){b.input.focus()},20),d2(c);break;case 3:eG?hV(a,c):e1(a)}}}}function af(g,c,f){gY?setTimeout(aA(gc,g),0):g.curOp.focus=em();var j,b=+new Date;dk&&dk.time>b-400&&0==aw(dk.pos,f)?j="triple":h3&&h3.time>b-400&&0==aw(h3.pos,f)?(j="double",dk={time:b,pos:f}):(j="single",h3={time:b,pos:f});var h,a=g.doc.sel,d=bT?c.metaKey:c.ctrlKey;g.options.dragDrop&&gE&&!g.isReadOnly()&&"single"==j&&(h=a.contains(f))>-1&&(aw((h=a.ranges[h]).from(),f)<0||f.xRel>0)&&(aw(h.to(),f)>0||f.xRel<0)?c2(g,c,f,d):cf(g,c,f,j,d)}function c2(f,c,d,h){var b=f.display,g=+new Date,a=bQ(f,function(e){ab&&(b.scroller.draggable=!1),f.state.draggingText=!1,eX(document,"mouseup",a),eX(b.scroller,"drop",a),Math.abs(c.clientX-e.clientX)+Math.abs(c.clientY-e.clientY)<10&&(d2(e),!h&&+new Date-200<g&&aI(f.doc,d),ab||gY&&9==aE?setTimeout(function(){document.body.focus(),b.input.focus()},20):b.input.focus())});ab&&(b.scroller.draggable=!0),f.state.draggingText=a,b.scroller.dragDrop&&b.scroller.dragDrop(),cK(document,"mouseup",a),cK(b.scroller,"drop",a)}function cf(L,z,B,E,H){function D(V){if(0!=aw(q,V)){if(q=V,"rect"==E){for(var r=[],f=L.options.tabSize,n=d9(bN(w,B.line).text,B.ch,f),W=d9(bN(w,V.line).text,V.ch,f),T=Math.min(n,W),v=Math.max(n,W),e=Math.min(B.line,V.line),u=Math.min(L.lastLine(),Math.max(B.line,V.line));u>=e;e++){var h=bN(w,e).text,R=bB(h,T,f);T==v?r.push(new eW(hA(e,R),hA(e,R))):h.length>R&&r.push(new eW(hA(e,R),hA(e,bB(h,v,f))))}r.length||r.push(new eW(B,B)),d8(w,fv(K.ranges.slice(0,I).concat(r),I),{origin:"*mouse",scroll:!1}),L.scrollIntoView(V)}else{var Q=N,U=Q.anchor,S=V;if("single"!=E){if("double"==E){var c=L.findWordAt(V)}else{var c=new eW(hA(V.line,0),fa(w,hA(V.line+1,0)))}aw(c.anchor,U)>0?(S=c.head,U=hS(Q.from(),c.anchor)):(S=c.anchor,U=gL(Q.to(),c.head))}var r=K.ranges.slice(0);r[I]=new eW(fa(w,U),S),d8(w,fv(r,I),hC)}}}function G(b){var e=++j,a=cm(L,b,!0,"rect"==E);if(a){if(0!=aw(a,q)){L.curOp.focus=em(),D(a);var d=f4(P,w);(a.line>=d.to||a.line<d.from)&&setTimeout(bQ(L,function(){j==e&&G(b)}),150)}else{var f=b.clientY<F.top?-20:b.clientY>F.bottom?20:0;f&&setTimeout(bQ(L,function(){j==e&&(P.scroller.scrollTop+=f,G(b))}),50)}}}function A(a){L.state.selectingText=!1,j=1/0,d2(a),P.input.focus(),eX(document,"mousemove",O),eX(document,"mouseup",k),w.history.lastSelOrigin=null}var P=L.display,w=L.doc;d2(z);var N,I,K=w.sel,M=K.ranges;if(H&&!z.shiftKey?(I=w.sel.contains(B),N=I>-1?M[I]:new eW(B,B)):(N=w.sel.primary(),I=w.sel.primIndex),z.altKey){E="rect",H||(N=new eW(B,B)),B=cm(L,z,!0,!0),I=-1}else{if("double"==E){var C=L.findWordAt(B);N=L.display.shift||w.extend?hj(w,N,C.anchor,C.head):C}else{if("triple"==E){var J=new eW(hA(B.line,0),fa(w,hA(B.line+1,0)));N=L.display.shift||w.extend?hj(w,N,J.anchor,J.head):J}else{N=hj(w,N,B)}}}H?-1==I?(I=M.length,d8(w,fv(M.concat([N]),I),{scroll:!1,origin:"*mouse"})):M.length>1&&M[I].empty()&&"single"==E&&!z.shiftKey?(d8(w,fv(M.slice(0,I).concat(M.slice(I+1)),0),{scroll:!1,origin:"*mouse"}),K=w.sel):bj(w,I,N,hC):(I=0,d8(w,new gD([N],0),hC),K=w.sel);var q=B,F=P.wrapper.getBoundingClientRect(),j=0,O=bQ(L,function(a){bh(a)?G(a):A(a)}),k=bQ(L,A);L.state.selectingText=k,cK(document,"mousemove",O),cK(document,"mouseup",k)}function bJ(m,w,b,f){try{var j=w.clientX,d=w.clientY}catch(w){return !1}if(j>=Math.floor(m.display.gutters.getBoundingClientRect().right)){return !1}f&&d2(w);var g=m.display,x=g.lineDiv.getBoundingClientRect();if(d>x.bottom||!fc(m,b)){return aH(w)}d-=x.top-g.viewOffset;for(var q=0;q<m.options.gutters.length;++q){var v=g.gutters.childNodes[q];if(v&&v.getBoundingClientRect().right>=j){var p=b7(m.doc,d),k=m.options.gutters[q];return a1(m,b,m,p,k,w),aH(w)}}}function ej(b,a){return bJ(b,a,"gutterClick",!0)}function gp(h){var m=this;if(b1(m),!d5(m,h)&&!ec(m.display,h)){d2(h),gY&&(cs=+new Date);var b=cm(m,h,!0),d=h.dataTransfer.files;if(b&&!m.isReadOnly()){if(d&&d.length&&window.FileReader&&window.File){for(var g=d.length,c=Array(g),f=0,p=function(i,l){if(!m.options.allowDropFileTypes||-1!=hR(m.options.allowDropFileTypes,i.type)){var a=new FileReader;a.onload=bQ(m,function(){var o=a.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(o)&&(o=""),c[l]=o,++f==g){b=fa(m.doc,b);var n={from:b,to:b,text:m.doc.splitLines(c.join(m.doc.lineSeparator())),origin:"paste"};dB(m.doc,n),dI(m.doc,fX(b,ep(n)))}}),a.readAsText(i)}},j=0;g>j;++j){p(d[j],j)}}else{if(m.state.draggingText&&m.doc.sel.contains(b)>-1){return m.state.draggingText(h),void setTimeout(function(){m.display.input.focus()},20)}try{var c=h.dataTransfer.getData("Text");if(c){if(m.state.draggingText&&!(bT?h.altKey:h.ctrlKey)){var k=m.listSelections()}if(fy(m.doc,fX(b,b)),k){for(var j=0;j<k.length;++j){eS(m.doc,"",k[j].anchor,k[j].head,"drag")}}m.replaceSelection(c,"around","paste"),m.display.input.focus()}}catch(h){}}}}}function fB(c,a){if(gY&&(!c.state.draggingText||+new Date-cs<100)){return void fb(a)}if(!d5(c,a)&&!ec(c.display,a)&&(a.dataTransfer.setData("Text",c.getSelection()),a.dataTransfer.setDragImage&&!dD)){var b=ds("img",null,null,"position: fixed; left: 0; top: 0;");b.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",fI&&(b.width=b.height=1,c.display.wrapper.appendChild(b),b._top=b.offsetTop),a.dataTransfer.setDragImage(b,0,0),fI&&b.parentNode.removeChild(b)}}function bp(c,a){var b=cm(c,a);if(b){var d=document.createDocumentFragment();hx(c,b,d),c.display.dragCursor||(c.display.dragCursor=ds("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),c.display.lineSpace.insertBefore(c.display.dragCursor,c.display.cursorDiv)),fZ(c.display.dragCursor,d)}}function b1(a){a.display.dragCursor&&(a.display.lineSpace.removeChild(a.display.dragCursor),a.display.dragCursor=null)}function c9(b,a){Math.abs(b.doc.scrollTop-a)<2||(b.doc.scrollTop=a,aS||gQ(b,{top:a}),b.display.scroller.scrollTop!=a&&(b.display.scroller.scrollTop=a),b.display.scrollbars.setScrollTop(a),aS&&gQ(b),eb(b,100))}function eA(c,a,b){(b?a==c.doc.scrollLeft:Math.abs(c.doc.scrollLeft-a)<2)||(a=Math.min(a,c.display.scroller.scrollWidth-c.display.scroller.clientWidth),c.doc.scrollLeft=a,f3(c),c.display.scroller.scrollLeft!=a&&(c.display.scroller.scrollLeft=a),c.display.scrollbars.setScrollLeft(a))}function cP(x,C){var b=c4(C),k=b.x,q=b.y,j=x.display,m=j.scroller,D=m.scrollWidth>m.clientWidth,A=m.scrollHeight>m.clientHeight;if(k&&D||q&&A){if(q&&bT&&ab){x:for(var B=C.target,z=j.view;B!=m;B=B.parentNode){for(var v=0;v<z.length;v++){if(z[v].node==B){x.display.currentWheelTarget=B;break x}}}}if(k&&!aS&&!fI&&null!=aj){return q&&A&&c9(x,Math.max(0,Math.min(m.scrollTop+q*aj,m.scrollHeight-m.clientHeight))),eA(x,Math.max(0,Math.min(m.scrollLeft+k*aj,m.scrollWidth-m.clientWidth))),(!q||q&&A)&&d2(C),void (j.wheelStartX=null)}if(q&&null!=aj){var w=q*aj,y=x.doc.scrollTop,g=y+j.wrapper.clientHeight;0>w?y=Math.max(0,y+w-50):g=Math.min(x.doc.height,g+w+50),gQ(x,{top:y,bottom:g})}20>b8&&(null==j.wheelStartX?(j.wheelStartX=m.scrollLeft,j.wheelStartY=m.scrollTop,j.wheelDX=k,j.wheelDY=q,setTimeout(function(){if(null!=j.wheelStartX){var d=m.scrollLeft-j.wheelStartX,a=m.scrollTop-j.wheelStartY,c=a&&j.wheelDY&&a/j.wheelDY||d&&j.wheelDX&&d/j.wheelDX;j.wheelStartX=j.wheelStartY=null,c&&(aj=(aj*b8+c)/(b8+1),++b8)}},200)):(j.wheelDX+=k,j.wheelDY+=q))}}function dL(d,b,c){if("string"==typeof b&&(b=a8[b],!b)){return !1}d.display.input.ensurePolled();var f=d.display.shift,a=!1;try{d.isReadOnly()&&(d.state.suppressEdits=!0),c&&(d.display.shift=!1),a=b(d)!=aN}finally{d.display.shift=f,d.state.suppressEdits=!1}return a}function bF(d,b,c){for(var f=0;f<d.state.keyMaps.length;f++){var a=eQ(b,d.state.keyMaps[f],c,d);if(a){return a}}return d.options.extraKeys&&eQ(b,d.options.extraKeys,c,d)||eQ(b,d.options.keyMap,c,d)}function hE(d,b,c,g){var a=d.state.keySeq;if(a){if(fk(b)){return"handled"}ch.set(50,function(){d.state.keySeq==a&&(d.state.keySeq=null,d.display.input.reset())}),b=a+" "+b}var f=bF(d,b,g);return"multi"==f&&(d.state.keySeq=b),"handled"==f&&fM(d,"keyHandled",d,b,c),("handled"==f||"multi"==f)&&(d2(c),aB(d)),a&&!f&&/\'$/.test(b)?(d2(c),!0):!!f}function a5(c,a){var b=fR(a,!0);return b?a.shiftKey&&!c.state.keySeq?hE(c,"Shift-"+b,a,function(d){return dL(c,d,!0)})||hE(c,b,a,function(d){return("string"==typeof d?/^go[A-Z]/.test(d):d.motion)?dL(c,d):void 0}):hE(c,b,a,function(d){return dL(c,d)}):!1}function ga(c,a,b){return hE(c,"'"+b+"'",a,function(d){return dL(c,d,!0)})}function eN(c){var a=this;if(a.curOp.focus=em(),!d5(a,c)){gY&&11>aE&&27==c.keyCode&&(c.returnValue=!1);var b=c.keyCode;a.display.shift=16==b||c.shiftKey;var d=a5(a,c);fI&&(bM=d?b:null,!d&&88==b&&!b0&&(bT?c.metaKey:c.ctrlKey)&&a.replaceSelection("",null,"cut")),18!=b||/\bCodeMirror-crosshair\b/.test(a.display.lineDiv.className)||fg(a)}}function fg(c){function a(d){18!=d.keyCode&&d.altKey||(ck(b,"CodeMirror-crosshair"),eX(document,"keyup",a),eX(document,"mouseover",a))}var b=c.display.lineDiv;bP(b,"CodeMirror-crosshair"),cK(document,"keyup",a),cK(document,"mouseover",a)}function fP(a){16==a.keyCode&&(this.doc.sel.shift=!1),d5(this,a)}function cA(d){var b=this;if(!(ec(b.display,d)||d5(b,d)||d.ctrlKey&&!d.altKey||bT&&d.metaKey)){var c=d.keyCode,f=d.charCode;if(fI&&c==bM){return bM=null,void d2(d)}if(!fI||d.which&&!(d.which<10)||!a5(b,d)){var a=String.fromCharCode(null==f?c:f);ga(b,d,a)||b.display.input.onKeyPress(d)}}}function e1(a){a.state.delayingBlurEvent=!0,setTimeout(function(){a.state.delayingBlurEvent&&(a.state.delayingBlurEvent=!1,dw(a))},100)}function aR(a){a.state.delayingBlurEvent&&(a.state.delayingBlurEvent=!1),"nocursor"!=a.options.readOnly&&(a.state.focused||(a1(a,"focus",a),a.state.focused=!0,bP(a.display.wrapper,"CodeMirror-focused"),a.curOp||a.display.selForContextMenu==a.doc.sel||(a.display.input.reset(),ab&&setTimeout(function(){a.display.input.reset(!0)},20)),a.display.input.receivedFocus()),aB(a))}function dw(a){a.state.delayingBlurEvent||(a.state.focused&&(a1(a,"blur",a),a.state.focused=!1,ck(a.display.wrapper,"CodeMirror-focused")),clearInterval(a.display.blinker),setTimeout(function(){a.state.focused||(a.display.shift=!1)},150))}function hV(b,a){ec(b.display,a)||gV(b,a)||d5(b,a,"contextmenu")||b.display.input.onContextMenu(a)}function gV(b,a){return fc(b,"gutterContextMenu")?bJ(b,a,"gutterContextMenu",!1):!1}function aD(c,a){if(aw(c,a.from)<0){return c}if(aw(c,a.to)<=0){return ep(a)}var b=c.line+a.text.length-(a.to.line-a.from.line)-1,d=c.ch;return c.line==a.to.line&&(d+=ep(a).ch-a.to.ch),hA(b,d)}function aa(d,b){for(var c=[],f=0;f<d.sel.ranges.length;f++){var a=d.sel.ranges[f];c.push(new eW(aD(a.anchor,b),aD(a.head,b)))}return fv(c,d.sel.primIndex)}function bc(c,a,b){return c.line==a.line?hA(b.line,c.ch-a.ch+b.ch):hA(b.line+(c.line-a.line),c.ch)}function dQ(m,w,b){for(var f=[],j=hA(m.first,0),d=j,g=0;g<w.length;g++){var x=w[g],q=bc(x.from,j,d),v=bc(ep(x),j,d);if(j=x.to,d=v,"around"==b){var p=m.sel.ranges[g],k=aw(p.head,p.anchor)<0;f[g]=new eW(k?v:q,k?q:v)}else{f[g]=new eW(q,q)}}return new gD(f,m.sel.primIndex)}function fG(c,a,b){var d={canceled:!1,from:a.from,to:a.to,text:a.text,origin:a.origin,cancel:function(){this.canceled=!0}};return b&&(d.update=function(f,g,h,e){f&&(this.from=fa(c,f)),g&&(this.to=fa(c,g)),h&&(this.text=h),void 0!==e&&(this.origin=e)}),a1(c,"beforeChange",c,d),c.cm&&a1(c.cm,"beforeChange",c.cm,d),d.canceled?null:{from:d.from,to:d.to,text:d.text,origin:d.origin}}function dB(d,b,c){if(d.cm){if(!d.cm.curOp){return bQ(d.cm,dB)(d,b,c)}if(d.cm.state.suppressEdits){return}}if(!(fc(d,"beforeChange")||d.cm&&fc(d.cm,"beforeChange"))||(b=fG(d,b,!0))){var f=aL&&!c&&hH(d,b.from,b.to);if(f){for(var a=f.length-1;a>=0;--a){dZ(d,{from:f[a].from,to:f[a].to,text:a?[""]:b.text})}}else{dZ(d,b)}}}function dZ(c,a){if(1!=a.text.length||""!=a.text[0]||0!=aw(a.from,a.to)){var b=aa(c,a);a9(c,a,b,c.cm?c.cm.curOp.id:NaN),cF(c,a,b,cR(c,a));var d=[];c5(c,function(g,f){f||-1!=hR(d,g.history)||(g9(g.history,a),d.push(g.history)),cF(g,a,null,cR(g,a))})}}function fp(v,A,b){if(!v.cm||!v.cm.state.suppressEdits){for(var j,m=v.history,g=v.sel,k="undo"==A?m.done:m.undone,B="undo"==A?m.undone:m.done,y=0;y<k.length&&(j=k[y],b?!j.ranges||j.equals(v.sel):j.ranges);y++){}if(y!=k.length){for(m.lastOrigin=m.lastSelOrigin=null;j=k.pop(),j.ranges;){if(fq(j,B),b&&!j.equals(v.sel)){return void d8(v,j,{clearRedo:!1})}g=j}var z=[];fq(g,B),B.push({changes:z,generation:m.generation}),m.generation=j.generation||++m.maxGeneration;for(var x=fc(v,"beforeChange")||v.cm&&fc(v.cm,"beforeChange"),y=j.changes.length-1;y>=0;--y){var p=j.changes[y];if(p.origin=A,x&&!fG(v,p,!1)){return void (k.length=0)}z.push(dR(v,p));var q=y?aa(v,p):a2(k);cF(v,p,q,bH(v,p)),!y&&v.cm&&v.cm.scrollIntoView({from:p.from,to:ep(p)});var w=[];c5(v,function(c,a){a||-1!=hR(w,c.history)||(g9(c.history,p),w.push(c.history)),cF(c,p,null,bH(c,p))})}}}}function e6(c,a){if(0!=a&&(c.first+=a,c.sel=new gD(eK(c.sel.ranges,function(f){return new eW(hA(f.anchor.line+a,f.anchor.ch),hA(f.head.line+a,f.head.ch))}),c.sel.primIndex),c.cm)){aJ(c.cm,c.first,c.first-a,a);for(var b=c.cm.display,d=b.viewFrom;d<b.viewTo;d++){g5(c.cm,d,"gutter")}}}function cF(d,b,c,g){if(d.cm&&!d.cm.curOp){return bQ(d.cm,cF)(d,b,c,g)}if(b.to.line<d.first){return void e6(d,b.text.length-1-(b.to.line-b.from.line))}if(!(b.from.line>d.lastLine())){if(b.from.line<d.first){var a=b.text.length-1-(d.first-b.from.line);e6(d,a),b={from:hA(d.first,0),to:hA(b.to.line+a,b.to.ch),text:[a2(b.text)],origin:b.origin}}var f=d.lastLine();b.to.line>f&&(b={from:b.from,to:hA(f,bN(d,f).text.length),text:[b.text[0]],origin:b.origin}),b.removed=eq(d,b.from,b.to),c||(c=aa(d,b)),d.cm?bR(d.cm,b,g):cu(d,b,g),fy(d,c,hk)}}function bR(o,y,b){var h=o.doc,k=o.display,j=y.from,z=y.to,w=!1,x=j.line;o.options.lineWrapping||(x=bv(hX(bN(h,j.line))),h.iter(x,z.line+1,function(a){return a==k.maxLine?(w=!0,!0):void 0})),h.sel.contains(y.from,y.to)>-1&&fx(o),cu(h,y,b,gg(o)),o.options.lineWrapping||(h.iter(x,j.line+y.text.length,function(c){var a=gz(c);a>k.maxLineLength&&(k.maxLine=c,k.maxLineLength=a,k.maxLineChanged=!0,w=!1)}),w&&(o.curOp.updateMaxLine=!0)),h.frontier=Math.min(h.frontier,j.line),eb(o,400);var v=y.text.length-(z.line-j.line)-1;y.full?aJ(o):j.line!=z.line||1!=y.text.length||eg(o.doc,y)?aJ(o,j.line,z.line+1,v):g5(o,j.line,"text");var m=fc(o,"changes"),q=fc(o,"change");if(q||m){var g={from:j,to:z,text:y.text,removed:y.removed,origin:y.origin};q&&fM(o,"change",o,g),m&&(o.curOp.changeObjs||(o.curOp.changeObjs=[])).push(g)}o.display.selForContextMenu=null}function eS(d,b,c,g,a){if(g||(g=c),aw(g,c)<0){var f=g;g=c,c=f}"string"==typeof b&&(b=d.splitLines(b)),dB(d,{from:c,to:g,text:b,origin:a})}function aY(d,b){if(!d5(d,"scrollCursorIntoView")){var c=d.display,g=c.sizer.getBoundingClientRect(),a=null;if(b.top+g.top<0?a=!0:b.bottom+g.top>(window.innerHeight||document.documentElement.clientHeight)&&(a=!1),null!=a&&!fs){var f=ds("div","",null,"position: absolute; top: "+(b.top-c.viewOffset-c1(d.display))+"px; height: "+(b.bottom-b.top+cy(d)+c.barHeight)+"px; left: "+b.left+"px; width: 2px;");d.display.lineSpace.appendChild(f),f.scrollIntoView(a),d.display.lineSpace.removeChild(f)}}}function hL(j,q,b,f){null==f&&(f=0);for(var h=0;5>h;h++){var d=!1,g=fO(j,q),v=b&&b!=q?fO(j,b):g,m=aK(j,Math.min(g.left,v.left),Math.min(g.top,v.top)-f,Math.max(g.left,v.left),Math.max(g.bottom,v.bottom)+f),p=j.doc.scrollTop,k=j.doc.scrollLeft;if(null!=m.scrollTop&&(c9(j,m.scrollTop),Math.abs(j.doc.scrollTop-p)>1&&(d=!0)),null!=m.scrollLeft&&(eA(j,m.scrollLeft),Math.abs(j.doc.scrollLeft-k)>1&&(d=!0)),!d){break}}return g}function eE(d,b,c,g,a){var f=aK(d,b,c,g,a);null!=f.scrollTop&&c9(d,f.scrollTop),null!=f.scrollLeft&&eA(d,f.scrollLeft)}function aK(A,G,b,m,w){var k=A.display,q=hU(A.display);0>b&&(b=0);var H=A.curOp&&null!=A.curOp.scrollTop?A.curOp.scrollTop:k.scroller.scrollTop,D=ay(A),F={};w-b>D&&(w=b+D);var C=A.doc.height+f0(k),x=q>b,z=w>C-q;if(H>b){F.scrollTop=x?0:b}else{if(w>H+D){var B=Math.min(b,(z?C:w)-D);B!=H&&(F.scrollTop=B)}}var j=A.curOp&&null!=A.curOp.scrollLeft?A.curOp.scrollLeft:k.scroller.scrollLeft,y=cd(A)-(A.options.fixedGutter?k.gutters.offsetWidth:0),E=m-G>y;return E&&(m=G+y),10>G?F.scrollLeft=0:j>G?F.scrollLeft=Math.max(0,G-(E?0:10)):m>y+j-3&&(F.scrollLeft=m+(E?0:10)-y),F}function g8(c,a,b){(null!=a||null!=b)&&au(c),null!=a&&(c.curOp.scrollLeft=(null==c.curOp.scrollLeft?c.doc.scrollLeft:c.curOp.scrollLeft)+a),null!=b&&(c.curOp.scrollTop=(null==c.curOp.scrollTop?c.doc.scrollTop:c.curOp.scrollTop)+b)}function hz(c){au(c);var a=c.getCursor(),b=a,d=a;c.options.lineWrapping||(b=a.ch?hA(a.line,a.ch-1):a,d=hA(a.line,a.ch+1)),c.curOp.scrollToPos={from:b,to:d,margin:c.options.cursorScrollMargin,isCursor:!0}}function au(d){var b=d.curOp.scrollToPos;if(b){d.curOp.scrollToPos=null;var c=cz(d,b.from),f=cz(d,b.to),a=aK(d,Math.min(c.left,f.left),Math.min(c.top,f.top)-b.margin,Math.max(c.right,f.right),Math.max(c.bottom,f.bottom)+b.margin);d.scrollTo(a.scrollLeft,a.scrollTop)}}function d4(x,C,b,k){var q,j=x.doc;null==b&&(b="add"),"smart"==b&&(j.mode.indent?q=du(x,C):b="prev");var m=x.options.tabSize,D=bN(j,C),A=d9(D.text,null,m);D.stateAfter&&(D.stateAfter=null);var B,z=D.text.match(/^\s*/)[0];if(k||/\S/.test(D.text)){if("smart"==b&&(B=j.mode.indent(q,D.text.slice(z.length),D.text),B==aN||B>150)){if(!k){return}b="prev"}}else{B=0,b="not"}"prev"==b?B=C>j.first?d9(bN(j,C-1).text,null,m):0:"add"==b?B=A+x.options.indentUnit:"subtract"==b?B=A-x.options.indentUnit:"number"==typeof b&&(B=A+b),B=Math.max(0,B);var v="",w=0;if(x.options.indentWithTabs){for(var y=Math.floor(B/m);y;--y){w+=m,v+="	"}}if(B>w&&(v+=eY(B-w)),v!=z){return eS(j,v,hA(C,0),hA(C,z.length),"+input"),D.stateAfter=null,!0}for(var y=0;y<j.sel.ranges.length;y++){var g=j.sel.ranges[y];if(g.head.line==C&&g.head.ch<z.length){var w=hA(C,z.length);bj(j,y,new eW(w,w));break}}}function by(d,b,c,g){var a=b,f=b;return"number"==typeof b?f=bN(d,cJ(d,b)):a=bv(b),null==a?null:(g(f,a)&&d.cm&&g5(d.cm,a,c),f)}function h2(f,c){for(var d=f.doc.sel.ranges,h=[],b=0;b<d.length;b++){for(var g=c(d[b]);h.length&&aw(g.from,a2(h).to)<=0;){var a=h.pop();if(aw(a.from,g.from)<0){g.from=a.from;break}}h.push(g)}cE(f,function(){for(var e=h.length-1;e>=0;e--){eS(f.doc,"",h[e].from,h[e].to,"+delete")}hz(f)})}function dh(G,k,w,z,C){function y(){var a=q+w;return a<G.first||a>=G.first+G.size?!1:(q=a,I=bN(G,a))}function B(c){var a=(C?eO:fh)(I,J,w,!0);if(null==a){if(c||!y()){return !1}J=C?(0>w?eB:db)(I):0>w?I.text.length:0}else{J=a}return !0}var q=k.line,J=k.ch,j=w,I=bN(G,q);if("char"==z){B()}else{if("column"==z){B(!0)}else{if("word"==z||"group"==z){for(var D=null,F="group"==z,H=G.cm&&G.cm.getHelper(k,"wordChars"),x=!0;!(0>w)||B(!x);x=!1){var E=I.text.charAt(J)||"\n",b=ea(E,H)?"w":F&&"\n"==E?"n":!F||/\s/.test(E)?null:"p";if(!F||x||b||(b="s"),D&&D!=b){0>w&&(w=1,B());break}if(b&&(D=b),w>0&&!B(!x)){break}}}}}var A=a3(G,hA(q,J),k,j,!0);return aw(k,A)||(A.hitSide=!0),A}function cU(h,k,b,d){var g,c=h.doc,f=k.left;if("page"==d){var m=Math.min(h.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);g=k.top+b*(m-(0>b?1.5:0.5)*hU(h.display))}else{"line"==d&&(g=b>0?k.bottom+3:k.top-3)}for(;;){var j=aQ(h,f,g);if(!j.outside){break}if(0>b?0>=g:g>=c.height){j.hitSide=!0;break}g+=5*b}return j}function fT(b,c,d,a){gF.defaults[b]=c,d&&(fE[b]=a?function(h,f,g){g!=bu&&d(h,f,g)}:d)}function ed(g){for(var c,f,j,b,h=g.split(/-(?!$)/),g=h[h.length-1],a=0;a<h.length-1;a++){var d=h[a];if(/^(cmd|meta|m)$/i.test(d)){b=!0}else{if(/^a(lt)?$/i.test(d)){c=!0}else{if(/^(c|ctrl|control)$/i.test(d)){f=!0}else{if(!/^s(hift)$/i.test(d)){throw new Error("Unrecognized modifier name: "+d)}j=!0}}}}return c&&(g="Alt-"+g),f&&(g="Ctrl-"+g),b&&(g="Cmd-"+g),j&&(g="Shift-"+g),g}function cp(a){return"string"==typeof a?gk[a]:a}function b6(j,q,b,f,h){if(f&&f.shared){return ag(j,q,b,f,h)}if(j.cm&&!j.cm.curOp){return bQ(j.cm,b6)(j,q,b,f,h)}var d=new aU(j,h),g=aw(q,b);if(f&&hF(f,d,!1),g>0||0==g&&d.clearWhenEmpty!==!1){return d}if(d.replacedWith&&(d.collapsed=!0,d.widgetNode=ds("span",[d.replacedWith],"CodeMirror-widget"),f.handleMouseEvents||d.widgetNode.setAttribute("cm-ignore-events","true"),f.insertLeft&&(d.widgetNode.insertLeft=!0)),d.collapsed){if(dy(j,q.line,q,b,d)||q.line!=b.line&&dy(j,b.line,q,b,d)){throw new Error("Inserting collapsed marker partially overlapping an existing one")}hc=!0}d.addToHistory&&a9(j,{from:q,to:b,origin:"markText"},j.sel,NaN);var v,m=q.line,p=j.cm;if(j.iter(m,b.line+1,function(a){p&&d.collapsed&&!p.options.lineWrapping&&hX(a)==p.display.maxLine&&(v=!0),d.collapsed&&m!=q.line&&fH(a,0),bs(a,new ek(d,m==q.line?q.ch:null,m==b.line?b.ch:null)),++m}),d.collapsed&&j.iter(q.line,b.line+1,function(a){bf(j,a)&&fH(a,0)}),d.clearOnEnter&&cK(d,"beforeCursorEnter",function(){d.clear()}),d.readOnly&&(aL=!0,(j.history.done.length||j.history.undone.length)&&j.clearHistory()),d.collapsed&&(d.id=++e4,d.atomic=!0),p){if(v&&(p.curOp.updateMaxLine=!0),d.collapsed){aJ(p,q.line,b.line+1)}else{if(d.className||d.title||d.startStyle||d.endStyle||d.css){for(var k=q.line;k<=b.line;k++){g5(p,k,"text")}}}d.atomic&&cM(p.doc),fM(p,"markerAdded",p,d)}return d}function ag(g,c,f,j,b){j=hF(j),j.shared=!1;var h=[b6(g,c,f,j,b)],a=h[0],d=j.widgetNode;return c5(g,function(k){d&&(j.widgetNode=d.cloneNode(!0)),h.push(b6(k,fa(k,c),fa(k,f),j,b));for(var i=0;i<k.linked.length;++i){if(k.linked[i].isParent){return}}a=a2(h)}),new dz(h,a)}function c3(a){return a.findMarks(hA(a.first,0),a.clipPos(hA(a.lastLine())),function(b){return b.parent})}function cg(g,c){for(var f=0;f<c.length;f++){var j=c[f],b=j.find(),h=g.clipPos(b.from),a=g.clipPos(b.to);if(aw(h,a)){var d=b6(g,h,a,j.primary,j.primary.type);j.markers.push(d),d.parent=j}}}function bK(d){for(var b=0;b<d.length;b++){var c=d[b],g=[c.primary.doc];c5(c.primary.doc,function(h){g.push(h)});for(var a=0;a<c.markers.length;a++){var f=c.markers[a];-1==hR(g,f.doc)&&(f.parent=null,c.markers.splice(a--,1))}}}function ek(c,a,b){this.marker=c,this.from=a,this.to=b}function gu(c,a){if(c){for(var b=0;b<c.length;++b){var d=c[b];if(d.marker==a){return d}}}}function fD(c,a){for(var b,d=0;d<c.length;++d){c[d]!=a&&(b||(b=[])).push(c[d])}return b}function bs(b,a){b.markedSpans=b.markedSpans?b.markedSpans.concat([a]):[a],a.marker.attachLine(b)}function b3(h,k,b){if(h){for(var d,g=0;g<h.length;++g){var c=h[g],f=c.marker,m=null==c.from||(f.inclusiveLeft?c.from<=k:c.from<k);if(m||c.from==k&&"bookmark"==f.type&&(!b||!c.marker.insertLeft)){var j=null==c.to||(f.inclusiveRight?c.to>=k:c.to>k);(d||(d=[])).push(new ek(f,c.from,j?null:c.to))}}}return d}function dc(h,k,b){if(h){for(var d,g=0;g<h.length;++g){var c=h[g],f=c.marker,m=null==c.to||(f.inclusiveRight?c.to>=k:c.to>k);if(m||c.from==k&&"bookmark"==f.type&&(!b||c.marker.insertLeft)){var j=null==c.from||(f.inclusiveLeft?c.from<=k:c.from<k);(d||(d=[])).push(new ek(f,j?null:c.from-k,null==c.to?null:c.to-k))}}}return d}function cR(A,G){if(G.full){return null}var b=dF(A,G.from.line)&&bN(A,G.from.line).markedSpans,m=dF(A,G.to.line)&&bN(A,G.to.line).markedSpans;if(!b&&!m){return null}var w=G.from.ch,k=G.to.ch,q=0==aw(G.from,G.to),H=b3(b,w,q),D=dc(m,k,q),F=1==G.text.length,C=a2(G.text).length+(F?w:0);if(H){for(var x=0;x<H.length;++x){var z=H[x];if(null==z.to){var B=gu(D,z.marker);B?F&&(z.to=null==B.to?null:B.to+C):z.to=w}}}if(D){for(var x=0;x<D.length;++x){var z=D[x];if(null!=z.to&&(z.to+=C),null==z.from){var B=gu(H,z.marker);B||(z.from=C,F&&(H||(H=[])).push(z))}else{z.from+=C,F&&(H||(H=[])).push(z)}}}H&&(H=dN(H)),D&&D!=H&&(D=dN(D));var j=[H];if(!F){var y,E=G.text.length-2;if(E>0&&H){for(var x=0;x<H.length;++x){null==H[x].to&&(y||(y=[])).push(new ek(H[x].marker,null,null))}}for(var x=0;E>x;++x){j.push(y)}j.push(D)}return j}function dN(c){for(var a=0;a<c.length;++a){var b=c[a];null!=b.from&&b.from==b.to&&b.marker.clearWhenEmpty!==!1&&c.splice(a--,1)}return c.length?c:null}function bH(h,m){var b=e7(h,m),d=cR(h,m);if(!b){return d}if(!d){return b}for(var g=0;g<b.length;++g){var c=b[g],f=d[g];if(c&&f){h:for(var p=0;p<f.length;++p){for(var j=f[p],k=0;k<c.length;++k){if(c[k].marker==j.marker){continue h}}c.push(j)}}else{f&&(b[g]=f)}}return b}function hH(q,y,b){var g=null;if(q.iter(y.line,b.line+1,function(f){if(f.markedSpans){for(var a=0;a<f.markedSpans.length;++a){var c=f.markedSpans[a].marker;!c.readOnly||g&&-1!=hR(g,c)||(g||(g=[])).push(c)}}}),!g){return null}for(var k=[{from:y,to:b}],d=0;d<g.length;++d){for(var j=g[d],z=j.find(0),w=0;w<k.length;++w){var x=k[w];if(!(aw(x.to,z.from)<0||aw(x.from,z.to)>0)){var v=[w,1],m=aw(x.from,z.from),p=aw(x.to,z.to);(0>m||!j.inclusiveLeft&&!m)&&v.push({from:x.from,to:z.from}),(p>0||!j.inclusiveRight&&!p)&&v.push({from:z.to,to:x.to}),k.splice.apply(k,v),w+=v.length-1}}}return k}function a7(c){var a=c.markedSpans;if(a){for(var b=0;b<a.length;++b){a[b].marker.detachLine(c)}c.markedSpans=null}}function gh(c,a){if(a){for(var b=0;b<a.length;++b){a[b].marker.attachLine(c)}c.markedSpans=a}}function eP(a){return a.inclusiveLeft?-1:0}function fj(a){return a.inclusiveRight?1:0}function fQ(f,c){var d=f.lines.length-c.lines.length;if(0!=d){return d}var h=f.find(),b=c.find(),g=aw(h.from,b.from)||eP(f)-eP(c);if(g){return -g}var a=aw(h.to,b.to)||fj(f)-fj(c);return a?a:c.id-f.id}function cC(d,b){var c,g=hc&&d.markedSpans;if(g){for(var a,f=0;f<g.length;++f){a=g[f],a.marker.collapsed&&null==(b?a.from:a.to)&&(!c||fQ(c,a.marker)<0)&&(c=a.marker)}}return c}function e3(a){return cC(a,!0)}function aT(a){return cC(a,!1)}function dy(m,w,b,f,j){var d=bN(m,w),g=hc&&d.markedSpans;if(g){for(var x=0;x<g.length;++x){var q=g[x];if(q.marker.collapsed){var v=q.marker.find(0),p=aw(v.from,b)||eP(q.marker)-eP(j),k=aw(v.to,f)||fj(q.marker)-fj(j);if(!(p>=0&&0>=k||0>=p&&k>=0)&&(0>=p&&(aw(v.to,b)>0||q.marker.inclusiveRight&&j.inclusiveLeft)||p>=0&&(aw(v.from,f)<0||q.marker.inclusiveLeft&&j.inclusiveRight))){return !0}}}}}function hX(b){for(var a;a=e3(b);){b=a.find(-1,!0).line}return b}function g1(c){for(var a,b;a=aT(c);){c=a.find(1,!0).line,(b||(b=[])).push(c)}return b}function aF(c,a){var b=bN(c,a),d=hX(b);return b==d?a:bv(d)}function ac(c,a){if(a>c.lastLine()){return a}var b,d=bN(c,a);if(!bf(c,d)){return a}for(;b=aT(d);){d=b.find(1,!0).line}return bv(d)+1}function bf(d,b){var c=hc&&b.markedSpans;if(c){for(var f,a=0;a<c.length;++a){if(f=c[a],f.marker.collapsed){if(null==f.from){return !0}if(!f.marker.widgetNode&&0==f.from&&f.marker.inclusiveLeft&&dT(d,b,f)){return !0}}}}}function dT(d,b,c){if(null==c.to){var g=c.marker.find(1,!0);return dT(d,g.line,gu(g.line.markedSpans,c.marker))}if(c.marker.inclusiveRight&&c.to==b.text.length){return !0}for(var a,f=0;f<b.markedSpans.length;++f){if(a=b.markedSpans[f],a.marker.collapsed&&!a.marker.widgetNode&&a.from==c.to&&(null==a.to||a.to!=c.from)&&(a.marker.inclusiveLeft||c.marker.inclusiveRight)&&dT(d,b,a)){return !0}}}function fJ(c,a,b){dj(a)<(c.curOp&&c.curOp.scrollTop||c.doc.scrollTop)&&g8(c,null,b)}function dE(c){if(null!=c.height){return c.height}var a=c.doc.cm;if(!a){return 0}if(!cb(document.body,c.node)){var b="position: relative;";c.coverGutter&&(b+="margin-left: -"+a.display.gutters.offsetWidth+"px;"),c.noHScroll&&(b+="width: "+a.display.wrapper.clientWidth+"px;"),fZ(a.display.measure,ds("div",[c.node],null,b))}return c.height=c.node.parentNode.offsetHeight}function d1(d,b,c,g){var a=new hY(d,c,g),f=d.cm;return f&&a.noHScroll&&(f.display.alignWidgets=!0),by(d,b,"widget",function(e){var h=e.widgets||(e.widgets=[]);if(null==a.insertAt?h.push(a):h.splice(Math.min(h.length-1,Math.max(0,a.insertAt)),0,a),a.line=e,f&&!bf(d,e)){var i=dj(e)<d.scrollTop;fH(e,e.height+dE(a)),i&&g8(f,null,a.height),f.curOp.forceUpdate=!0}return !0}),a}function fu(d,b,c,f){d.text=b,d.stateAfter&&(d.stateAfter=null),d.styles&&(d.styles=null),null!=d.order&&(d.order=null),a7(d),gh(d,c);var a=f?f(d):1;a!=d.height&&fH(d,a)}function e9(a){a.parent=null,a7(a)}function cI(c,a){if(c){for(;;){var b=c.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!b){break}c=c.slice(0,b.index)+c.slice(b.index+b[0].length);var d=b[1]?"bgClass":"textClass";null==a[d]?a[d]=b[2]:new RegExp("(?:^|s)"+b[2]+"(?:$|s)").test(a[d])||(a[d]+=" "+b[2])}}return c}function bU(a,b){if(a.blankLine){return a.blankLine(b)}if(a.innerMode){var c=gF.innerMode(a,b);return c.mode.blankLine?c.mode.blankLine(c.state):void 0}}function eV(c,d,f,b){for(var e=0;10>e;e++){b&&(b[0]=gF.innerMode(c,f).mode);var a=c.token(d,f);if(d.pos>d.start){return a}}throw new Error("Mode "+c.name+" failed to advance stream.")}function a0(m,w,b,f){function j(a){return{start:k.start,end:k.pos,string:k.current(),type:d||null,state:a?bI(g.mode,p):p}}var d,g=m.doc,x=g.mode;w=fa(g,w);var q,v=bN(g,w.line),p=du(m,w.line,b),k=new cD(v.text,m.options.tabSize);for(f&&(q=[]);(f||k.pos<w.ch)&&!k.eol();){k.start=k.pos,d=eV(x,k,p),f&&q.push(j(!0))}return f?q:j()}function hO(x,C,b,k,q,j,m){var D=b.flattenSpans;null==D&&(D=x.options.flattenSpans);var A,B=0,z=null,v=new cD(C,x.options.tabSize),w=x.options.addModeClass&&[null];for(""==C&&cI(bU(b,k),j);!v.eol();){if(v.pos>x.options.maxHighlightLength?(D=!1,m&&hg(x,C,k,v.pos),v.pos=C.length,A=null):A=cI(eV(b,v,k,w),j),w){var y=w[0].name;y&&(A="m-"+(A?y+" "+A:y))}if(!D||z!=A){for(;B<v.start;){B=Math.min(v.start,B+50000),q(B,z)}z=A}v.start=v.pos}for(;B<v.pos;){var g=Math.min(v.pos,B+50000);q(g,z),B=g}}function eH(h,m,b,d){var g=[h.state.modeGen],c={};hO(h,m.text,h.doc.mode,b,function(i,a){g.push(i,a)},c,d);for(var f=0;f<h.state.overlays.length;++f){var p=h.state.overlays[f],j=1,k=0;hO(h,m.text,p.mode,!0,function(l,a){for(var i=j;l>k;){var s=g[j];s>l&&g.splice(j,1,l,g[j+1],s),j+=2,k=Math.min(l,s)}if(a){if(p.opaque){g.splice(i,j-i,l,"cm-overlay "+a),j=i+2}else{for(;j>i;i+=2){var q=g[i+1];g[i+1]=(q?q+" ":"")+"cm-overlay "+a}}}},c)}return{styles:g,classes:c.bgClass||c.textClass?c:null}}function aM(d,b,c){if(!b.styles||b.styles[0]!=d.state.modeGen){var f=du(d,bv(b)),a=eH(d,b,b.text.length>d.options.maxHighlightLength?bI(d.doc.mode,f):f);b.stateAfter=f,b.styles=a.styles,a.classes?b.styleClasses=a.classes:b.styleClasses&&(b.styleClasses=null),c===d.doc.frontier&&d.doc.frontier++}return b.styles}function hg(d,b,c,g){var a=d.doc.mode,f=new cD(b,d.options.tabSize);for(f.start=f.pos=g||0,""==b&&bU(a,c);!f.eol();){eV(a,f,c),f.start=f.pos}}function hB(c,a){if(!c||/^\s*$/.test(c)){return null}var b=a.addModeClass?ad:aG;return b[c]||(b[c]=c.replace(/\S+/g,"cm-$&"))}function ax(g,c){var f=ds("span",null,null,ab?"padding-right: .1px":null),j={pre:ds("pre",[f],"CodeMirror-line"),content:f,col:0,pos:0,cm:g,splitSpaces:(gY||ab)&&g.getOption("lineWrapping")};c.measure={};for(var b=0;b<=(c.rest?c.rest.length:0);b++){var h,a=b?c.rest[b-1]:c.line;j.pos=0,j.addToken=bA,ew(g.display.measure)&&(h=eF(a))&&(j.addToken=dm(j.addToken,h)),j.map=[];var d=c!=g.display.externalMeasured&&bv(a);fW(a,j,aM(g,a,d)),a.styleClasses&&(a.styleClasses.bgClass&&(j.bgClass=cc(a.styleClasses.bgClass,j.bgClass||"")),a.styleClasses.textClass&&(j.textClass=cc(a.styleClasses.textClass,j.textClass||""))),0==j.map.length&&j.map.push(0,0,j.content.appendChild(bS(g.display.measure))),0==b?(c.measure.map=j.map,c.measure.cache={}):((c.measure.maps||(c.measure.maps=[])).push(j.map),(c.measure.caches||(c.measure.caches=[])).push({}))}return ab&&/\bcm-tab\b/.test(j.content.lastChild.className)&&(j.content.className="cm-tab-wrap-hack"),a1(g,"renderLine",g,c.line,j.pre),j.pre.className&&(j.textClass=cc(j.pre.className,j.textClass||"")),j}function d7(b){var a=ds("span","•","cm-invalidchar");return a.title="\\u"+b.charCodeAt(0).toString(16),a.setAttribute("aria-label",a.title),a}function bA(I,q,x,B,E,A,D){if(q){var w=I.splitSpaces?q.replace(/ {3,}/g,h4):q,L=I.cm.state.specialChars,k=!1;if(L.test(q)){for(var K=document.createDocumentFragment(),F=0;;){L.lastIndex=F;var H=L.exec(q),J=H?H.index-F:q.length-F;if(J){var z=document.createTextNode(w.slice(F,F+J));gY&&9>aE?K.appendChild(ds("span",[z])):K.appendChild(z),I.map.push(I.pos,I.pos+J,z),I.col+=J,I.pos+=J}if(!H){break}if(F+=J+1,"	"==H[0]){var G=I.cm.options.tabSize,j=G-I.col%G,z=K.appendChild(ds("span",eY(j),"cm-tab"));z.setAttribute("role","presentation"),z.setAttribute("cm-text","	"),I.col+=j}else{if("\r"==H[0]||"\n"==H[0]){var z=K.appendChild(ds("span","\r"==H[0]?"␍":"␤","cm-invalidchar"));z.setAttribute("cm-text",H[0]),I.col+=1}else{var z=I.cm.options.specialCharPlaceholder(H[0]);z.setAttribute("cm-text",H[0]),gY&&9>aE?K.appendChild(ds("span",[z])):K.appendChild(z),I.col+=1}}I.map.push(I.pos,I.pos+1,z),I.pos++}}else{I.col+=q.length;var K=document.createTextNode(w);I.map.push(I.pos,I.pos+q.length,K),gY&&9>aE&&(k=!0),I.pos+=q.length}if(x||B||E||k||D){var C=x||"";B&&(C+=B),E&&(C+=E);var b=ds("span",[K],C,D);return A&&(b.title=A),I.content.appendChild(b)}I.content.appendChild(K)}}function h4(c){for(var a=" ",b=0;b<c.length-2;++b){a+=b%2?" ":" "}return a+=" "}function dm(b,a){return function(d,g,k,e,j,w,t){k=k?k+" cm-force-border":"cm-force-border";for(var v=d.pos,q=v+g.length;;){for(var m=0;m<a.length;m++){var p=a[m];if(p.to>v&&p.from<=v){break}}if(p.to>=q){return b(d,g,k,e,j,w,t)}b(d,g.slice(0,p.to-v),k,e,null,w,t),e=null,g=g.slice(p.to-v),v=p.to}}}function cX(d,b,c,f){var a=!f&&c.widgetNode;a&&d.map.push(d.pos,d.pos+b,a),!f&&d.cm.display.input.needsContentAttribute&&(a||(a=d.content.appendChild(document.createElement("span"))),a.setAttribute("cm-marker",c.id)),a&&(d.cm.display.input.setUneditable(a),d.content.appendChild(a)),d.pos+=b}function fW(V,F,I){var M=V.markedSpans,P=V.text,K=0;if(M){for(var O,G,Z,E,X,Q,U,W=P.length,J=0,R=1,D="",N=0;;){if(N==J){Z=E=X=Q=G="",U=null,N=1/0;for(var z,Y=[],B=0;B<M.length;++B){var A=M[B],H=A.marker;"bookmark"==H.type&&A.from==J&&H.widgetNode?Y.push(H):A.from<=J&&(null==A.to||A.to>J||H.collapsed&&A.to==J&&A.from==J)?(null!=A.to&&A.to!=J&&N>A.to&&(N=A.to,E=""),H.className&&(Z+=" "+H.className),H.css&&(G=(G?G+";":"")+H.css),H.startStyle&&A.from==J&&(X+=" "+H.startStyle),H.endStyle&&A.to==N&&(z||(z=[])).push(H.endStyle,A.to),H.title&&!Q&&(Q=H.title),H.collapsed&&(!U||fQ(U.marker,H)<0)&&(U=A)):A.from>J&&N>A.from&&(N=A.from)}if(z){for(var B=0;B<z.length;B+=2){z[B+1]==N&&(E+=" "+z[B])}}if(!U||U.from==J){for(var B=0;B<Y.length;++B){cX(F,0,Y[B])}}if(U&&(U.from||0)==J){if(cX(F,(null==U.to?W+1:U.to)-J,U.marker,null==U.from),null==U.to){return}U.to==J&&(U=!1)}}if(J>=W){break}for(var k=Math.min(W,N);;){if(D){var q=J+D.length;if(!U){var j=q>k?D.slice(0,k-J):D;F.addToken(F,j,O?O+Z:Z,X,J+j.length==N?E:"",Q,G)}if(q>=k){D=D.slice(k-J),J=k;break}J=q,X=""}D=P.slice(K,K=I[R++]),O=hB(I[R++],F.cm.options)}}}else{for(var R=1;R<I.length;R+=2){F.addToken(F,P.slice(K,K=I[R]),hB(I[R+1],F.cm.options))}}}function eg(b,a){return 0==a.from.ch&&0==a.to.ch&&""==a2(a.text)&&(!b.cm||b.cm.options.wholeLineUpdateBefore)}function cu(z,E,b,m){function v(a){return b?b[a]:null}function k(d,c,a){fu(d,c,a,m),fM(d,"change",d,E)}function q(d,a){for(var c=d,f=[];a>c;++c){f.push(new g3(D[c],v(c),m))}return f}var F=E.from,C=E.to,D=E.text,B=bN(z,F.line),w=bN(z,C.line),y=a2(D),A=v(D.length-1),j=C.line-F.line;if(E.full){z.insert(0,q(0,D.length)),z.remove(D.length,z.size-D.length)}else{if(eg(z,E)){var x=q(0,D.length-1);k(w,w.text,A),j&&z.remove(F.line,j),x.length&&z.insert(F.line,x)}else{if(B==w){if(1==D.length){k(B,B.text.slice(0,F.ch)+y+B.text.slice(C.ch),A)}else{var x=q(1,D.length-1);x.push(new g3(y+B.text.slice(C.ch),A,m)),k(B,B.text.slice(0,F.ch)+D[0],v(0)),z.insert(F.line+1,x)}}else{if(1==D.length){k(B,B.text.slice(0,F.ch)+D[0]+w.text.slice(C.ch),v(0)),z.remove(F.line+1,j)}else{k(B,B.text.slice(0,F.ch)+D[0],v(0)),k(w,y+w.text.slice(C.ch),A);var x=q(1,D.length-1);j>1&&z.remove(F.line+1,j-1),z.insert(F.line+1,x)}}}}fM(z,"change",z,E)}function b9(c){this.lines=c,this.parent=null;for(var a=0,b=0;a<c.length;++a){c[a].parent=this,b+=c[a].height}this.height=b}function ak(d){this.children=d;for(var b=0,c=0,f=0;f<d.length;++f){var a=d[f];b+=a.chunkSize(),c+=a.height,a.parent=this}this.size=b,this.height=c,this.parent=null}function c5(c,a,b){function d(k,h,m){if(k.linked){for(var g=0;g<k.linked.length;++g){var j=k.linked[g];if(j.doc!=h){var f=m&&j.sharedHist;(!b||f)&&(a(j.doc,f),d(j.doc,k,f))}}}}d(c,null,!0)}function cj(b,a){if(a.cm){throw new Error("This document is already in use.")}b.doc=a,a.cm=b,gq(b),gb(b),b.options.lineWrapping||gC(b),b.options.mode=a.modeOption,aJ(b)}function bN(d,b){if(b-=d.first,0>b||b>=d.size){throw new Error("There is no line "+(b+d.first)+" in the document.")}for(var c=d;!c.lines;){for(var g=0;;++g){var a=c.children[g],f=a.chunkSize();if(f>b){c=a;break}b-=f}}return c.lines[b]}function eq(d,b,c){var f=[],a=b.line;return d.iter(b.line,c.line+1,function(g){var h=g.text;a==c.line&&(h=h.slice(0,c.ch)),a==b.line&&(h=h.slice(b.ch)),f.push(h),++a}),f}function gB(c,a,b){var d=[];return c.iter(a,b,function(f){d.push(f.text)}),d}function fH(c,a){var b=a-c.height;if(b){for(var d=c;d;d=d.parent){d.height+=b}}}function bv(d){if(null==d.parent){return null}for(var b=d.parent,c=hR(b.lines,d),f=b.parent;f;b=f,f=f.parent){for(var a=0;f.children[a]!=b;++a){c+=f.children[a].chunkSize()}}return c+b.first}function b7(g,c){var f=g.first;g:do{for(var j=0;j<g.children.length;++j){var b=g.children[j],h=b.height;if(h>c){g=b;continue g}c-=h,f+=b.chunkSize()}return f}while(!g.lines);for(var j=0;j<g.lines.length;++j){var a=g.lines[j],d=a.height;if(d>c){break}c-=d}return f+j}function dj(f){f=hX(f);for(var c=0,d=f.parent,h=0;h<d.lines.length;++h){var b=d.lines[h];if(b==f){break}c+=b.height}for(var g=d.parent;g;d=g,g=d.parent){for(var h=0;h<g.children.length;++h){var a=g.children[h];if(a==d){break}c+=a.height}}return c}function eF(b){var a=b.order;return null==a&&(a=b.order=dK(b.text)),a}function cV(a){this.done=[],this.undone=[],this.undoDepth=1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=a||1}function dR(c,a){var b={from:gO(a.from),to:ep(a),text:eq(c,a.from,a.to)};return fU(c,b,a.from.line,a.to.line+1),c5(c,function(d){fU(d,b,a.from.line,a.to.line+1)},!0),b}function bL(b){for(;b.length;){var a=a2(b);if(!a.ranges){break}b.pop()}}function hM(b,a){return a?(bL(b.done),a2(b.done)):b.done.length&&!a2(b.done).ranges?a2(b.done):b.done.length>1&&!b.done[b.done.length-2].ranges?(b.done.pop(),a2(b.done)):void 0}function a9(h,k,b,d){var g=h.history;g.undone.length=0;var c,f=+new Date;if((g.lastOp==d||g.lastOrigin==k.origin&&k.origin&&("+"==k.origin.charAt(0)&&h.cm&&g.lastModTime>f-h.cm.options.historyEventDelay||"*"==k.origin.charAt(0)))&&(c=hM(g,g.lastOp==d))){var m=a2(c.changes);0==aw(k.from,k.to)&&0==aw(k.from,m.to)?m.to=ep(k):c.changes.push(dR(h,k))}else{var j=a2(g.done);for(j&&j.ranges||fq(h.sel,g.done),c={changes:[dR(h,k)],generation:g.generation},g.done.push(c);g.done.length>g.undoDepth;){g.done.shift(),g.done[0].ranges||g.done.shift()}}g.done.push(b),g.generation=++g.maxGeneration,g.lastModTime=g.lastSelTime=f,g.lastOp=g.lastSelOp=d,g.lastOrigin=g.lastSelOrigin=k.origin,m||a1(h,"historyAdded")}function gw(d,b,c,f){var a=b.charAt(0);return"*"==a||"+"==a&&c.ranges.length==f.ranges.length&&c.somethingSelected()==f.somethingSelected()&&new Date-d.history.lastSelTime<=(d.cm?d.cm.options.historyEventDelay:500)}function eT(d,b,c,g){var a=d.history,f=g&&g.origin;c==a.lastSelOp||f&&a.lastSelOrigin==f&&(a.lastModTime==a.lastSelTime&&a.lastOrigin==f||gw(d,f,a2(a.done),b))?a.done[a.done.length-1]=b:fq(b,a.done),a.lastSelTime=+new Date,a.lastSelOrigin=f,a.lastSelOp=c,g&&g.clearRedo!==!1&&bL(a.undone)}function fq(c,a){var b=a2(a);b&&b.ranges&&b.equals(c)||a.push(c)}function fU(d,b,c,g){var a=b["spans_"+d.id],f=0;d.iter(Math.max(d.first,c),Math.min(d.first+d.size,g),function(e){e.markedSpans&&((a||(a=b["spans_"+d.id]={}))[f]=e.markedSpans),++f})}function cG(c){if(!c){return null}for(var a,b=0;b<c.length;++b){c[b].marker.explicitlyCleared?a||(a=c.slice(0,b)):a&&a.push(c[b])}return a?a.length?a:null:c}function e7(d,b){var c=b["spans_"+d.id];if(!c){return null}for(var f=0,a=[];f<b.text.length;++f){a.push(cG(c[f]))}return a}function aV(m,w,b){for(var f=0,j=[];f<m.length;++f){var d=m[f];if(d.ranges){j.push(b?gD.prototype.deepCopy.call(d):d)}else{var g=d.changes,x=[];j.push({changes:x});for(var q=0;q<g.length;++q){var v,p=g[q];if(x.push({from:p.from,to:p.to,text:p.text}),w){for(var k in p){(v=k.match(/^spans_(\d+)$/))&&hR(w,Number(v[1]))>-1&&(a2(x)[k]=p[k],delete p[k])}}}}}return j}function dC(c,a,b,d){b<c.line?c.line+=d:a<c.line&&(c.line=a,c.ch=0)}function hZ(h,k,b,d){for(var g=0;g<h.length;++g){var c=h[g],f=!0;if(c.ranges){c.copied||(c=h[g]=c.deepCopy(),c.copied=!0);for(var m=0;m<c.ranges.length;m++){dC(c.ranges[m].anchor,k,b,d),dC(c.ranges[m].head,k,b,d)}}else{for(var m=0;m<c.changes.length;++m){var j=c.changes[m];if(b<j.from.line){j.from=hA(j.from.line+d,j.from.ch),j.to=hA(j.to.line+d,j.to.ch)}else{if(k<=j.to.line){f=!1;break}}}f||(h.splice(0,g+1),g=0)}}}function g9(d,b){var c=b.from.line,f=b.to.line,a=b.text.length-(f-c)-1;hZ(d.done,c,f,a),hZ(d.undone,c,f,a)}function aH(a){return null!=a.defaultPrevented?a.defaultPrevented:0==a.returnValue}function ah(a){return a.target||a.srcElement}function bh(b){var a=b.which;return null==a&&(1&b.button?a=1:2&b.button?a=3:4&b.button&&(a=2)),bT&&b.ctrlKey&&1==a&&(a=3),a}function dW(c,a,b){var d=c._handlers&&c._handlers[a];return b?d&&d.length>0?d.slice():bW:d||bW}function fM(f,c){function d(i){return function(){i.apply(null,g)}}var h=dW(f,c,!1);if(h.length){var b,g=Array.prototype.slice.call(arguments,2);fV?b=fV.delayedCallbacks:hQ?b=hQ:(b=hQ=[],setTimeout(dH,0));for(var a=0;a<h.length;++a){b.push(d(h[a]))}}}function dH(){var b=hQ;hQ=null;for(var a=0;a<b.length;++a){b[a]()}}function d5(c,a,b){return"string"==typeof a&&(a={type:a,preventDefault:function(){this.defaultPrevented=!0}}),a1(c,b||a.type,c,a),aH(a)||a.codemirrorIgnore}function fx(c){var a=c._handlers&&c._handlers.cursorActivity;if(a){for(var b=c.curOp.cursorActivityHandlers||(c.curOp.cursorActivityHandlers=[]),d=0;d<a.length;++d){-1==hR(b,a[d])&&b.push(a[d])}}}function fc(b,a){return dW(b,a).length>0}function cL(a){a.prototype.on=function(c,b){cK(this,c,b)},a.prototype.off=function(c,b){eX(this,c,b)}}function bX(){this.id=null}function eY(a){for(;h5.length<=a;){h5.push(a2(h5)+" ")}return h5[a]}function a2(a){return a[a.length-1]}function hR(c,a){for(var b=0;b<c.length;++b){if(c[b]==a){return b}}return -1}function eK(c,a){for(var b=[],d=0;d<c.length;d++){b[d]=a(c[d],d)}return b}function aO(){}function hs(c,a){var b;return Object.create?b=Object.create(c):(aO.prototype=c,b=new aO),a&&hF(a,b),b}function hF(c,a,b){a||(a={});for(var d in c){!c.hasOwnProperty(d)||b===!1&&a.hasOwnProperty(d)||(a[d]=c[d])}return a}function aA(b){var a=Array.prototype.slice.call(arguments,1);return function(){return b.apply(null,a)}}function ea(b,a){return a?a.source.indexOf("\\w")>-1&&eh(b)?!0:a.test(b):eh(b)}function bC(b){for(var a in b){if(b.hasOwnProperty(a)&&b[a]){return !1}}return !0}function h6(a){return a.charCodeAt(0)>=768&&cw.test(a)}function ds(d,b,c,g){var a=document.createElement(d);if(c&&(a.className=c),g&&(a.style.cssText=g),"string"==typeof b){a.appendChild(document.createTextNode(b))}else{if(b){for(var f=0;f<b.length;++f){a.appendChild(b[f])}}}return a}function c0(b){for(var a=b.childNodes.length;a>0;--a){b.removeChild(b.firstChild)}return b}function fZ(b,a){return c0(b).appendChild(a)}function em(){for(var a=document.activeElement;a&&a.root&&a.root.activeElement;){a=a.root.activeElement}return a}function cx(a){return new RegExp("(^|\\s)"+a+"(?:$|\\s)\\s*")}function cc(c,a){for(var b=c.split(" "),d=0;d<b.length;d++){b[d]&&!cx(b[d]).test(a)&&(a+=" "+b[d])}return a}function av(c){if(document.body.getElementsByClassName){for(var a=document.body.getElementsByClassName("CodeMirror"),b=0;b<a.length;b++){var d=a[b].CodeMirror;d&&c(d)}}}function da(){ev||(cq(),ev=!0)}function cq(){var a;cK(window,"resize",function(){null==a&&(a=setTimeout(function(){a=null,av(fS)},100))}),cK(window,"blur",function(){av(dw)})}function bS(c){if(null==ap){var a=ds("span","");fZ(c,ds("span",[a,document.createTextNode("x")])),0!=c.firstChild.offsetHeight&&(ap=a.offsetWidth<=1&&a.offsetHeight>2&&!(gY&&8>aE))}var b=ap?ds("span",""):ds("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px");return b.setAttribute("cm-text",""),b}function ew(c){if(null!=c8){return c8}var a=fZ(c,document.createTextNode("AخA")),b=cZ(a,0,1).getBoundingClientRect();if(!b||b.left==b.right){return !1}var d=cZ(a,1,2).getBoundingClientRect();return c8=d.right-b.right<3}function gI(c){if(null!=c7){return c7}var a=fZ(c,ds("span","x")),b=a.getBoundingClientRect(),d=cZ(a,0,1).getBoundingClientRect();return c7=Math.abs(b.left-d.left)>1}function fC(f,c,d,h){if(!f){return h(c,d,"ltr")}for(var b=!1,g=0;g<f.length;++g){var a=f[g];(a.from<d&&a.to>c||c==d&&a.to==c)&&(h(Math.max(a.from,c),Math.min(a.to,d),1==a.level?"rtl":"ltr"),b=!0)}b||h(c,d,"ltr")}function bq(a){return a.level%2?a.to:a.from}function b2(a){return a.level%2?a.from:a.to}function db(b){var a=eF(b);return a?bq(a[0]):0}function eB(b){var a=eF(b);return a?b2(a2(a)):b.text.length}function cQ(d,b){var c=bN(d.doc,b),g=hX(c);g!=c&&(b=bv(g));var a=eF(g),f=a?a[0].level%2?eB(g):db(g):0;return hA(b,f)}function dM(d,b){for(var c,g=bN(d.doc,b);c=aT(g);){g=c.find(1,!0).line,b=null}var a=eF(g),f=a?a[0].level%2?db(g):eB(g):g.text.length;return hA(null==b?bv(g):b,f)}function bG(f,c){var d=cQ(f,c.line),h=bN(f.doc,d.line),b=eF(h);if(!b||0==b[0].level){var g=Math.max(0,h.text.search(/\S/)),a=c.line==d.line&&c.ch<=g&&c.ch;return hA(d.line,a?0:g)}return d}function hG(c,a,b){var d=c[0].level;return a==d?!0:b==d?!1:b>a}function a6(d,b){cO=null;for(var c,f=0;f<d.length;++f){var a=d[f];if(a.from<b&&a.to>b){return f}if(a.from==b||a.to==b){if(null!=c){return hG(d,a.level,d[c].level)?(a.from!=a.to&&(cO=c),f):(a.from!=a.to&&(cO=f),c)}c=f}}return c}function gd(c,a,b,d){if(!d){return a+b}do{a+=b}while(a>0&&h6(c.text.charAt(a)));return a}function eO(g,c,f,j){var b=eF(g);if(!b){return fh(g,c,f,j)}for(var h=a6(b,c),a=b[h],d=gd(g,c,a.level%2?-f:f,j);;){if(d>a.from&&d<a.to){return d}if(d==a.from||d==a.to){return a6(b,d)==h?d:(a=b[h+=f],f>0==a.level%2?a.to:a.from)}if(a=b[h+=f],!a){return null}d=f>0==a.level%2?gd(g,a.to,-1,j):gd(g,a.from,1,j)}}function fh(d,b,c,f){var a=b+c;if(f){for(;a>0&&h6(d.text.charAt(a));){a+=c}}return 0>a||a>d.text.length?null:a}var cB=navigator.userAgent,e2=navigator.platform,aS=/gecko\/\d/i.test(cB),dx=/MSIE \d/.test(cB),hW=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(cB),gY=dx||hW,aE=gY&&(dx?document.documentMode||6:hW[1]),ab=/WebKit\//.test(cB),bd=ab&&/Qt\/\d+\.\d+/.test(cB),dS=/Chrome\//.test(cB),fI=/Opera\//.test(cB),dD=/Apple Computer/.test(navigator.vendor),d0=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(cB),fs=/PhantomJS/.test(cB),e8=/AppleWebKit/.test(cB)&&/Mobile\/\w+/.test(cB),cH=e8||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(cB),bT=e8||/Mac/.test(e2),eU=/win/i.test(e2),aZ=fI&&cB.match(/Version\/(\d*\.\d*)/);aZ&&(aZ=Number(aZ[1])),aZ&&aZ>=15&&(fI=!1,ab=!0);var hN=bT&&(bd||fI&&(null==aZ||12.11>aZ)),eG=aS||gY&&aE>=9,aL=!1,hc=!1;gA.prototype=hF({update:function(d){var b=d.scrollWidth>d.clientWidth+1,c=d.scrollHeight>d.clientHeight+1,g=d.nativeBarWidth;if(c){this.vert.style.display="block",this.vert.style.bottom=b?g+"px":"0";var a=d.viewHeight-(b?g:0);this.vert.firstChild.style.height=Math.max(0,d.scrollHeight-d.clientHeight+a)+"px"}else{this.vert.style.display="",this.vert.firstChild.style.height="0"}if(b){this.horiz.style.display="block",this.horiz.style.right=c?g+"px":"0",this.horiz.style.left=d.barLeft+"px";var f=d.viewWidth-d.barLeft-(c?g:0);this.horiz.firstChild.style.width=d.scrollWidth-d.clientWidth+f+"px"}else{this.horiz.style.display="",this.horiz.firstChild.style.width="0"}return !this.checkedZeroWidth&&d.clientHeight>0&&(0==g&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:c?g:0,bottom:b?g:0}},setScrollLeft:function(a){this.horiz.scrollLeft!=a&&(this.horiz.scrollLeft=a),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz)},setScrollTop:function(a){this.vert.scrollTop!=a&&(this.vert.scrollTop=a),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert)},zeroWidthHack:function(){var a=bT&&!d0?"12px":"18px";this.horiz.style.height=this.vert.style.width=a,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new bX,this.disableVert=new bX},enableZeroWidthBar:function(c,a){function b(){var e=c.getBoundingClientRect(),d=document.elementFromPoint(e.left+1,e.bottom-1);d!=c?c.style.pointerEvents="none":a.set(1000,b)}c.style.pointerEvents="auto",a.set(1000,b)},clear:function(){var a=this.horiz.parentNode;a.removeChild(this.horiz),a.removeChild(this.vert)}},gA.prototype),f5.prototype=hF({update:function(){return{bottom:0,right:0}},setScrollLeft:function(){},setScrollTop:function(){},clear:function(){}},f5.prototype),gF.scrollbarModel={"native":gA,"null":f5},gU.prototype.signal=function(b,a){fc(b,a)&&this.events.push(arguments)},gU.prototype.finish=function(){for(var a=0;a<this.events.length;a++){a1.apply(null,this.events[a])}};var hA=gF.Pos=function(b,a){return this instanceof hA?(this.line=b,void (this.ch=a)):new hA(b,a)},aw=gF.cmpPos=function(b,a){return b.line-a.line||b.ch-a.ch},d6=null;ca.prototype=hF({init:function(d){function b(i){if(!d5(g,i)){if(g.somethingSelected()){d6=g.getSelections(),c.inaccurateSelection&&(c.prevInput="",c.inaccurateSelection=!1,f.value=d6.join("\n"),dq(f))}else{if(!g.options.lineWiseCopyCut){return}var h=fK(g);d6=h.text,"cut"==i.type?g.setSelections(h.ranges,null,hk):(c.prevInput="",f.value=h.text.join("\n"),dq(f))}"cut"==i.type&&(g.state.cutIncoming=!0)}}var c=this,g=this.cm,a=this.wrapper=dp(),f=this.textarea=a.firstChild;d.wrapper.insertBefore(a,d.wrapper.firstChild),e8&&(f.style.width="0px"),cK(f,"input",function(){gY&&aE>=9&&c.hasSelection&&(c.hasSelection=null),c.poll()}),cK(f,"paste",function(h){d5(g,h)||gZ(h,g)||(g.state.pasteIncoming=!0,c.fastPoll())}),cK(f,"cut",b),cK(f,"copy",b),cK(d.scroller,"paste",function(e){ec(d,e)||d5(g,e)||(g.state.pasteIncoming=!0,c.focus())}),cK(d.lineSpace,"selectstart",function(e){ec(d,e)||d2(e)}),cK(f,"compositionstart",function(){var h=g.getCursor("from");c.composing&&c.composing.range.clear(),c.composing={start:h,range:g.markText(h,g.getCursor("to"),{className:"CodeMirror-composing"})}}),cK(f,"compositionend",function(){c.composing&&(c.poll(),c.composing.range.clear(),c.composing=null)})},prepareSelection:function(){var f=this.cm,c=f.display,d=f.doc,h=aP(f);if(f.options.moveInputWithCursor){var b=fO(f,d.sel.primary().head,"div"),g=c.wrapper.getBoundingClientRect(),a=c.lineDiv.getBoundingClientRect();h.teTop=Math.max(0,Math.min(c.wrapper.clientHeight-10,b.top+a.top-g.top)),h.teLeft=Math.max(0,Math.min(c.wrapper.clientWidth-10,b.left+a.left-g.left))}return h},showSelection:function(c){var a=this.cm,b=a.display;fZ(b.cursorDiv,c.cursors),fZ(b.selectionDiv,c.selection),null!=c.teTop&&(this.wrapper.style.top=c.teTop+"px",this.wrapper.style.left=c.teLeft+"px")},reset:function(f){if(!this.contextMenuPending){var c,d,h=this.cm,b=h.doc;if(h.somethingSelected()){this.prevInput="";var g=b.sel.primary();c=b0&&(g.to().line-g.from().line>100||(d=h.getSelection()).length>1000);var a=c?"-":d||h.getSelection();this.textarea.value=a,h.state.focused&&dq(this.textarea),gY&&aE>=9&&(this.hasSelection=a)}else{f||(this.prevInput=this.textarea.value="",gY&&aE>=9&&(this.hasSelection=null))}this.inaccurateSelection=c}},getField:function(){return this.textarea},supportsTouch:function(){return !1},focus:function(){if("nocursor"!=this.cm.options.readOnly&&(!cH||em()!=this.textarea)){try{this.textarea.focus()}catch(a){}}},blur:function(){this.textarea.blur()},resetPosition:function(){this.wrapper.style.top=this.wrapper.style.left=0},receivedFocus:function(){this.slowPoll()},slowPoll:function(){var a=this;a.pollingFast||a.polling.set(this.cm.options.pollInterval,function(){a.poll(),a.cm.state.focused&&a.slowPoll()})},fastPoll:function(){function c(){var d=b.poll();d||a?(b.pollingFast=!1,b.slowPoll()):(a=!0,b.polling.set(60,c))}var a=!1,b=this;b.pollingFast=!0,b.polling.set(20,c)},poll:function(){var g=this.cm,c=this.textarea,f=this.prevInput;if(this.contextMenuPending||!g.state.focused||bm(c)&&!f&&!this.composing||g.isReadOnly()||g.options.disableInput||g.state.keySeq){return !1}var j=c.value;if(j==f&&!g.somethingSelected()){return !1}if(gY&&aE>=9&&this.hasSelection===j||bT&&/[\uf700-\uf7ff]/.test(j)){return g.display.input.reset(),!1}if(g.doc.sel==g.display.selForContextMenu){var b=j.charCodeAt(0);if(8203!=b||f||(f=""),8666==b){return this.reset(),this.cm.execCommand("undo")}}for(var h=0,a=Math.min(f.length,j.length);a>h&&f.charCodeAt(h)==j.charCodeAt(h);){++h}var d=this;return cE(g,function(){gN(g,j.slice(h),f.length-h,null,d.composing?"*compose":null),j.length>1000||j.indexOf("\n")>-1?c.value=d.prevInput="":d.prevInput=j,d.composing&&(d.composing.range.clear(),d.composing.range=g.markText(d.composing.start,g.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},ensurePolled:function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},onKeyPress:function(){gY&&aE>=9&&(this.hasSelection=null),this.fastPoll()},onContextMenu:function(x){function C(){if(null!=m.selectionStart){var c=q.somethingSelected(),a=""+(c?m.value:"");m.value="⇚",m.value=a,k.prevInput=c?"":"",m.selectionStart=1,m.selectionEnd=a.length,j.selForContextMenu=q.doc.sel}}function b(){if(k.contextMenuPending=!1,k.wrapper.style.cssText=v,m.style.cssText=z,gY&&9>aE&&j.scrollbars.setScrollTop(j.scroller.scrollTop=A),null!=m.selectionStart){(!gY||gY&&9>aE)&&C();var c=0,a=function(){j.selForContextMenu==q.doc.sel&&0==m.selectionStart&&m.selectionEnd>0&&""==k.prevInput?bQ(q,a8.selectAll)(q):c++<10?j.detectingSelectAll=setTimeout(a,500):j.input.reset()};j.detectingSelectAll=setTimeout(a,200)}}var k=this,q=k.cm,j=q.display,m=k.textarea,D=cm(q,x),A=j.scroller.scrollTop;if(D&&!fI){var B=q.options.resetSelectionOnContextMenu;B&&-1==q.doc.sel.contains(D)&&bQ(q,d8)(q.doc,fX(D),hk);var z=m.style.cssText,v=k.wrapper.style.cssText;k.wrapper.style.cssText="position: absolute";var w=k.wrapper.getBoundingClientRect();if(m.style.cssText="position: absolute; width: 30px; height: 30px; top: "+(x.clientY-w.top-5)+"px; left: "+(x.clientX-w.left-5)+"px; z-index: 1000; background: "+(gY?"rgba(255, 255, 255, .05)":"transparent")+"; outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",ab){var y=window.scrollY}if(j.input.focus(),ab&&window.scrollTo(null,y),j.input.reset(),q.somethingSelected()||(m.value=k.prevInput=" "),k.contextMenuPending=!0,j.selForContextMenu=q.doc.sel,clearTimeout(j.detectingSelectAll),gY&&aE>=9&&C(),eG){fb(x);var g=function(){eX(window,"mouseup",g),setTimeout(b,20)};cK(window,"mouseup",g)}else{setTimeout(b,50)}}},readOnlyChanged:function(a){a||this.reset()},setUneditable:aO,needsContentAttribute:!1},ca.prototype),eI.prototype=hF({init:function(d){function b(k){if(!d5(f,k)){if(f.somethingSelected()){d6=f.getSelections(),"cut"==k.type&&f.replaceSelection("",null,"cut")}else{if(!f.options.lineWiseCopyCut){return}var h=fK(f);d6=h.text,"cut"==k.type&&f.operation(function(){f.setSelections(h.ranges,0,hk),f.replaceSelection("",null,"cut")})}if(k.clipboardData&&!e8){k.preventDefault(),k.clipboardData.clearData(),k.clipboardData.setData("text/plain",d6.join("\n"))}else{var j=dp(),g=j.firstChild;f.display.lineSpace.insertBefore(j,f.display.lineSpace.firstChild),g.value=d6.join("\n");var l=document.activeElement;dq(g),setTimeout(function(){f.display.lineSpace.removeChild(j),l.focus()},50)}}}var c=this,f=c.cm,a=c.div=d.lineDiv;bw(a),cK(a,"paste",function(g){d5(f,g)||gZ(g,f)}),cK(a,"compositionstart",function(k){var j=k.data;if(c.composing={sel:f.doc.sel,data:j,startData:j},j){var h=f.doc.sel.primary(),m=f.getLine(h.head.line),g=m.indexOf(j,Math.max(0,h.head.ch-j.length));g>-1&&g<=h.head.ch&&(c.composing.sel=fX(hA(h.head.line,g),hA(h.head.line,g+j.length)))}}),cK(a,"compositionupdate",function(g){c.composing.data=g.data}),cK(a,"compositionend",function(h){var g=c.composing;g&&(h.data==g.startData||/\u200b/.test(h.data)||(g.data=h.data),setTimeout(function(){g.handled||c.applyComposition(g),c.composing==g&&(c.composing=null)},50))}),cK(a,"touchstart",function(){c.forceCompositionEnd()}),cK(a,"input",function(){c.composing||(f.isReadOnly()||!c.pollContent())&&cE(c.cm,function(){aJ(f)})}),cK(a,"copy",b),cK(a,"cut",b)},prepareSelection:function(){var a=aP(this.cm,!1);return a.focus=this.cm.state.focused,a},showSelection:function(a){a&&this.cm.display.view.length&&(a.focus&&this.showPrimarySelection(),this.showMultipleSelections(a))},showPrimarySelection:function(){var m=window.getSelection(),w=this.cm.doc.sel.primary(),b=bO(this.cm,m.anchorNode,m.anchorOffset),f=bO(this.cm,m.focusNode,m.focusOffset);if(!b||b.bad||!f||f.bad||0!=aw(hS(b,f),w.from())||0!=aw(gL(b,f),w.to())){var j=cY(this.cm,w.from()),d=cY(this.cm,w.to());if(j||d){var g=this.cm.display.view,x=m.rangeCount&&m.getRangeAt(0);if(j){if(!d){var q=g[g.length-1].measure,v=q.maps?q.maps[q.maps.length-1]:q.map;d={node:v[v.length-1],offset:v[v.length-2]-v[v.length-3]}}}else{j={node:g[0].measure.map[2],offset:0}}try{var p=cZ(j.node,j.offset,d.offset,d.node)}catch(k){}p&&(!aS&&this.cm.state.focused?(m.collapse(j.node,j.offset),p.collapsed||m.addRange(p)):(m.removeAllRanges(),m.addRange(p)),x&&null==m.anchorNode?m.addRange(x):aS&&this.startGracePeriod()),this.rememberSelection()}}},startGracePeriod:function(){var a=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){a.gracePeriod=!1,a.selectionChanged()&&a.cm.operation(function(){a.cm.curOp.selectionChanged=!0})},20)},showMultipleSelections:function(a){fZ(this.cm.display.cursorDiv,a.cursors),fZ(this.cm.display.selectionDiv,a.selection)},rememberSelection:function(){var a=window.getSelection();this.lastAnchorNode=a.anchorNode,this.lastAnchorOffset=a.anchorOffset,this.lastFocusNode=a.focusNode,this.lastFocusOffset=a.focusOffset},selectionInEditor:function(){var b=window.getSelection();if(!b.rangeCount){return !1}var a=b.getRangeAt(0).commonAncestorContainer;return cb(this.div,a)},focus:function(){"nocursor"!=this.cm.options.readOnly&&this.div.focus()},blur:function(){this.div.blur()},getField:function(){return this.div},supportsTouch:function(){return !0},receivedFocus:function(){function b(){a.cm.state.focused&&(a.pollSelection(),a.polling.set(a.cm.options.pollInterval,b))}var a=this;this.selectionInEditor()?this.pollSelection():cE(this.cm,function(){a.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,b)},selectionChanged:function(){var a=window.getSelection();return a.anchorNode!=this.lastAnchorNode||a.anchorOffset!=this.lastAnchorOffset||a.focusNode!=this.lastFocusNode||a.focusOffset!=this.lastFocusOffset},pollSelection:function(){if(!this.composing&&!this.gracePeriod&&this.selectionChanged()){var c=window.getSelection(),a=this.cm;this.rememberSelection();var b=bO(a,c.anchorNode,c.anchorOffset),d=bO(a,c.focusNode,c.focusOffset);b&&d&&cE(a,function(){d8(a.doc,fX(b,d),hk),(b.bad||d.bad)&&(a.curOp.selectionChanged=!0)})}},pollContent:function(){var P=this.cm,B=P.display,F=P.doc.sel.primary(),I=F.from(),L=F.to();if(I.line<B.viewFrom||L.line>B.viewTo-1){return !1}var H;if(I.line==B.viewFrom||0==(H=aq(P,I.line))){var K=bv(B.view[0].line),D=B.view[0].node}else{var K=bv(B.view[H].line),D=B.view[H-1].node.nextSibling}var T=aq(P,L.line);if(T==B.view.length-1){var A=B.viewTo-1,R=B.lineDiv.lastChild}else{var A=bv(B.view[T+1].line)-1,R=B.view[T+1].node.previousSibling}for(var M=P.doc.splitLines(ba(P,D,R,K,A)),O=eq(P.doc,hA(K,0),hA(A,bN(P.doc,A).text.length));M.length>1&&O.length>1;){if(a2(M)==a2(O)){M.pop(),O.pop(),A--}else{if(M[0]!=O[0]){break}M.shift(),O.shift(),K++}}for(var Q=0,G=0,N=M[0],z=O[0],J=Math.min(N.length,z.length);J>Q&&N.charCodeAt(Q)==z.charCodeAt(Q);){++Q}for(var j=a2(M),S=a2(O),q=Math.min(j.length-(1==M.length?Q:0),S.length-(1==O.length?Q:0));q>G&&j.charCodeAt(j.length-G-1)==S.charCodeAt(S.length-G-1);){++G}M[M.length-1]=j.slice(0,j.length-G),M[0]=M[0].slice(Q);var k=hA(K,Q),E=hA(A,O.length?a2(O).length-G:0);return M.length>1||M[0]||aw(k,E)?(eS(P.doc,M,k,E,"+input"),!0):void 0},ensurePolled:function(){this.forceCompositionEnd()},reset:function(){this.forceCompositionEnd()},forceCompositionEnd:function(){this.composing&&!this.composing.handled&&(this.applyComposition(this.composing),this.composing.handled=!0,this.div.blur(),this.div.focus())},applyComposition:function(a){this.cm.isReadOnly()?bQ(this.cm,aJ)(this.cm):a.data&&a.data!=a.startData&&bQ(this.cm,gN)(this.cm,a.data,0,a.sel)},setUneditable:function(a){a.contentEditable="false"},onKeyPress:function(a){a.preventDefault(),this.cm.isReadOnly()||bQ(this.cm,gN)(this.cm,String.fromCharCode(null==a.charCode?a.keyCode:a.charCode),0)},readOnlyChanged:function(a){this.div.contentEditable=String("nocursor"!=a)},onContextMenu:aO,resetPosition:aO,needsContentAttribute:!0},eI.prototype),gF.inputStyles={textarea:ca,contenteditable:eI},gD.prototype={primary:function(){return this.ranges[this.primIndex]},equals:function(c){if(c==this){return !0}if(c.primIndex!=this.primIndex||c.ranges.length!=this.ranges.length){return !1}for(var a=0;a<this.ranges.length;a++){var b=this.ranges[a],d=c.ranges[a];if(0!=aw(b.anchor,d.anchor)||0!=aw(b.head,d.head)){return !1}}return !0},deepCopy:function(){for(var b=[],a=0;a<this.ranges.length;a++){b[a]=new eW(gO(this.ranges[a].anchor),gO(this.ranges[a].head))}return new gD(b,this.primIndex)},somethingSelected:function(){for(var a=0;a<this.ranges.length;a++){if(!this.ranges[a].empty()){return !0}}return !1},contains:function(c,a){a||(a=c);for(var b=0;b<this.ranges.length;b++){var d=this.ranges[b];if(aw(a,d.from())>=0&&aw(c,d.to())<=0){return b}}return -1}},eW.prototype={from:function(){return hS(this.anchor,this.head)},to:function(){return gL(this.anchor,this.head)},empty:function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch}};var bz,h3,dk,cW={left:0,right:0,top:0,bottom:0},fV=null,ef=0,cs=0,b8=0,aj=null;gY?aj=-0.53:aS?aj=15:dS?aj=-0.7:dD&&(aj=-1/3);var c4=function(c){var a=c.wheelDeltaX,b=c.wheelDeltaY;return null==a&&c.detail&&c.axis==c.HORIZONTAL_AXIS&&(a=c.detail),null==b&&c.detail&&c.axis==c.VERTICAL_AXIS?b=c.detail:null==b&&(b=c.wheelDelta),{x:a,y:b}};gF.wheelEventPixels=function(b){var a=c4(b);return a.x*=aj,a.y*=aj,a};var ch=new bX,bM=null,ep=gF.changeEnd=function(a){return a.text?hA(a.from.line+a.text.length-1,a2(a.text).length+(1==a.text.length?a.from.ch:0)):a.to};gF.prototype={constructor:gF,focus:function(){window.focus(),this.display.input.focus()},setOption:function(c,a){var b=this.options,d=b[c];(b[c]!=a||"mode"==c)&&(b[c]=a,fE.hasOwnProperty(c)&&bQ(this,fE[c])(this,a,d))},getOption:function(a){return this.options[a]},getDoc:function(){return this.doc},addKeyMap:function(b,a){this.state.keyMaps[a?"push":"unshift"](cp(b))},removeKeyMap:function(c){for(var a=this.state.keyMaps,b=0;b<a.length;++b){if(a[b]==c||a[b].name==c){return a.splice(b,1),!0}}},addOverlay:eR(function(a,b){var c=a.token?a:gF.getMode(this.options,a);if(c.startState){throw new Error("Overlays may not be stateful.")}this.state.overlays.push({mode:c,modeSpec:a,opaque:b&&b.opaque}),this.state.modeGen++,aJ(this)}),removeOverlay:eR(function(c){for(var a=this.state.overlays,b=0;b<a.length;++b){var d=a[b].modeSpec;if(d==c||"string"==typeof c&&d.name==c){return a.splice(b,1),this.state.modeGen++,void aJ(this)}}}),indentLine:eR(function(c,a,b){"string"!=typeof a&&"number"!=typeof a&&(a=null==a?this.options.smartIndent?"smart":"prev":a?"add":"subtract"),dF(this.doc,c)&&d4(this,c,a,b)}),indentSelection:eR(function(h){for(var m=this.doc.sel.ranges,b=-1,d=0;d<m.length;d++){var g=m[d];if(g.empty()){g.head.line>b&&(d4(this,g.head.line,h,!0),b=g.head.line,d==this.doc.sel.primIndex&&hz(this))}else{var c=g.from(),f=g.to(),p=Math.max(b,c.line);b=Math.min(this.lastLine(),f.line-(f.ch?0:1))+1;for(var j=p;b>j;++j){d4(this,j,h)}var k=this.doc.sel.ranges;0==c.ch&&m.length==k.length&&k[d].from().ch>0&&bj(this.doc,d,new eW(c,k[d].to()),hk)}}}),getTokenAt:function(b,a){return a0(this,b,a)},getLineTokens:function(b,a){return a0(this,hA(b),a,!0)},getTokenTypeAt:function(g){g=fa(this.doc,g);var c,f=aM(this,bN(this.doc,g.line)),j=0,b=(f.length-1)/2,h=g.ch;if(0==h){c=f[2]}else{for(;;){var a=j+b>>1;if((a?f[2*a-1]:0)>=h){b=a}else{if(!(f[2*a+1]<h)){c=f[2*a+2];break}j=a+1}}}var d=c?c.indexOf("cm-overlay "):-1;return 0>d?c:0==d?null:c.slice(0,d-1)},getModeAt:function(a){var b=this.doc.mode;return b.innerMode?gF.innerMode(b,this.getTokenAt(a).state).mode:b},getHelper:function(b,a){return this.getHelpers(b,a)[0]},getHelpers:function(g,c){var f=[];if(!dO.hasOwnProperty(c)){return f}var j=dO[c],b=this.getModeAt(g);if("string"==typeof b[c]){j[b[c]]&&f.push(j[b[c]])}else{if(b[c]){for(var h=0;h<b[c].length;h++){var a=j[b[c][h]];a&&f.push(a)}}else{b.helperType&&j[b.helperType]?f.push(j[b.helperType]):j[b.name]&&f.push(j[b.name])}}for(var h=0;h<j._global.length;h++){var d=j._global[h];d.pred(b,this)&&-1==hR(f,d.val)&&f.push(d.val)}return f},getStateAfter:function(c,a){var b=this.doc;return c=cJ(b,null==c?b.first+b.size-1:c),du(this,c+1,a)},cursorCoords:function(c,a){var b,d=this.doc.sel.primary();return b=null==c?d.head:"object"==typeof c?fa(this.doc,c):c?d.from():d.to(),fO(this,b,a||"page")},charCoords:function(b,a){return ff(this,fa(this.doc,b),a||"page")},coordsChar:function(b,a){return b=eM(this,b,a||"page"),aQ(this,b.left,b.top)},lineAtHeight:function(b,a){return b=eM(this,{top:b,left:0},a||"page").top,b7(this.doc,b+this.display.viewOffset)},heightAtLine:function(d,b){var c,f=!1;if("number"==typeof d){var a=this.doc.first+this.doc.size-1;d<this.doc.first?d=this.doc.first:d>a&&(d=a,f=!0),c=bN(this.doc,d)}else{c=d}return f7(this,c,{top:0,left:0},b||"page").top+(f?this.doc.height-dj(c):0)},defaultTextHeight:function(){return hU(this.display)},defaultCharWidth:function(){return gS(this.display)},setGutterMarker:eR(function(c,a,b){return by(this.doc,c,"gutter",function(d){var f=d.gutterMarkers||(d.gutterMarkers={});return f[a]=b,!b&&bC(f)&&(d.gutterMarkers=null),!0})}),clearGutter:eR(function(c){var a=this,b=a.doc,d=b.first;b.iter(function(e){e.gutterMarkers&&e.gutterMarkers[c]&&(e.gutterMarkers[c]=null,g5(a,d,"gutter"),bC(e.gutterMarkers)&&(e.gutterMarkers=null)),++d})}),lineInfo:function(b){if("number"==typeof b){if(!dF(this.doc,b)){return null}var a=b;if(b=bN(this.doc,b),!b){return null}}else{var a=bv(b);if(null==a){return null}}return{line:a,handle:b,text:b.text,gutterMarkers:b.gutterMarkers,textClass:b.textClass,bgClass:b.bgClass,wrapClass:b.wrapClass,widgets:b.widgets}},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(h,m,b,d,g){var c=this.display;h=fO(this,fa(this.doc,h));var f=h.bottom,p=h.left;if(m.style.position="absolute",m.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(m),c.sizer.appendChild(m),"over"==d){f=h.top}else{if("above"==d||"near"==d){var j=Math.max(c.wrapper.clientHeight,this.doc.height),k=Math.max(c.sizer.clientWidth,c.lineSpace.clientWidth);("above"==d||h.bottom+m.offsetHeight>j)&&h.top>m.offsetHeight?f=h.top-m.offsetHeight:h.bottom+m.offsetHeight<=j&&(f=h.bottom),p+m.offsetWidth>k&&(p=k-m.offsetWidth)}}m.style.top=f+"px",m.style.left=m.style.right="","right"==g?(p=c.sizer.clientWidth-m.offsetWidth,m.style.right="0px"):("left"==g?p=0:"middle"==g&&(p=(c.sizer.clientWidth-m.offsetWidth)/2),m.style.left=p+"px"),b&&eE(this,p,f,p+m.offsetWidth,f+m.offsetHeight)},triggerOnKeyDown:eR(eN),triggerOnKeyPress:eR(cA),triggerOnKeyUp:fP,execCommand:function(a){return a8.hasOwnProperty(a)?a8[a].call(null,this):void 0},triggerElectric:eR(function(a){hb(this,a)}),findPosH:function(f,c,d,h){var b=1;0>c&&(b=-1,c=-c);for(var g=0,a=fa(this.doc,f);c>g&&(a=dh(this.doc,a,b,d,h),!a.hitSide);++g){}return a},moveH:eR(function(c,a){var b=this;b.extendSelectionsBy(function(d){return b.display.shift||b.doc.extend||d.empty()?dh(b.doc,d.head,c,a,b.options.rtlMoveVisually):0>c?d.from():d.to()},az)}),deleteH:eR(function(c,a){var b=this.doc.sel,d=this.doc;b.somethingSelected()?d.replaceSelection("",null,"+delete"):h2(this,function(f){var e=dh(d,f.head,c,a,!1);return 0>c?{from:e,to:f.head}:{from:f.head,to:e}})}),findPosV:function(h,k,b,d){var g=1,c=d;0>k&&(g=-1,k=-k);for(var f=0,m=fa(this.doc,h);k>f;++f){var j=fO(this,m,"div");if(null==c?c=j.left:j.left=c,m=cU(this,j,g,b),m.hitSide){break}}return m},moveV:eR(function(f,c){var d=this,h=this.doc,b=[],g=!d.display.shift&&!h.extend&&h.sel.somethingSelected();if(h.extendSelectionsBy(function(i){if(g){return 0>f?i.from():i.to()}var j=fO(d,i.head,"div");null!=i.goalColumn&&(j.left=i.goalColumn),b.push(j.left);var e=cU(d,j,f,c);return"page"==c&&i==h.sel.primary()&&g8(d,null,ff(d,e,"div").top-j.top),e},az),b.length){for(var a=0;a<h.sel.ranges.length;a++){h.sel.ranges[a].goalColumn=b[a]}}}),findWordAt:function(g){var c=this.doc,f=bN(c,g.line).text,j=g.ch,b=g.ch;if(f){var h=this.getHelper(g,"wordChars");(g.xRel<0||b==f.length)&&j?--j:++b;for(var a=f.charAt(j),d=ea(a,h)?function(i){return ea(i,h)}:/\s/.test(a)?function(i){return/\s/.test(i)}:function(i){return !/\s/.test(i)&&!ea(i)};j>0&&d(f.charAt(j-1));){--j}for(;b<f.length&&d(f.charAt(b));){++b}}return new eW(hA(g.line,j),hA(g.line,b))},toggleOverwrite:function(a){(null==a||a!=this.state.overwrite)&&((this.state.overwrite=!this.state.overwrite)?bP(this.display.cursorDiv,"CodeMirror-overwrite"):ck(this.display.cursorDiv,"CodeMirror-overwrite"),a1(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==em()},isReadOnly:function(){return !(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:eR(function(b,a){(null!=b||null!=a)&&au(this),null!=b&&(this.curOp.scrollLeft=b),null!=a&&(this.curOp.scrollTop=a)}),getScrollInfo:function(){var a=this.display.scroller;return{left:a.scrollLeft,top:a.scrollTop,height:a.scrollHeight-cy(this)-this.display.barHeight,width:a.scrollWidth-cy(this)-this.display.barWidth,clientHeight:ay(this),clientWidth:cd(this)}},scrollIntoView:eR(function(c,a){if(null==c?(c={from:this.doc.sel.primary().head,to:null},null==a&&(a=this.options.cursorScrollMargin)):"number"==typeof c?c={from:hA(c,0),to:null}:null==c.from&&(c={from:c,to:null}),c.to||(c.to=c.from),c.margin=a||0,null!=c.from.line){au(this),this.curOp.scrollToPos=c}else{var b=aK(this,Math.min(c.from.left,c.to.left),Math.min(c.from.top,c.to.top)-c.margin,Math.max(c.from.right,c.to.right),Math.max(c.from.bottom,c.to.bottom)+c.margin);this.scrollTo(b.scrollLeft,b.scrollTop)}}),setSize:eR(function(d,b){function c(g){return"number"==typeof g||/^\d+$/.test(String(g))?g+"px":g}var f=this;null!=d&&(f.display.wrapper.style.width=c(d)),null!=b&&(f.display.wrapper.style.height=c(b)),f.options.lineWrapping&&dJ(this);var a=f.display.viewFrom;f.doc.iter(a,f.display.viewTo,function(h){if(h.widgets){for(var g=0;g<h.widgets.length;g++){if(h.widgets[g].noHScroll){g5(f,a,"widget");break}}}++a}),f.curOp.forceUpdate=!0,a1(f,"refresh",this)}),operation:function(a){return cE(this,a)},refresh:eR(function(){var a=this.display.cachedTextHeight;aJ(this),this.curOp.forceUpdate=!0,bE(this),this.scrollTo(this.doc.scrollLeft,this.doc.scrollTop),gH(this),(null==a||Math.abs(a-hU(this.display))>0.5)&&gq(this),a1(this,"refresh",this)}),swapDoc:eR(function(b){var a=this.doc;return a.cm=null,cj(this,b),bE(this),this.display.input.reset(),this.scrollTo(b.scrollLeft,b.scrollTop),this.curOp.forceScroll=!0,fM(this,"swapDoc",this,a),a}),getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},cL(gF);var gy=gF.defaults={},fE=gF.optionHandlers={},bu=gF.Init={toString:function(){return"CodeMirror.Init"}};fT("value","",function(b,a){b.setValue(a)},!0),fT("mode",null,function(b,a){b.doc.modeOption=a,gb(b)},!0),fT("indentUnit",2,gb,!0),fT("indentWithTabs",!1),fT("smartIndent",!0),fT("tabSize",4,function(a){gj(a),bE(a),aJ(a)},!0),fT("lineSeparator",null,function(d,b){if(d.doc.lineSep=b,b){var c=[],f=d.doc.first;d.doc.iter(function(h){for(var g=0;;){var j=h.text.indexOf(b,g);if(-1==j){break}g=j+b.length,c.push(hA(f,j))}f++});for(var a=c.length-1;a>=0;a--){eS(d.doc,b,c[a],hA(c[a].line,c[a].ch+b.length))}}}),fT("specialChars",/[\t\u0000-\u0019\u00ad\u200b-\u200f\u2028\u2029\ufeff]/g,function(a,b,c){a.state.specialChars=new RegExp(b.source+(b.test("	")?"":"|	"),"g"),c!=gF.Init&&a.refresh()}),fT("specialCharPlaceholder",d7,function(a){a.refresh()},!0),fT("electricChars",!0),fT("inputStyle",cH?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),fT("rtlMoveVisually",!eU),fT("wholeLineUpdateBefore",!0),fT("theme","default",function(a){f9(a),gK(a)},!0),fT("keyMap","default",function(b,c,e){var a=cp(c),d=e!=gF.Init&&cp(e);d&&d.detach&&d.detach(b,a),a.attach&&a.attach(b,d||null)}),fT("extraKeys",null),fT("lineWrapping",!1,gx,!0),fT("gutters",[],function(a){gG(a.options),gK(a)},!0),fT("fixedGutter",!0,function(b,a){b.display.gutters.style.left=a?g7(b.display)+"px":"0",b.refresh()},!0),fT("coverGutterNextToScrollbar",!1,function(a){f2(a)},!0),fT("scrollbarStyle","native",function(a){gm(a),f2(a),a.display.scrollbars.setScrollTop(a.doc.scrollTop),a.display.scrollbars.setScrollLeft(a.doc.scrollLeft)},!0),fT("lineNumbers",!1,function(a){gG(a.options),gK(a)},!0),fT("firstLineNumber",1,gK,!0),fT("lineNumberFormatter",function(a){return a},gK,!0),fT("showCursorWhenSelecting",!1,eL,!0),fT("resetSelectionOnContextMenu",!0),fT("lineWiseCopyCut",!0),fT("readOnly",!1,function(b,a){"nocursor"==a?(dw(b),b.display.input.blur(),b.display.disabled=!0):b.display.disabled=!1,b.display.input.readOnlyChanged(a)}),fT("disableInput",!1,function(b,a){a||b.display.input.reset()},!0),fT("dragDrop",!0,cT),fT("allowDropFileTypes",null),fT("cursorBlinkRate",530),fT("cursorScrollMargin",0),fT("cursorHeight",1,eL,!0),fT("singleCursorHeightPerLine",!0,eL,!0),fT("workTime",100),fT("workDelay",100),fT("flattenSpans",!0,gj,!0),fT("addModeClass",!1,gj,!0),fT("pollInterval",100),fT("undoDepth",200,function(b,a){b.doc.history.undoDepth=a}),fT("historyEventDelay",1250),fT("viewportMargin",10,function(a){a.refresh()},!0),fT("maxHighlightLength",10000,gj,!0),fT("moveInputWithCursor",!0,function(b,a){a||b.display.input.resetPosition()}),fT("tabindex",null,function(b,a){b.display.input.getField().tabIndex=a||""}),fT("autofocus",null);var b4=gF.modes={},dd=gF.mimeModes={};gF.defineMode=function(a,b){gF.defaults.mode||"null"==a||(gF.defaults.mode=a),arguments.length>2&&(b.dependencies=Array.prototype.slice.call(arguments,2)),b4[a]=b},gF.defineMIME=function(b,a){dd[b]=a},gF.resolveMode=function(a){if("string"==typeof a&&dd.hasOwnProperty(a)){a=dd[a]}else{if(a&&"string"==typeof a.name&&dd.hasOwnProperty(a.name)){var b=dd[a.name];"string"==typeof b&&(b={name:b}),a=hs(b,a),a.name=b.name}else{if("string"==typeof a&&/^[\w\-]+\/[\w\-]+\+xml$/.test(a)){return gF.resolveMode("application/xml")}}}return"string"==typeof a?{name:a}:a||{name:"null"}},gF.getMode=function(c,d){var d=gF.resolveMode(d),f=b4[d.name];if(!f){return gF.getMode(c,"text/plain")}var b=f(c,d);if(eC.hasOwnProperty(d.name)){var e=eC[d.name];for(var a in e){e.hasOwnProperty(a)&&(b.hasOwnProperty(a)&&(b["_"+a]=b[a]),b[a]=e[a])}}if(b.name=d.name,d.helperType&&(b.helperType=d.helperType),d.modeProps){for(var a in d.modeProps){b[a]=d.modeProps[a]}}return b},gF.defineMode("null",function(){return{token:function(a){a.skipToEnd()}}}),gF.defineMIME("text/plain","null");var eC=gF.modeExtensions={};gF.extendMode=function(c,a){var b=eC.hasOwnProperty(c)?eC[c]:eC[c]={};hF(a,b)},gF.defineExtension=function(a,b){gF.prototype[a]=b},gF.defineDocExtension=function(b,a){dV.prototype[b]=a},gF.defineOption=fT;var cS=[];gF.defineInitHook=function(a){cS.push(a)};var dO=gF.helpers={};gF.registerHelper=function(a,b,c){dO.hasOwnProperty(a)||(dO[a]=gF[a]={_global:[]}),dO[a][b]=c},gF.registerGlobalHelper=function(b,c,d,a){gF.registerHelper(b,c,a),dO[b]._global.push({pred:d,val:a})};var bI=gF.copyState=function(d,b){if(b===!0){return b}if(d.copyState){return d.copyState(b)}var c={};for(var f in b){var a=b[f];a instanceof Array&&(a=a.concat([])),c[f]=a}return c},hJ=gF.startState=function(c,a,b){return c.startState?c.startState(a,b):!0};gF.innerMode=function(c,a){for(;c.innerMode;){var b=c.innerMode(a);if(!b||b.mode==c){break}a=b.state,c=b.mode}return b||{mode:c,state:a}};var a8=gF.commands={selectAll:function(a){a.setSelection(hA(a.firstLine(),0),hA(a.lastLine()),hk)},singleSelection:function(a){a.setSelection(a.getCursor("anchor"),a.getCursor("head"),hk)},killLine:function(a){h2(a,function(b){if(b.empty()){var c=bN(a.doc,b.head.line).text.length;return b.head.ch==c&&b.head.line<a.lastLine()?{from:b.head,to:hA(b.head.line+1,0)}:{from:b.head,to:hA(b.head.line,c)}}return{from:b.from(),to:b.to()}})},deleteLine:function(a){h2(a,function(b){return{from:hA(b.from().line,0),to:fa(a.doc,hA(b.to().line+1,0))}})},delLineLeft:function(a){h2(a,function(b){return{from:hA(b.from().line,0),to:b.from()}})},delWrappedLineLeft:function(a){h2(a,function(b){var c=a.charCoords(b.head,"div").top+5,d=a.coordsChar({left:0,top:c},"div");return{from:d,to:b.from()}})},delWrappedLineRight:function(a){h2(a,function(b){var c=a.charCoords(b.head,"div").top+5,d=a.coordsChar({left:a.display.lineDiv.offsetWidth+100,top:c},"div");return{from:b.from(),to:d}})},undo:function(a){a.undo()},redo:function(a){a.redo()},undoSelection:function(a){a.undoSelection()},redoSelection:function(a){a.redoSelection()},goDocStart:function(a){a.extendSelection(hA(a.firstLine(),0))},goDocEnd:function(a){a.extendSelection(hA(a.lastLine()))},goLineStart:function(a){a.extendSelectionsBy(function(b){return cQ(a,b.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(a){a.extendSelectionsBy(function(b){return bG(a,b.head)},{origin:"+move",bias:1})},goLineEnd:function(a){a.extendSelectionsBy(function(b){return dM(a,b.head.line)},{origin:"+move",bias:-1})},goLineRight:function(a){a.extendSelectionsBy(function(b){var c=a.charCoords(b.head,"div").top+5;return a.coordsChar({left:a.display.lineDiv.offsetWidth+100,top:c},"div")},az)},goLineLeft:function(a){a.extendSelectionsBy(function(b){var c=a.charCoords(b.head,"div").top+5;return a.coordsChar({left:0,top:c},"div")},az)},goLineLeftSmart:function(a){a.extendSelectionsBy(function(b){var c=a.charCoords(b.head,"div").top+5,d=a.coordsChar({left:0,top:c},"div");return d.ch<a.getLine(d.line).search(/\S/)?bG(a,b.head):d},az)},goLineUp:function(a){a.moveV(-1,"line")},goLineDown:function(a){a.moveV(1,"line")},goPageUp:function(a){a.moveV(-1,"page")},goPageDown:function(a){a.moveV(1,"page")},goCharLeft:function(a){a.moveH(-1,"char")},goCharRight:function(a){a.moveH(1,"char")},goColumnLeft:function(a){a.moveH(-1,"column")},goColumnRight:function(a){a.moveH(1,"column")},goWordLeft:function(a){a.moveH(-1,"word")},goGroupRight:function(a){a.moveH(1,"group")},goGroupLeft:function(a){a.moveH(-1,"group")},goWordRight:function(a){a.moveH(1,"word")},delCharBefore:function(a){a.deleteH(-1,"char")},delCharAfter:function(a){a.deleteH(1,"char")},delWordBefore:function(a){a.deleteH(-1,"word")},delWordAfter:function(a){a.deleteH(1,"word")},delGroupBefore:function(a){a.deleteH(-1,"group")},delGroupAfter:function(a){a.deleteH(1,"group")},indentAuto:function(a){a.indentSelection("smart")},indentMore:function(a){a.indentSelection("add")},indentLess:function(a){a.indentSelection("subtract")},insertTab:function(a){a.replaceSelection("	")},insertSoftTab:function(f){for(var c=[],d=f.listSelections(),h=f.options.tabSize,b=0;b<d.length;b++){var g=d[b].from(),a=d9(f.getLine(g.line),g.ch,h);c.push(new Array(h-a%h+1).join(" "))}f.replaceSelections(c)},defaultTab:function(a){a.somethingSelected()?a.indentSelection("add"):a.execCommand("insertTab")},transposeChars:function(a){cE(a,function(){for(var d=a.listSelections(),e=[],g=0;g<d.length;g++){var c=d[g].head,f=bN(a.doc,c.line).text;if(f){if(c.ch==f.length&&(c=new hA(c.line,c.ch-1)),c.ch>0){c=new hA(c.line,c.ch+1),a.replaceRange(f.charAt(c.ch-1)+f.charAt(c.ch-2),hA(c.line,c.ch-2),c,"+transpose")}else{if(c.line>a.doc.first){var b=bN(a.doc,c.line-1).text;b&&a.replaceRange(f.charAt(0)+a.doc.lineSeparator()+b.charAt(b.length-1),hA(c.line-1,b.length-1),hA(c.line,1),"+transpose")}}}e.push(new eW(c,c))}a.setSelections(e)})},newlineAndIndent:function(a){cE(a,function(){for(var b=a.listSelections().length,c=0;b>c;c++){var d=a.listSelections()[c];a.replaceRange(a.doc.lineSeparator(),d.anchor,d.head,"+input"),a.indentLine(d.from().line+1,null,!0)}hz(a)})},toggleOverwrite:function(a){a.toggleOverwrite()}},gk=gF.keyMap={};gk.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},gk.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},gk.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},gk.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},gk["default"]=bT?gk.macDefault:gk.pcDefault,gF.normalizeKeyMap=function(h){var m={};for(var b in h){if(h.hasOwnProperty(b)){var d=h[b];if(/^(name|fallthrough|(de|at)tach)$/.test(b)){continue}if("..."==d){delete h[b];continue}for(var g=eK(b.split(" "),ed),c=0;c<g.length;c++){var f,p;c==g.length-1?(p=g.join(" "),f=d):(p=g.slice(0,c+1).join(" "),f="...");var j=m[p];if(j){if(j!=f){throw new Error("Inconsistent bindings for "+p)}}else{m[p]=f}}delete h[b]}}for(var k in m){h[k]=m[k]}return h};var eQ=gF.lookupKey=function(f,c,d,h){c=cp(c);var b=c.call?c.call(f,h):c[f];if(b===!1){return"nothing"}if("..."===b){return"multi"}if(null!=b&&d(b)){return"handled"}if(c.fallthrough){if("[object Array]"!=Object.prototype.toString.call(c.fallthrough)){return eQ(f,c.fallthrough,d,h)}for(var g=0;g<c.fallthrough.length;g++){var a=eQ(f,c.fallthrough[g],d,h);if(a){return a}}}},fk=gF.isModifierKey=function(b){var a="string"==typeof b?b:ez[b.keyCode];return"Ctrl"==a||"Alt"==a||"Shift"==a||"Mod"==a},fR=gF.keyName=function(c,a){if(fI&&34==c.keyCode&&c["char"]){return !1}var b=ez[c.keyCode],d=b;return null==d||c.altGraphKey?!1:(c.altKey&&"Alt"!=b&&(d="Alt-"+d),(hN?c.metaKey:c.ctrlKey)&&"Ctrl"!=b&&(d="Ctrl-"+d),(hN?c.ctrlKey:c.metaKey)&&"Cmd"!=b&&(d="Cmd-"+d),!a&&c.shiftKey&&"Shift"!=b&&(d="Shift-"+d),d)};gF.fromTextArea=function(j,b){function d(){j.value=h.getValue()}if(b=b?hF(b):{},b.value=j.value,!b.tabindex&&j.tabIndex&&(b.tabindex=j.tabIndex),!b.placeholder&&j.placeholder&&(b.placeholder=j.placeholder),null==b.autofocus){var f=em();b.autofocus=f==j||null!=j.getAttribute("autofocus")&&f==document.body}if(j.form&&(cK(j.form,"submit",d),!b.leaveSubmitMethodAlone)){var c=j.form,e=c.submit;try{var k=c.submit=function(){d(),c.submit=e,c.submit(),c.submit=k}}catch(g){}}b.finishInit=function(a){a.save=d,a.getTextArea=function(){return j},a.toTextArea=function(){a.toTextArea=isNaN,d(),j.parentNode.removeChild(a.getWrapperElement()),j.style.display="",j.form&&(eX(j.form,"submit",d),"function"==typeof j.form.submit&&(j.form.submit=e))}},j.style.display="none";var h=gF(function(a){j.parentNode.insertBefore(a,j.nextSibling)},b);return h};var cD=gF.StringStream=function(b,a){this.pos=this.start=0,this.string=b,this.tabSize=a||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0};cD.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==this.lineStart},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){return this.pos<this.string.length?this.string.charAt(this.pos++):void 0},eat:function(c){var a=this.string.charAt(this.pos);if("string"==typeof c){var b=a==c}else{var b=a&&(c.test?c.test(a):c(a))}return b?(++this.pos,a):void 0},eatWhile:function(b){for(var a=this.pos;this.eat(b);){}return this.pos>a},eatSpace:function(){for(var a=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));){++this.pos}return this.pos>a},skipToEnd:function(){this.pos=this.string.length},skipTo:function(b){var a=this.string.indexOf(b,this.pos);return a>-1?(this.pos=a,!0):void 0},backUp:function(a){this.pos-=a},column:function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=d9(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?d9(this.string,this.lineStart,this.tabSize):0)},indentation:function(){return d9(this.string,null,this.tabSize)-(this.lineStart?d9(this.string,this.lineStart,this.tabSize):0)},match:function(d,b,c){if("string"!=typeof d){var g=this.string.slice(this.pos).match(d);return g&&g.index>0?null:(g&&b!==!1&&(this.pos+=g[0].length),g)}var a=function(h){return c?h.toLowerCase():h},f=this.string.substr(this.pos,d.length);return a(f)==a(d)?(b!==!1&&(this.pos+=d.length),!0):void 0},current:function(){return this.string.slice(this.start,this.pos)},hideFirstChars:function(b,a){this.lineStart+=b;try{return a()}finally{this.lineStart-=b}}};var e4=0,aU=gF.TextMarker=function(b,a){this.lines=[],this.type=a,this.doc=b,this.id=++e4};cL(aU),aU.prototype.clear=function(){if(!this.explicitlyCleared){var h=this.doc.cm,m=h&&!h.curOp;if(m&&aC(h),fc(this,"clear")){var b=this.find();b&&fM(this,"clear",b.from,b.to)}for(var d=null,g=null,c=0;c<this.lines.length;++c){var f=this.lines[c],p=gu(f.markedSpans,this);h&&!this.collapsed?g5(h,bv(f),"text"):h&&(null!=p.to&&(g=bv(f)),null!=p.from&&(d=bv(f))),f.markedSpans=fD(f.markedSpans,p),null==p.from&&this.collapsed&&!bf(this.doc,f)&&h&&fH(f,hU(h.display))}if(h&&this.collapsed&&!h.options.lineWrapping){for(var c=0;c<this.lines.length;++c){var j=hX(this.lines[c]),k=gz(j);k>h.display.maxLineLength&&(h.display.maxLine=j,h.display.maxLineLength=k,h.display.maxLineChanged=!0)}}null!=d&&h&&this.collapsed&&aJ(h,d,g+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,h&&cM(h.doc)),h&&fM(h,"markerCleared",h,this),m&&bb(h),this.parent&&this.parent.clear()}},aU.prototype.find=function(f,c){null==f&&"bookmark"==this.type&&(f=1);for(var d,h,b=0;b<this.lines.length;++b){var g=this.lines[b],a=gu(g.markedSpans,this);if(null!=a.from&&(d=hA(c?g:bv(g),a.from),-1==f)){return d}if(null!=a.to&&(h=hA(c?g:bv(g),a.to),1==f)){return h}}return d&&{from:d,to:h}},aU.prototype.changed=function(){var c=this.find(-1,!0),a=this,b=this.doc.cm;c&&b&&cE(b,function(){var h=c.line,e=bv(c.line),g=gM(b,e);if(g&&(cN(g),b.curOp.selectionChanged=b.curOp.forceUpdate=!0),b.curOp.updateMaxLine=!0,!bf(a.doc,h)&&null!=a.height){var d=a.height;a.height=null;var f=dE(a)-d;f&&fH(h,h.height+f)}})},aU.prototype.attachLine=function(b){if(!this.lines.length&&this.doc.cm){var a=this.doc.cm.curOp;a.maybeHiddenMarkers&&-1!=hR(a.maybeHiddenMarkers,this)||(a.maybeUnhiddenMarkers||(a.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(b)},aU.prototype.detachLine=function(b){if(this.lines.splice(hR(this.lines,b),1),!this.lines.length&&this.doc.cm){var a=this.doc.cm.curOp;(a.maybeHiddenMarkers||(a.maybeHiddenMarkers=[])).push(this)}};var e4=0,dz=gF.SharedTextMarker=function(c,a){this.markers=c,this.primary=a;for(var b=0;b<c.length;++b){c[b].parent=this}};cL(dz),dz.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var a=0;a<this.markers.length;++a){this.markers[a].clear()}fM(this,"clear")}},dz.prototype.find=function(b,a){return this.primary.find(b,a)};var hY=gF.LineWidget=function(c,a,b){if(b){for(var d in b){b.hasOwnProperty(d)&&(this[d]=b[d])}}this.doc=c,this.node=a};cL(hY),hY.prototype.clear=function(){var d=this.doc.cm,b=this.line.widgets,c=this.line,g=bv(c);if(null!=g&&b){for(var a=0;a<b.length;++a){b[a]==this&&b.splice(a--,1)}b.length||(c.widgets=null);var f=dE(this);fH(c,Math.max(0,c.height-f)),d&&cE(d,function(){fJ(d,c,-f),g5(d,g,"widget")})}},hY.prototype.changed=function(){var c=this.height,a=this.doc.cm,b=this.line;this.height=null;var d=dE(this)-c;d&&(fH(b,b.height+d),a&&cE(a,function(){a.curOp.forceUpdate=!0,fJ(a,b,d)}))};var g3=gF.Line=function(c,a,b){this.text=c,gh(this,a),this.height=b?b(this):1};cL(g3),g3.prototype.lineNo=function(){return bv(this)};var aG={},ad={};b9.prototype={chunkSize:function(){return this.lines.length},removeInner:function(d,b){for(var c=d,f=d+b;f>c;++c){var a=this.lines[c];this.height-=a.height,e9(a),fM(a,"delete")}this.lines.splice(d,b)},collapse:function(a){a.push.apply(a,this.lines)},insertInner:function(c,a,b){this.height+=b,this.lines=this.lines.slice(0,c).concat(a).concat(this.lines.slice(c));for(var d=0;d<a.length;++d){a[d].parent=this}},iterN:function(c,a,b){for(var d=c+a;d>c;++c){if(b(this.lines[c])){return !0}}}},ak.prototype={chunkSize:function(){return this.size},removeInner:function(g,c){this.size-=c;for(var f=0;f<this.children.length;++f){var j=this.children[f],b=j.chunkSize();if(b>g){var h=Math.min(c,b-g),a=j.height;if(j.removeInner(g,h),this.height-=a-j.height,b==h&&(this.children.splice(f--,1),j.parent=null),0==(c-=h)){break}g=0}else{g-=b}}if(this.size-c<25&&(this.children.length>1||!(this.children[0] instanceof b9))){var d=[];this.collapse(d),this.children=[new b9(d)],this.children[0].parent=this}},collapse:function(b){for(var a=0;a<this.children.length;++a){this.children[a].collapse(b)}},insertInner:function(g,c,f){this.size+=c.length,this.height+=f;for(var j=0;j<this.children.length;++j){var b=this.children[j],h=b.chunkSize();if(h>=g){if(b.insertInner(g,c,f),b.lines&&b.lines.length>50){for(;b.lines.length>50;){var a=b.lines.splice(b.lines.length-25,25),d=new b9(a);b.height-=d.height,this.children.splice(j+1,0,d),d.parent=this}this.maybeSpill()}break}g-=h}},maybeSpill:function(){if(!(this.children.length<=10)){var d=this;do{var b=d.children.splice(d.children.length-5,5),c=new ak(b);if(d.parent){d.size-=c.size,d.height-=c.height;var f=hR(d.parent.children,d);d.parent.children.splice(f+1,0,c)}else{var a=new ak(d.children);a.parent=d,d.children=[a,c],d=a}c.parent=d.parent}while(d.children.length>10);d.parent.maybeSpill()}},iterN:function(f,c,d){for(var h=0;h<this.children.length;++h){var b=this.children[h],g=b.chunkSize();if(g>f){var a=Math.min(c,g-f);if(b.iterN(f,a,d)){return !0}if(0==(c-=a)){break}f=0}else{f-=g}}}};var bg=0,dV=gF.Doc=function(d,b,c,f){if(!(this instanceof dV)){return new dV(d,b,c,f)}null==c&&(c=0),ak.call(this,[new b9([new g3("",null)])]),this.first=c,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.frontier=c;var a=hA(c,0);this.sel=fX(a),this.history=new cV(null),this.id=++bg,this.modeOption=b,this.lineSep=f,this.extend=!1,"string"==typeof d&&(d=this.splitLines(d)),cu(this,{from:a,to:a,text:d}),d8(this,fX(a),hk)};dV.prototype=hs(ak.prototype,{constructor:dV,iter:function(c,a,b){b?this.iterN(c-this.first,a-c,b):this.iterN(this.first,this.first+this.size,c)},insert:function(c,a){for(var b=0,d=0;d<a.length;++d){b+=a[d].height}this.insertInner(c-this.first,a,b)},remove:function(b,a){this.removeInner(b-this.first,a)},getValue:function(b){var a=gB(this,this.first,this.first+this.size);return b===!1?a:a.join(b||this.lineSeparator())},setValue:aX(function(c){var a=hA(this.first,0),b=this.first+this.size-1;dB(this,{from:a,to:hA(b,bN(this,b).text.length),text:this.splitLines(c),origin:"setValue",full:!0},!0),d8(this,fX(a))}),replaceRange:function(c,a,b,d){a=fa(this,a),b=b?fa(this,b):a,eS(this,c,a,b,d)},getRange:function(c,a,b){var d=eq(this,fa(this,c),fa(this,a));return b===!1?d:d.join(b||this.lineSeparator())},getLine:function(b){var a=this.getLineHandle(b);return a&&a.text},getLineHandle:function(a){return dF(this,a)?bN(this,a):void 0},getLineNumber:function(a){return bv(a)},getLineHandleVisualStart:function(a){return"number"==typeof a&&(a=bN(this,a)),hX(a)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(a){return fa(this,a)},getCursor:function(c){var a,b=this.sel.primary();return a=null==c||"head"==c?b.head:"anchor"==c?b.anchor:"end"==c||"to"==c||c===!1?b.to():b.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:aX(function(c,a,b){dX(this,fa(this,"number"==typeof c?hA(c,a||0):c),null,b)}),setSelection:aX(function(c,a,b){dX(this,fa(this,c),fa(this,a||c),b)}),extendSelection:aX(function(c,a,b){aI(this,fa(this,c),a&&fa(this,a),b)}),extendSelections:aX(function(b,a){am(this,h0(this,b),a)}),extendSelectionsBy:aX(function(c,a){var b=eK(this.sel.ranges,c);am(this,h0(this,b),a)}),setSelections:aX(function(d,b,c){if(d.length){for(var f=0,a=[];f<d.length;f++){a[f]=new eW(fa(this,d[f].anchor),fa(this,d[f].head))}null==b&&(b=Math.min(d.length-1,this.sel.primIndex)),d8(this,fv(a,b),c)}}),addSelection:aX(function(c,a,b){var d=this.sel.ranges.slice(0);d.push(new eW(fa(this,c),fa(this,a||c))),d8(this,fv(d,d.length-1),b)}),getSelection:function(d){for(var b,c=this.sel.ranges,f=0;f<c.length;f++){var a=eq(this,c[f].from(),c[f].to());b=b?b.concat(a):a}return d===!1?b:b.join(d||this.lineSeparator())},getSelections:function(d){for(var b=[],c=this.sel.ranges,f=0;f<c.length;f++){var a=eq(this,c[f].from(),c[f].to());d!==!1&&(a=a.join(d||this.lineSeparator())),b[f]=a}return b},replaceSelection:function(d,b,c){for(var f=[],a=0;a<this.sel.ranges.length;a++){f[a]=d}this.replaceSelections(f,b,c||"+input")},replaceSelections:aX(function(g,c,f){for(var j=[],b=this.sel,h=0;h<b.ranges.length;h++){var a=b.ranges[h];j[h]={from:a.from(),to:a.to(),text:this.splitLines(g[h]),origin:f}}for(var d=c&&"end"!=c&&dQ(this,j,c),h=j.length-1;h>=0;h--){dB(this,j[h])}d?dI(this,d):this.cm&&hz(this.cm)}),undo:aX(function(){fp(this,"undo")}),redo:aX(function(){fp(this,"redo")}),undoSelection:aX(function(){fp(this,"undo",!0)}),redoSelection:aX(function(){fp(this,"redo",!0)}),setExtending:function(a){this.extend=a},getExtending:function(){return this.extend},historySize:function(){for(var c=this.history,a=0,b=0,d=0;d<c.done.length;d++){c.done[d].ranges||++a}for(var d=0;d<c.undone.length;d++){c.undone[d].ranges||++b}return{undo:a,redo:b}},clearHistory:function(){this.history=new cV(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(a){return a&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(a){return this.history.generation==(a||this.cleanGeneration)},getHistory:function(){return{done:aV(this.history.done),undone:aV(this.history.undone)}},setHistory:function(b){var a=this.history=new cV(this.history.maxGeneration);a.done=aV(b.done.slice(0),null,!0),a.undone=aV(b.undone.slice(0),null,!0)},addLineClass:aX(function(c,a,b){return by(this,c,"gutter"==a?"gutter":"class",function(d){var f="text"==a?"textClass":"background"==a?"bgClass":"gutter"==a?"gutterClass":"wrapClass";if(d[f]){if(cx(b).test(d[f])){return !1}d[f]+=" "+b}else{d[f]=b}return !0})}),removeLineClass:aX(function(c,a,b){return by(this,c,"gutter"==a?"gutter":"class",function(g){var j="text"==a?"textClass":"background"==a?"bgClass":"gutter"==a?"gutterClass":"wrapClass",f=g[j];if(!f){return !1}if(null==b){g[j]=null}else{var h=f.match(cx(b));if(!h){return !1}var d=h.index+h[0].length;g[j]=f.slice(0,h.index)+(h.index&&d!=f.length?" ":"")+f.slice(d)||null}return !0})}),addLineWidget:aX(function(c,a,b){return d1(this,c,a,b)}),removeLineWidget:function(a){a.clear()},markText:function(c,a,b){return b6(this,fa(this,c),fa(this,a),b,b&&b.type||"range")},setBookmark:function(c,a){var b={replacedWith:a&&(null==a.nodeType?a.widget:a),insertLeft:a&&a.insertLeft,clearWhenEmpty:!1,shared:a&&a.shared,handleMouseEvents:a&&a.handleMouseEvents};return c=fa(this,c),b6(this,c,c,b,"bookmark")},findMarksAt:function(d){d=fa(this,d);var b=[],c=bN(this,d.line).markedSpans;if(c){for(var f=0;f<c.length;++f){var a=c[f];(null==a.from||a.from<=d.ch)&&(null==a.to||a.to>=d.ch)&&b.push(a.marker.parent||a.marker)}}return b},findMarks:function(d,b,c){d=fa(this,d),b=fa(this,b);var f=[],a=d.line;return this.iter(d.line,b.line+1,function(i){var g=i.markedSpans;if(g){for(var h=0;h<g.length;h++){var e=g[h];null!=e.to&&a==d.line&&d.ch>e.to||null==e.from&&a!=d.line||null!=e.from&&a==b.line&&e.from>b.ch||c&&!c(e.marker)||f.push(e.marker.parent||e.marker)}}++a}),f},getAllMarks:function(){var a=[];return this.iter(function(b){var c=b.markedSpans;if(c){for(var d=0;d<c.length;++d){null!=c[d].from&&a.push(c[d].marker)}}}),a},posFromIndex:function(c){var a,b=this.first;return this.iter(function(e){var d=e.text.length+1;return d>c?(a=c,!0):(c-=d,void ++b)}),fa(this,hA(b,a))},indexFromPos:function(b){b=fa(this,b);var a=b.ch;return b.line<this.first||b.ch<0?0:(this.iter(this.first,b.line,function(c){a+=c.text.length+1}),a)},copy:function(b){var a=new dV(gB(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep);return a.scrollTop=this.scrollTop,a.scrollLeft=this.scrollLeft,a.sel=this.sel,a.extend=!1,b&&(a.history.undoDepth=this.history.undoDepth,a.setHistory(this.getHistory())),a},linkedDoc:function(c){c||(c={});var a=this.first,b=this.first+this.size;null!=c.from&&c.from>a&&(a=c.from),null!=c.to&&c.to<b&&(b=c.to);var d=new dV(gB(this,a,b),c.mode||this.modeOption,a,this.lineSep);return c.sharedHist&&(d.history=this.history),(this.linked||(this.linked=[])).push({doc:d,sharedHist:c.sharedHist}),d.linked=[{doc:this,isParent:!0,sharedHist:c.sharedHist}],cg(d,c3(this)),d},unlinkDoc:function(b){if(b instanceof gF&&(b=b.doc),this.linked){for(var c=0;c<this.linked.length;++c){var d=this.linked[c];if(d.doc==b){this.linked.splice(c,1),b.unlinkDoc(this),bK(c3(this));break}}}if(b.history==this.history){var a=[b.id];c5(b,function(f){a.push(f.id)},!0),b.history=new cV(null),b.history.done=aV(this.history.done,a),b.history.undone=aV(this.history.undone,a)}},iterLinkedDocs:function(a){c5(this,a)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(a){return this.lineSep?a.split(this.lineSep):fA(a)},lineSeparator:function(){return this.lineSep||"\n"}}),dV.prototype.eachLine=dV.prototype.iter;var fL="iter insert remove copy getEditor constructor".split(" ");for(var dG in dV.prototype){dV.prototype.hasOwnProperty(dG)&&hR(fL,dG)<0&&(gF.prototype[dG]=function(a){return function(){return a.apply(this.doc,arguments)}}(dV.prototype[dG]))}cL(dV);var d2=gF.e_preventDefault=function(a){a.preventDefault?a.preventDefault():a.returnValue=!1},fw=gF.e_stopPropagation=function(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0},fb=gF.e_stop=function(a){d2(a),fw(a)},cK=gF.on=function(d,b,c){if(d.addEventListener){d.addEventListener(b,c,!1)}else{if(d.attachEvent){d.attachEvent("on"+b,c)}else{var f=d._handlers||(d._handlers={}),a=f[b]||(f[b]=[]);a.push(c)}}},bW=[],eX=gF.off=function(d,b,c){if(d.removeEventListener){d.removeEventListener(b,c,!1)}else{if(d.detachEvent){d.detachEvent("on"+b,c)}else{for(var f=dW(d,b,!1),a=0;a<f.length;++a){if(f[a]==c){f.splice(a,1);break}}}}},a1=gF.signal=function(d,b){var c=dW(d,b,!0);if(c.length){for(var f=Array.prototype.slice.call(arguments,2),a=0;a<c.length;++a){c[a].apply(null,f)}}},hQ=null,eJ=30,aN=gF.Pass={toString:function(){return"CodeMirror.Pass"}},hk={scroll:!1},hC={origin:"*mouse"},az={origin:"+move"};bX.prototype.set=function(b,a){clearTimeout(this.id),this.id=setTimeout(a,b)};var d9=gF.countColumn=function(g,c,f,j,b){null==c&&(c=g.search(/[^\s\u00a0]/),-1==c&&(c=g.length));for(var h=j||0,a=b||0;;){var d=g.indexOf("	",h);if(0>d||d>=c){return a+(c-h)}a+=d-h,a+=f-a%f,h=d+1}},bB=gF.findColumn=function(f,c,d){for(var h=0,b=0;;){var g=f.indexOf("	",h);-1==g&&(g=f.length);var a=g-h;if(g==f.length||b+a>=c){return h+Math.min(a,c-b)}if(b+=g-h,b+=d-b%d,h=g+1,b>=c){return h}}},h5=[""],dq=function(a){a.select()};e8?dq=function(a){a.selectionStart=0,a.selectionEnd=a.value.length}:gY&&(dq=function(b){try{b.select()}catch(a){}});var cZ,fY=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,eh=gF.isWordChar=function(a){return/\w/.test(a)||a>""&&(a.toUpperCase()!=a.toLowerCase()||fY.test(a))},cw=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;cZ=document.createRange?function(d,b,c,f){var a=document.createRange();return a.setEnd(f||d,c),a.setStart(d,b),a}:function(d,b,c){var f=document.body.createTextRange();try{f.moveToElementText(d.parentNode)}catch(a){return f}return f.collapse(!0),f.moveEnd("character",c),f.moveStart("character",b),f};var cb=gF.contains=function(b,a){if(3==a.nodeType&&(a=a.parentNode),b.contains){return b.contains(a)}do{if(11==a.nodeType&&(a=a.host),a==b){return !0}}while(a=a.parentNode)};gY&&11>aE&&(em=function(){try{return document.activeElement}catch(a){return document.body}});var ap,c8,ck=gF.rmClass=function(d,b){var c=d.className,f=cx(b).exec(c);if(f){var a=c.slice(f.index+f[0].length);d.className=c.slice(0,f.index)+(a?f[1]+a:"")}},bP=gF.addClass=function(c,a){var b=c.className;cx(a).test(b)||(c.className+=(b?" ":"")+a)},ev=!1,gE=function(){if(gY&&9>aE){return !1}var a=ds("div");return"draggable" in a||"dragDrop" in a}(),fA=gF.splitLines=3!="\n\nb".split(/\n/).length?function(f){for(var c=0,d=[],h=f.length;h>=c;){var b=f.indexOf("\n",c);-1==b&&(b=f.length);var g=f.slice(c,"\r"==f.charAt(b-1)?b-1:b),a=g.indexOf("\r");-1!=a?(d.push(g.slice(0,a)),c+=a+1):(d.push(g),c=b+1)}return d}:function(a){return a.split(/\r\n?|\n/)},bm=window.getSelection?function(b){try{return b.selectionStart!=b.selectionEnd}catch(a){return !1}}:function(c){try{var a=c.ownerDocument.selection.createRange()}catch(b){}return a&&a.parentElement()==c?0!=a.compareEndPoints("StartToEnd",a):!1},b0=function(){var a=ds("div");return"oncopy" in a?!0:(a.setAttribute("oncopy","return;"),"function"==typeof a.oncopy)}(),c7=null,ez=gF.keyNames={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"};!function(){for(var a=0;10>a;a++){ez[a+48]=ez[a+96]=String(a)}for(var a=65;90>=a;a++){ez[a]=String.fromCharCode(a)}for(var a=1;12>=a;a++){ez[a+111]=ez[a+63235]="F"+a}}();var cO,dK=function(){function h(a){return 247>=a?b.charAt(a):a>=1424&&1524>=a?"R":a>=1536&&1773>=a?d.charAt(a-1536):a>=1774&&2220>=a?"r":a>=8192&&8203>=a?"w":8204==a?"b":"L"}function m(l,a,i){this.level=l,this.from=a,this.to=i}var b="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",d="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmm",g=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,c=/[stwN]/,f=/[LRr]/,p=/[Lb1n]/,j=/[1n]/,k="L";return function(u){if(!g.test(u)){return !1}for(var A,H=u.length,D=[],F=0;H>F;++F){D.push(A=h(u.charCodeAt(F)))}for(var F=0,G=k;H>F;++F){var A=D[F];"m"==A?D[F]=G:G=A}for(var F=0,z=k;H>F;++F){var A=D[F];"1"==A&&"r"==z?D[F]="n":f.test(A)&&(z=A,"r"==A&&(D[F]="R"))}for(var F=1,G=D[0];H-1>F;++F){var A=D[F];"+"==A&&"1"==G&&"1"==D[F+1]?D[F]="1":","!=A||G!=D[F+1]||"1"!=G&&"n"!=G||(D[F]=G),G=A}for(var F=0;H>F;++F){var A=D[F];if(","==A){D[F]="N"}else{if("%"==A){for(var E=F+1;H>E&&"%"==D[E];++E){}for(var s=F&&"!"==D[F-1]||H>E&&"1"==D[E]?"1":"N",B=F;E>B;++B){D[B]=s}F=E-1}}}for(var F=0,z=k;H>F;++F){var A=D[F];"L"==z&&"1"==A?D[F]="L":f.test(A)&&(z=A)}for(var F=0;H>F;++F){if(c.test(D[F])){for(var E=F+1;H>E&&c.test(D[E]);++E){}for(var l="L"==(F?D[F-1]:k),I="L"==(H>E?D[E]:k),s=l||I?"L":"R",B=F;E>B;++B){D[B]=s}F=E-1}}for(var q,o=[],F=0;H>F;){if(p.test(D[F])){var t=F;for(++F;H>F&&p.test(D[F]);++F){}o.push(new m(0,t,F))}else{var e=F,i=o.length;for(++F;H>F&&"L"!=D[F];++F){}for(var B=e;F>B;){if(j.test(D[B])){B>e&&o.splice(i,0,new m(1,e,B));var a=B;for(++B;F>B&&j.test(D[B]);++B){}o.splice(i,0,new m(2,a,B)),e=B}else{++B}}F>e&&o.splice(i,0,new m(1,e,F))}}return 1==o[0].level&&(q=u.match(/^\s+/))&&(o[0].from=q[0].length,o.unshift(new m(0,0,q[0].length))),1==a2(o).level&&(q=u.match(/\s+$/))&&(a2(o).to-=q[0].length,o.push(new m(0,H-q[0].length,H))),2==o[0].level&&o.unshift(new m(1,o[0].to,o[0].to)),o[0].level!=a2(o).level&&o.push(new m(o[0].level,H,H)),o}}();return gF.version="5.13.2",gF});!function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],b):b(CodeMirror)}(function(b){b.defineMode("rpm-changes",function(){var e=/^-+$/,d=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)  ?\d{1,2} \d{2}:\d{2}(:\d{2})? [A-Z]{3,4} \d{4} - /,f=/^[\w+.-]+@[\w.-]+/;return{token:function(a){if(a.sol()){if(a.match(e)){return"tag"}if(a.match(d)){return"tag"}}return a.match(f)?"string":(a.next(),null)}}}),b.defineMIME("text/x-rpm-changes","rpm-changes"),b.defineMode("rpm-spec",function(){var h=/^(i386|i586|i686|x86_64|ppc64le|ppc64|ppc|ia64|s390x|s390|sparc64|sparcv9|sparc|noarch|alphaev6|alpha|hppa|mipsel)/,g=/^[a-zA-Z0-9()]+:/,l=/^%(debug_package|package|description|prep|build|install|files|clean|changelog|preinstall|preun|postinstall|postun|pretrans|posttrans|pre|post|triggerin|triggerun|verifyscript|check|triggerpostun|triggerprein|trigger)/,k=/^%(ifnarch|ifarch|if)/,j=/^%(else|endif)/,i=/^(\!|\?|\<\=|\<|\>\=|\>|\=\=|\&\&|\|\|)/;return{startState:function(){return{controlFlow:!1,macroParameters:!1,section:!1}},token:function(d,c){var a=d.peek();if("#"==a){return d.skipToEnd(),"comment"}if(d.sol()){if(d.match(g)){return"header"}if(d.match(l)){return"atom"}}if(d.match(/^\$\w+/)){return"def"}if(d.match(/^\$\{\w+\}/)){return"def"}if(d.match(j)){return"keyword"}if(d.match(k)){return c.controlFlow=!0,"keyword"}if(c.controlFlow){if(d.match(i)){return"operator"}if(d.match(/^(\d+)/)){return"number"}d.eol()&&(c.controlFlow=!1)}if(d.match(h)){return d.eol()&&(c.controlFlow=!1),"number"}if(d.match(/^%[\w]+/)){return d.match(/^\(/)&&(c.macroParameters=!0),"keyword"}if(c.macroParameters){if(d.match(/^\d+/)){return"number"}if(d.match(/^\)/)){return c.macroParameters=!1,"keyword"}}return d.match(/^%\{\??[\w \-\:\!]+\}/)?(d.eol()&&(c.controlFlow=!1),"def"):(d.next(),null)}}}),b.defineMIME("text/x-rpm-spec","rpm-spec")});!function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],b):b(CodeMirror)}(function(e){function d(h,g,k){var i,j=h.getWrapperElement();return i=j.appendChild(document.createElement("div")),i.className=k?"CodeMirror-dialog CodeMirror-dialog-bottom":"CodeMirror-dialog CodeMirror-dialog-top","string"==typeof g?i.innerHTML=g:i.appendChild(g),i}function f(g,c){g.state.currentNotificationClose&&g.state.currentNotificationClose(),g.state.currentNotificationClose=c}e.defineExtension("openDialog",function(r,q,p){function c(g){if("string"==typeof g){b.value=g}else{if(n){return}n=!0,o.parentNode.removeChild(o),m.focus(),p.onClose&&p.onClose(o)}}p||(p={}),f(this,null);var a,o=d(this,r,p.bottom),n=!1,m=this,b=o.getElementsByTagName("input")[0];return b?(b.focus(),p.value&&(b.value=p.value,p.selectValueOnOpen!==!1&&b.select()),p.onInput&&e.on(b,"input",function(g){p.onInput(g,b.value,c)}),p.onKeyUp&&e.on(b,"keyup",function(g){p.onKeyUp(g,b.value,c)}),e.on(b,"keydown",function(g){p&&p.onKeyDown&&p.onKeyDown(g,b.value,c)||((27==g.keyCode||p.closeOnEnter!==!1&&13==g.keyCode)&&(b.blur(),e.e_stop(g),c()),13==g.keyCode&&q(b.value,g))}),p.closeOnBlur!==!1&&e.on(b,"blur",c)):(a=o.getElementsByTagName("button")[0])&&(e.on(a,"click",function(){c(),m.focus()}),p.closeOnBlur!==!1&&e.on(a,"blur",c),a.focus()),c}),e.defineExtension("openConfirm",function(v,u,t){function c(){q||(q=!0,s.parentNode.removeChild(s),p.focus())}f(this,null);var s=d(this,v,t&&t.bottom),r=s.getElementsByTagName("button"),q=!1,p=this,o=1;r[0].focus();for(var b=0;b<r.length;++b){var a=r[b];!function(g){e.on(a,"click",function(h){e.e_preventDefault(h),c(),g&&g(p)})}(u[b]),e.on(a,"blur",function(){--o,setTimeout(function(){o<=0&&c()},200)}),e.on(a,"focus",function(){++o})}}),e.defineExtension("openNotification",function(n,m){function a(){k||(k=!0,clearTimeout(c),l.parentNode.removeChild(l))}f(this,a);var c,l=d(this,n,m&&m.bottom),k=!1,b=m&&"undefined"!==typeof m.duration?m.duration:5000;return e.on(l,"click",function(g){e.e_preventDefault(g),a()}),b&&(c=setTimeout(a,b)),a})});!function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror"),require("./searchcursor"),require("../dialog/dialog")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","./searchcursor","../dialog/dialog"],b):b(CodeMirror)}(function(P){function O(d,c){return"string"==typeof d?d=new RegExp(d.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),c?"gi":"g"):d.global||(d=new RegExp(d.source,d.ignoreCase?"gi":"g")),{token:function(a){d.lastIndex=a.pos;var e=d.exec(a.string);return e&&e.index==a.pos?(a.pos+=e[0].length||1,"searching"):void (e?a.pos=e.index:a.skipToEnd())}}}function N(){this.posFrom=this.posTo=this.lastQuery=this.query=null,this.overlay=null}function M(b){return b.state.search||(b.state.search=new N)}function L(b){return"string"==typeof b&&b==b.toLowerCase()}function K(e,d,f){return e.getSearchCursor(d,f,L(d))}function J(f,e,h,g){f.openDialog(e,g,{value:h,selectValueOnOpen:!0,closeOnEnter:!1,onClose:function(){A(f)}})}function I(g,f,j,i,h){g.openDialog?g.openDialog(f,h,{value:i,selectValueOnOpen:!0}):h(prompt(j,i))}function H(f,e,h,g){f.openConfirm?f.openConfirm(e,g):confirm(h)&&g[0]()}function G(b){return b.replace(/\\(.)/g,function(d,c){return"n"==c?"\n":"r"==c?"\r":c})}function F(e){var d=e.match(/^\/(.*)\/([a-z]*)$/);if(d){try{e=new RegExp(d[1],-1==d[2].indexOf("i")?"":"i")}catch(f){}}else{e=G(e)}return("string"==typeof e?""==e:e.test(""))&&(e=/x^/),e}function D(b,f,e){f.queryText=e,f.query=F(e),b.removeOverlay(f.overlay,L(f.query)),f.overlay=O(f.query,L(f.query)),b.addOverlay(f.overlay),b.showMatchesOnScrollbar&&(f.annotate&&(f.annotate.clear(),f.annotate=null),f.annotate=b.showMatchesOnScrollbar(f.query,L(f.query)))}function C(a,l,k){var h=M(a);if(h.query){return B(a,l)}var g=a.getSelection()||h.lastQuery;if(k&&a.openDialog){var d=null;J(a,E,g,function(e,b){P.e_stop(b),e&&(e!=h.queryText&&D(a,h,e),d&&(d.style.opacity=1),B(a,b.shiftKey,function(f,j){var i;j.line<3&&document.querySelector&&(i=a.display.wrapper.querySelector(".CodeMirror-dialog"))&&i.getBoundingClientRect().bottom-4>a.cursorCoords(j,"window").top&&((d=i).style.opacity=0.4)}))})}else{I(a,E,"Search for:",g,function(b){b&&!h.query&&a.operation(function(){D(a,h,b),h.posFrom=h.posTo=a.getCursor(),B(a,l)})})}}function B(a,f,d){a.operation(function(){var c=M(a),b=K(a,c.query,f?c.posFrom:c.posTo);(b.find(f)||(b=K(a,c.query,f?P.Pos(a.lastLine()):P.Pos(a.firstLine(),0)),b.find(f)))&&(a.setSelection(b.from(),b.to()),a.scrollIntoView({from:b.from(),to:b.to()},20),c.posFrom=b.from(),c.posTo=b.to(),d&&d(b.from(),b.to()))})}function A(b){b.operation(function(){var a=M(b);a.lastQuery=a.query,a.query&&(a.query=a.queryText=null,b.removeOverlay(a.overlay),a.annotate&&(a.annotate.clear(),a.annotate=null))})}function w(e,d,f){e.operation(function(){for(var b=K(e,d);b.findNext();){if("string"!=typeof d){var a=e.getRange(b.from(),b.to()).match(d);b.replace(f.replace(/\$(\d)/g,function(g,c){return a[c]}))}else{b.replace(f)}}})}function v(f,d){if(!f.getOption("readOnly")){var h=f.getSelection()||M(f).lastQuery,g=d?"Replace all:":"Replace:";I(f,g+z,g,h,function(a){a&&(a=F(a),I(f,y,"Replace with:","",function(j){if(j=G(j),d){w(f,a,j)}else{A(f);var i=K(f,a,f.getCursor()),c=function(){var k,e=i.from();!(k=i.findNext())&&(i=K(f,a),!(k=i.findNext())||e&&i.from().line==e.line&&i.from().ch==e.ch)||(f.setSelection(i.from(),i.to()),f.scrollIntoView({from:i.from(),to:i.to()}),H(f,x,"Replace?",[function(){b(k)},c,function(){w(f,a,j)}]))},b=function(e){i.replace("string"==typeof a?j:j.replace(/\$(\d)/g,function(k,l){return e[l]})),c()};c()}}))})}}var E='Search: <input type="text" style="width: 10em" class="CodeMirror-search-field"/> <span style="color: #888" class="CodeMirror-search-hint">(Use /re/ syntax for regexp search)</span>',z=' <input type="text" style="width: 10em" class="CodeMirror-search-field"/> <span style="color: #888" class="CodeMirror-search-hint">(Use /re/ syntax for regexp search)</span>',y='With: <input type="text" style="width: 10em" class="CodeMirror-search-field"/>',x="Replace? <button>Yes</button> <button>No</button> <button>All</button> <button>Stop</button>";P.commands.find=function(b){A(b),C(b)},P.commands.findPersistent=function(b){A(b),C(b,!1,!0)},P.commands.findNext=C,P.commands.findPrev=function(b){C(b,!0)},P.commands.clearSearch=A,P.commands.replace=v,P.commands.replaceAll=function(b){v(b,!0)}});!function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],b):b(CodeMirror)}(function(f){function h(b,p,o,n){if(this.atOccurrence=!1,this.doc=b,null==n&&"string"==typeof p&&(n=!1),o=o?b.clipPos(o):e(0,0),this.pos={from:o,to:o},"string"!=typeof p){p.global||(p=new RegExp(p.source,p.ignoreCase?"ig":"g")),this.matches=function(v,u){if(v){p.lastIndex=0;for(var r,q,t=b.getLine(u.line).slice(0,u.ch),s=0;;){p.lastIndex=s;var c=p.exec(t);if(!c){break}if(r=c,q=r.index,s=r.index+(r[0].length||1),s==t.length){break}}var a=r&&r[0].length||0;a||(0==q&&0==t.length?r=void 0:q!=b.getLine(u.line).length&&a++)}else{p.lastIndex=u.ch;var t=b.getLine(u.line),r=p.exec(t),a=r&&r[0].length||0,q=r&&r.index;q+a==t.length||a||(a=1)}return r&&a?{from:e(u.line,q),to:e(u.line,q+a),match:r}:void 0}}else{var m=p;n&&(p=p.toLowerCase());var l=n?function(c){return c.toLowerCase()}:function(c){return c},k=p.split("\n");if(1==k.length){this.matches=p.length?function(s,r){if(s){var q=b.getLine(r.line).slice(0,r.ch),c=l(q),a=c.lastIndexOf(p);if(a>-1){return a=g(q,c,a),{from:e(r.line,a),to:e(r.line,a+m.length)}}}else{var q=b.getLine(r.line).slice(r.ch),c=l(q),a=c.indexOf(p);if(a>-1){return a=g(q,c,a)+r.ch,{from:e(r.line,a),to:e(r.line,a+m.length)}}}}:function(){}}else{var d=m.split("\n");this.matches=function(v,u){var t=k.length-1;if(v){if(u.line-(k.length-1)<b.firstLine()){return}if(l(b.getLine(u.line).slice(0,d[t].length))!=k[k.length-1]){return}for(var s=e(u.line,d[t].length),r=u.line-1,q=t-1;q>=1;--q,--r){if(k[q]!=l(b.getLine(r))){return}}var j=b.getLine(r),i=j.length-d[0].length;if(l(j.slice(i))!=k[0]){return}return{from:e(r,i),to:s}}if(!(u.line+(k.length-1)>b.lastLine())){var j=b.getLine(u.line),i=j.length-d[0].length;if(l(j.slice(i))==k[0]){for(var a=e(u.line,i),r=u.line+1,q=1;q<t;++q,++r){if(k[q]!=l(b.getLine(r))){return}}if(l(b.getLine(r).slice(0,d[t].length))==k[t]){return{from:a,to:e(r,d[t].length)}}}}}}}}function g(j,i,m){if(j.length==i.length){return m}for(var l=Math.min(m,j.length);;){var k=j.slice(0,l).toLowerCase().length;if(k<m){++l}else{if(!(k>m)){return l}--l}}}var e=f.Pos;h.prototype={findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(b){function j(c){var m=e(c,0);return l.pos={from:m,to:m},l.atOccurrence=!1,!1}for(var l=this,k=this.doc.clipPos(b?this.pos.from:this.pos.to);;){if(this.pos=this.matches(b,k)){return this.atOccurrence=!0,this.pos.match||!0}if(b){if(!k.line){return j(0)}k=e(k.line-1,this.doc.getLine(k.line-1).length)}else{var i=this.doc.lineCount();if(k.line==i-1){return j(i)}k=e(k.line+1,0)}}},from:function(){return this.atOccurrence?this.pos.from:void 0},to:function(){return this.atOccurrence?this.pos.to:void 0},replace:function(i,b){if(this.atOccurrence){var a=f.splitLines(i);this.doc.replaceRange(a,this.pos.from,this.pos.to,b),this.pos.to=e(this.pos.from.line+a.length-1,a[a.length-1].length+(1==a.length?this.pos.from.ch:0))}}},f.defineExtension("getSearchCursor",function(i,c,j){return new h(this.doc,i,c,j)}),f.defineDocExtension("getSearchCursor",function(i,c,j){return new h(this,i,c,j)}),f.defineExtension("selectMatches",function(a,k){for(var j=[],i=this.getSearchCursor(a,this.getCursor("from"),k);i.findNext()&&!(f.cmpPos(i.to(),this.getCursor("to"))>0);){j.push({anchor:i.from(),head:i.to()})}j.length&&this.setSelections(j,0)})});!function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror"),require("../dialog/dialog")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../dialog/dialog"],b):b(CodeMirror)}(function(f){function e(j,i,m,l,k){j.openDialog?j.openDialog(i,k,{value:l,selectValueOnOpen:!0}):k(prompt(m,l))}function g(i,d){var j=Number(d);return/^[-+]/.test(d)?i.getCursor().line+j:j-1}var h='Jump to line: <input type="text" style="width: 10em" class="CodeMirror-search-field"/> <span style="color: #888" class="CodeMirror-search-hint">(Use line:column or scroll% syntax)</span>';f.commands.jumpToLine=function(b){var c=b.getCursor();e(b,h,"Jump to line:",c.line+1+":"+c.ch,function(a){if(a){var i;if(i=/^\s*([\+\-]?\d+)\s*\:\s*(\d+)\s*$/.exec(a)){b.setCursor(g(b,i[1]),Number(i[2]))}else{if(i=/^\s*([\+\-]?\d+(\.\d+)?)\%\s*/.exec(a)){var d=Math.round(b.lineCount()*Number(i[1])/100);/^[-+]/.test(i[1])&&(d=c.line+d+1),b.setCursor(d-1,c.ch)}else{(i=/^\s*\:?\s*([\+\-]?\d+)\s*/.exec(a))&&b.setCursor(g(b,i[1]),c.ch)}}}})},f.keyMap["default"]["Alt-G"]="jumpToLine"});!function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror"),require("./searchcursor"),require("../scroll/annotatescrollbar")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","./searchcursor","../scroll/annotatescrollbar"],b):b(CodeMirror)}(function(f){function e(j,i,o,n){this.cm=j,this.options=n;var m={listenForChanges:!1};for(var l in n){m[l]=n[l]}m.className||(m.className="CodeMirror-search-match"),this.annotation=j.annotateScrollbar(m),this.query=i,this.caseFold=o,this.gap={from:j.firstLine(),to:j.lastLine()+1},this.matches=[],this.update=null,this.findMatches(),this.annotation.update(this.matches);var k=this;j.on("change",this.changeHandler=function(d,c){k.onChange(c)})}function g(i,d,j){return i<=d?i:Math.max(d,i+j)}f.defineExtension("showMatchesOnScrollbar",function(b,j,i){return"string"==typeof i&&(i={className:i}),i||(i={}),new e(this,b,j,i)});var h=1000;e.prototype.findMatches=function(){if(this.gap){for(var a=0;a<this.matches.length;a++){var j=this.matches[a];if(j.from.line>=this.gap.to){break}j.to.line>=this.gap.from&&this.matches.splice(a--,1)}for(var i=this.cm.getSearchCursor(this.query,f.Pos(this.gap.from,0),this.caseFold),c=this.options&&this.options.maxMatches||h;i.findNext();){var j={from:i.from(),to:i.to()};if(j.from.line>=this.gap.to){break}if(this.matches.splice(a++,0,j),this.matches.length>c){break}}this.gap=null}},e.prototype.onChange=function(r){var q=r.from.line,p=f.changeEnd(r).line,o=p-r.to.line;if(this.gap?(this.gap.from=Math.min(g(this.gap.from,q,o),r.from.line),this.gap.to=Math.max(g(this.gap.to,q,o),r.from.line)):this.gap={from:r.from.line,to:p+1},o){for(var n=0;n<this.matches.length;n++){var m=this.matches[n],l=g(m.from.line,q,o);l!=m.from.line&&(m.from=f.Pos(l,m.from.ch));var d=g(m.to.line,q,o);d!=m.to.line&&(m.to=f.Pos(d,m.to.ch))}}clearTimeout(this.update);var a=this;this.update=setTimeout(function(){a.updateAfterChange()},250)},e.prototype.updateAfterChange=function(){this.findMatches(),this.annotation.update(this.matches)},e.prototype.clear=function(){this.cm.off("change",this.changeHandler),this.annotation.clear()}});!function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror"),require("./matchesonscrollbar")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","./matchesonscrollbar"],b):b(CodeMirror)}(function(z){function u(b){"object"==typeof b&&(this.minChars=b.minChars,this.style=b.style,this.showToken=b.showToken,this.delay=b.delay,this.wordsOnly=b.wordsOnly,this.annotateScrollbar=b.annotateScrollbar),null==this.style&&(this.style=x),null==this.minChars&&(this.minChars=y),null==this.delay&&(this.delay=w),null==this.wordsOnly&&(this.wordsOnly=v),this.overlay=this.timeout=null,this.matchesonscroll=null}function t(d){var c=d.state.matchHighlighter;clearTimeout(c.timeout),c.timeout=setTimeout(function(){q(d)},c.delay)}function s(h,g,l,k){var j=h.state.matchHighlighter;if(h.addOverlay(j.overlay=n(g,l,k)),j.annotateScrollbar){var i=l?new RegExp("\\b"+g+"\\b"):g;j.matchesonscroll=h.showMatchesOnScrollbar(i,!0,{className:"CodeMirror-selection-highlight-scrollbar"})}}function r(d){var c=d.state.matchHighlighter;c.overlay&&(d.removeOverlay(c.overlay),c.overlay=null,c.annotateScrollbar&&(c.matchesonscroll.clear(),c.matchesonscroll=null))}function q(b){b.operation(function(){var E=b.state.matchHighlighter;if(r(b),!b.somethingSelected()&&E.showToken){for(var D=E.showToken===!0?/[\w$]/:E.showToken,C=b.getCursor(),B=b.getLine(C.line),A=C.ch,k=A;A&&D.test(B.charAt(A-1));){--A}for(;k<B.length&&D.test(B.charAt(k));){++k}return void (A<k&&s(b,B.slice(A,k),D,E.style))}var i=b.getCursor("from"),h=b.getCursor("to");if(i.line==h.line&&(!E.wordsOnly||p(b,i,h))){var a=b.getRange(i,h).replace(/^\s+|\s+$/g,"");a.length>=E.minChars&&s(b,a,!1,E.style)}})}function p(h,g,l){var k=h.getRange(g,l);if(null!==k.match(/^\w+$/)){if(g.ch>0){var j={line:g.line,ch:g.ch-1},i=h.getRange(j,g);if(null===i.match(/\W/)){return !1}}if(l.ch<h.getLine(g.line).length){var j={line:l.line,ch:l.ch+1},i=h.getRange(l,j);if(null===i.match(/\W/)){return !1}}return !0}return !1}function o(d,c){return(!d.start||!c.test(d.string.charAt(d.start-1)))&&(d.pos==d.string.length||!c.test(d.string.charAt(d.pos)))}function n(e,d,f){return{token:function(a){return !a.match(e)||d&&!o(a,d)?(a.next(),void (a.skipTo(e.charAt(0))||a.skipToEnd())):f}}}var y=2,x="matchhighlight",w=100,v=!1;z.defineOption("highlightSelectionMatches",!1,function(a,f,e){e&&e!=z.Init&&(r(a),clearTimeout(a.state.matchHighlighter.timeout),a.state.matchHighlighter=null,a.off("cursorActivity",t)),f&&(a.state.matchHighlighter=new u(f),q(a),a.on("cursorActivity",t))})});!function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],b):b(CodeMirror)}(function(d){function c(f,e){function h(b){clearTimeout(g.doRedraw),g.doRedraw=setTimeout(function(){g.redraw()},b)}this.cm=f,this.options=e,this.buttonHeight=e.scrollButtonHeight||f.getOption("scrollButtonHeight"),this.annotations=[],this.doRedraw=this.doUpdate=null,this.div=f.getWrapperElement().appendChild(document.createElement("div")),this.div.style.cssText="position: absolute; right: 0; top: 0; z-index: 7; pointer-events: none",this.computeScale();var g=this;f.on("refresh",this.resizeHandler=function(){clearTimeout(g.doUpdate),g.doUpdate=setTimeout(function(){g.computeScale()&&h(20)},100)}),f.on("markerAdded",this.resizeHandler),f.on("markerCleared",this.resizeHandler),e.listenForChanges!==!1&&f.on("change",this.changeHandler=function(){h(250)})}d.defineExtension("annotateScrollbar",function(b){return"string"==typeof b&&(b={className:b}),new c(this,b)}),d.defineOption("scrollButtonHeight",0),c.prototype.computeScale=function(){var f=this.cm,e=(f.getWrapperElement().clientHeight-f.display.barHeight-2*this.buttonHeight)/f.getScrollerElement().scrollHeight;return e!=this.hScale?(this.hScale=e,!0):void 0},c.prototype.update=function(b){this.annotations=b,this.redraw()},c.prototype.redraw=function(H){function y(b,f){if(A!=b.line&&(A=b.line,z=G.getLineHandle(A)),C&&z.height>B){return G.charCoords(b,"local")[f?"top":"bottom"]}var e=G.heightAtLine(z,"local");return e+(f?0:z.height)}H!==!1&&this.computeScale();var G=this.cm,F=this.hScale,E=document.createDocumentFragment(),D=this.annotations,C=G.getOption("lineWrapping"),B=C&&1.5*G.defaultTextHeight(),A=null,z=null;if(G.display.barWidth){for(var w,x=0;x<D.length;x++){for(var v=D[x],u=w||y(v.from,!0)*F,t=y(v.to,!1)*F;x<D.length-1&&(w=y(D[x+1].from,!0)*F,!(w>t+0.9));){v=D[++x],t=y(v.to,!1)*F}if(t!=u){var s=Math.max(t-u,3),r=E.appendChild(document.createElement("div"));r.style.cssText="position: absolute; right: 0px; width: "+Math.max(G.display.barWidth-1,2)+"px; top: "+(u+this.buttonHeight)+"px; height: "+s+"px",r.className=this.options.className,v.id&&r.setAttribute("annotation-id",v.id)}}}this.div.textContent="",this.div.appendChild(E)},c.prototype.clear=function(){this.cm.off("refresh",this.resizeHandler),this.cm.off("markerAdded",this.resizeHandler),this.cm.off("markerCleared",this.resizeHandler),this.changeHandler&&this.cm.off("change",this.changeHandler),this.div.parentNode.removeChild(this.div)}});!function(b){"object"==typeof exports&&"object"==typeof module?b(require("../lib/codemirror"),require("../addon/search/searchcursor"),require("../addon/edit/matchbrackets")):"function"==typeof define&&define.amd?define(["../lib/codemirror","../addon/search/searchcursor","../addon/edit/matchbrackets"],b):b(CodeMirror)}(function(J){function D(M,L,K){if(K<0&&0==L.ch){return M.clipPos(G(L.line-1))}var s=M.getLine(L.line);if(K>0&&L.ch>=s.length){return M.clipPos(G(L.line+1,0))}for(var q,r="start",p=L.ch,o=K<0?0:s.length,n=0;p!=o;p+=K,n++){var d=s.charAt(K<0?p-1:p),a="_"!=d&&J.isWordChar(d)?"w":"o";if("w"==a&&d.toUpperCase()==d&&(a="W"),"start"==r){"o"!=a&&(r="in",q=a)}else{if("in"==r&&q!=a){if("w"==q&&"W"==a&&K<0&&p--,"W"==q&&"w"==a&&K>0){q="w";continue}break}}}return G(L.line,p)}function C(d,c){d.extendSelectionsBy(function(a){return d.display.shift||d.doc.extend||a.empty()?D(d.doc,a.head,c):c<0?a.from():a.to()})}function A(a,k){for(var i=k.ch,h=i,d=a.getLine(k.line);i&&J.isWordChar(d.charAt(i-1));){--i}for(;h<d.length&&J.isWordChar(d.charAt(h));){++h}return{from:G(k.line,i),to:G(k.line,h),word:d.slice(i,h)}}function y(f){var d=f.getCursor(),h=f.scanForBracket(d,-1);if(h){for(;;){var g=f.scanForBracket(d,1);if(!g){return}if(g.ch==z.charAt(z.indexOf(h.ch)+1)){return f.setSelection(G(h.pos.line,h.pos.ch+1),g.pos,!1),!0}d=G(g.pos.line,g.pos.ch+1)}}}function w(r,q){if(r.isReadOnly()){return J.Pass}for(var n,p=r.listSelections(),o=[],m=0;m<p.length;m++){var l=p[m];if(!l.empty()){for(var d=l.from().line,a=l.to().line;m<p.length-1&&p[m+1].from().line==a;){a=l[++m].to().line}o.push(d,a)}}o.length?n=!0:o.push(r.firstLine(),r.lastLine()),r.operation(function(){for(var c=[],L=0;L<o.length;L+=2){var K=o[L],s=o[L+1],g=G(K,0),f=G(s),b=r.getRange(g,f,!1);q?b.sort():b.sort(function(h,e){var k=h.toUpperCase(),i=e.toUpperCase();return k!=i&&(h=k,e=i),h<e?-1:h==e?0:1}),r.replaceRange(b,g,f),n&&c.push({anchor:g,head:f})}n&&r.setSelections(c,0)})}function u(a,d){a.operation(function(){for(var o=a.listSelections(),n=[],m=[],l=0;l<o.length;l++){var k=o[l];k.empty()?(n.push(l),m.push("")):m.push(d(a.getRange(k.from(),k.to())))}a.replaceSelections(m,"around","case");for(var c,l=n.length-1;l>=0;l--){var k=o[n[l]];if(!(c&&J.cmpPos(k.head,c)>0)){var b=A(a,k.head);c=b.from,a.replaceRange(d(b.word),b.from,b.to)}}})}function t(a){var h=a.getCursor("from"),g=a.getCursor("to");if(0==J.cmpPos(h,g)){var f=A(a,h);if(!f.word){return}h=f.from,g=f.to}return{from:h,to:g,query:a.getRange(h,g),word:f}}function j(g,d){var k=t(g);if(k){var i=k.query,h=g.getSearchCursor(i,d?k.to:k.from);(d?h.findNext():h.findPrevious())?g.setSelection(h.from(),h.to()):(h=g.getSearchCursor(i,d?G(g.firstLine(),0):g.clipPos(G(g.lastLine()))),(d?h.findNext():h.findPrevious())?g.setSelection(h.from(),h.to()):k.word&&g.setSelection(k.from,k.to))}}var I=J.keyMap.sublime={fallthrough:"default"},H=J.commands,G=J.Pos,F=J.keyMap["default"]==J.keyMap.macDefault,E=F?"Cmd-":"Ctrl-";H[I["Alt-Left"]="goSubwordLeft"]=function(b){C(b,-1)},H[I["Alt-Right"]="goSubwordRight"]=function(b){C(b,1)};var B=F?"Ctrl-Alt-":"Ctrl-";H[I[B+"Up"]="scrollLineUp"]=function(e){var d=e.getScrollInfo();if(!e.somethingSelected()){var f=e.lineAtHeight(d.top+d.clientHeight,"local");e.getCursor().line>=f&&e.execCommand("goLineUp")}e.scrollTo(null,d.top-e.defaultTextHeight())},H[I[B+"Down"]="scrollLineDown"]=function(e){var d=e.getScrollInfo();if(!e.somethingSelected()){var f=e.lineAtHeight(d.top,"local")+1;e.getCursor().line<=f&&e.execCommand("goLineDown")}e.scrollTo(null,d.top+e.defaultTextHeight())},H[I["Shift-"+E+"L"]="splitSelectionByLine"]=function(i){for(var d=i.listSelections(),o=[],n=0;n<d.length;n++){for(var m=d[n].from(),l=d[n].to(),k=m.line;k<=l.line;++k){l.line>m.line&&k==l.line&&0==l.ch||o.push({anchor:k==m.line?m:G(k,0),head:k==l.line?l:G(k)})}}i.setSelections(o,0)},I["Shift-Tab"]="indentLess",H[I.Esc="singleSelectionTop"]=function(d){var c=d.listSelections()[0];d.setSelection(c.anchor,c.head,{scroll:!1})},H[I[E+"L"]="selectLine"]=function(g){for(var d=g.listSelections(),k=[],i=0;i<d.length;i++){var h=d[i];k.push({anchor:G(h.from().line,0),head:G(h.to().line+1,0)})}g.setSelections(k)},I["Shift-Ctrl-K"]="deleteLine",H[I[E+"D"]="selectNextOccurrence"]=function(a){var p=a.getCursor("from"),o=a.getCursor("to"),n=a.state.sublimeFindFullWord==a.doc.sel;if(0==J.cmpPos(p,o)){var m=A(a,p);if(!m.word){return}a.setSelection(m.from,m.to),n=!0}else{var l=a.getRange(p,o),k=n?new RegExp("\\b"+l+"\\b"):l,d=a.getSearchCursor(k,o);d.findNext()?a.addSelection(d.from(),d.to()):(d=a.getSearchCursor(k,G(a.firstLine(),0)),d.findNext()&&a.addSelection(d.from(),d.to()))}n&&(a.state.sublimeFindFullWord=a.doc.sel)};var z="(){}[]";H[I["Shift-"+E+"Space"]="selectScope"]=function(b){y(b)||b.execCommand("selectAll")},H[I["Shift-"+E+"M"]="selectBetweenBrackets"]=function(a){return y(a)?void 0:J.Pass},H[I[E+"M"]="goToBracket"]=function(a){a.extendSelectionsBy(function(g){var d=a.scanForBracket(g.head,1);if(d&&0!=J.cmpPos(d.pos,g.head)){return d.pos}var b=a.scanForBracket(g.head,-1);return b&&G(b.pos.line,b.pos.ch+1)||g.head})};var x=F?"Cmd-Ctrl-":"Shift-Ctrl-";H[I[x+"Up"]="swapLineUp"]=function(r){if(r.isReadOnly()){return J.Pass}for(var q=r.listSelections(),p=[],o=r.firstLine()-1,n=[],m=0;m<q.length;m++){var l=q[m],d=l.from().line-1,a=l.to().line;n.push({anchor:G(l.anchor.line-1,l.anchor.ch),head:G(l.head.line-1,l.head.ch)}),0!=l.to().ch||l.empty()||--a,d>o?p.push(d,a):p.length&&(p[p.length-1]=a),o=a}r.operation(function(){for(var b=0;b<p.length;b+=2){var i=p[b],g=p[b+1],e=r.getLine(i);r.replaceRange("",G(i,0),G(i+1,0),"+swapLine"),g>r.lastLine()?r.replaceRange("\n"+e,G(r.lastLine()),null,"+swapLine"):r.replaceRange(e+"\n",G(g,0),null,"+swapLine")}r.setSelections(n),r.scrollIntoView()})},H[I[x+"Down"]="swapLineDown"]=function(a){if(a.isReadOnly()){return J.Pass}for(var p=a.listSelections(),o=[],n=a.lastLine()+1,m=p.length-1;m>=0;m--){var l=p[m],k=l.to().line+1,d=l.from().line;0!=l.to().ch||l.empty()||k--,k<n?o.push(k,d):o.length&&(o[o.length-1]=d),n=d}a.operation(function(){for(var b=o.length-2;b>=0;b-=2){var i=o[b],h=o[b+1],e=a.getLine(i);i==a.lastLine()?a.replaceRange("",G(i-1),G(i),"+swapLine"):a.replaceRange("",G(i,0),G(i+1,0),"+swapLine"),a.replaceRange(e+"\n",G(h,0),null,"+swapLine")}a.scrollIntoView()})},H[I[E+"/"]="toggleCommentIndented"]=function(b){b.toggleComment({indent:!0})},H[I[E+"J"]="joinLines"]=function(k){for(var d=k.listSelections(),q=[],p=0;p<d.length;p++){for(var o=d[p],n=o.from(),m=n.line,l=o.to().line;p<d.length-1&&d[p+1].from().line==l;){l=d[++p].to().line}q.push({start:m,end:l,anchor:!o.empty()&&n})}k.operation(function(){for(var a=0,N=[],M=0;M<q.length;M++){for(var s,L=q[M],K=L.anchor&&G(L.anchor.line-a,L.anchor.ch),r=L.start;r<=L.end;r++){var c=r-a;r==L.end&&(s=G(c,k.getLine(c).length+1)),c<k.lastLine()&&(k.replaceRange(" ",G(c),G(c+1,/^\s*/.exec(k.getLine(c+1))[0].length)),++a)}N.push({anchor:K||s,head:s})}k.setSelections(N,0)})},H[I["Shift-"+E+"D"]="duplicateLine"]=function(b){b.operation(function(){for(var a=b.listSelections().length,f=0;f<a;f++){var d=b.listSelections()[f];d.empty()?b.replaceRange(b.getLine(d.head.line)+"\n",G(d.head.line,0)):b.replaceRange(b.getRange(d.from(),d.to()),d.from())}b.scrollIntoView()})},I[E+"T"]="transposeChars",H[I.F9="sortLines"]=function(b){w(b,!0)},H[I[E+"F9"]="sortLinesInsensitive"]=function(b){w(b,!1)},H[I.F2="nextBookmark"]=function(f){var e=f.state.sublimeBookmarks;if(e){for(;e.length;){var h=e.shift(),g=h.find();if(g){return e.push(h),f.setSelection(g.from,g.to)}}}},H[I["Shift-F2"]="prevBookmark"]=function(e){var d=e.state.sublimeBookmarks;if(d){for(;d.length;){d.unshift(d.pop());var f=d[d.length-1].find();if(f){return e.setSelection(f.from,f.to)}d.pop()}}},H[I[E+"F2"]="toggleBookmark"]=function(s){for(var r=s.listSelections(),q=s.state.sublimeBookmarks||(s.state.sublimeBookmarks=[]),p=0;p<r.length;p++){for(var o=r[p].from(),n=r[p].to(),m=s.findMarks(o,n),l=0;l<m.length;l++){if(m[l].sublimeBookmark){m[l].clear();for(var k=0;k<q.length;k++){q[k]==m[l]&&q.splice(k--,1)}break}}l==m.length&&q.push(s.markText(o,n,{sublimeBookmark:!0,clearWhenEmpty:!1}))}},H[I["Shift-"+E+"F2"]="clearBookmarks"]=function(e){var d=e.state.sublimeBookmarks;if(d){for(var f=0;f<d.length;f++){d[f].clear()}}d.length=0},H[I["Alt-F2"]="selectBookmarks"]=function(g){var f=g.state.sublimeBookmarks,k=[];if(f){for(var i=0;i<f.length;i++){var h=f[i].find();h?k.push({anchor:h.from,head:h.to}):f.splice(i--,0)}}k.length&&g.setSelections(k,0)},I["Alt-Q"]="wrapLines";var v=E+"K ";I[v+E+"Backspace"]="delLineLeft",H[I.Backspace="smartBackspace"]=function(a){if(a.somethingSelected()){return J.Pass}var m=a.getCursor(),l=a.getRange({line:m.line,ch:0},m),k=J.countColumn(l,null,a.getOption("tabSize")),i=a.getOption("indentUnit");if(l&&!/\S/.test(l)&&k%i==0){var d=new G(m.line,J.findColumn(l,k-i,i));return d.ch==m.ch?J.Pass:a.replaceRange("",d,m,"+delete")}return J.Pass},H[I[v+E+"K"]="delLineRight"]=function(b){b.operation(function(){for(var a=b.listSelections(),d=a.length-1;d>=0;d--){b.replaceRange("",a[d].anchor,G(a[d].to().line),"+delete")}b.scrollIntoView()})},H[I[v+E+"U"]="upcaseAtCursor"]=function(b){u(b,function(c){return c.toUpperCase()})},H[I[v+E+"L"]="downcaseAtCursor"]=function(b){u(b,function(c){return c.toLowerCase()})},H[I[v+E+"Space"]="setSublimeMark"]=function(b){b.state.sublimeMark&&b.state.sublimeMark.clear(),b.state.sublimeMark=b.setBookmark(b.getCursor())},H[I[v+E+"A"]="selectToSublimeMark"]=function(d){var c=d.state.sublimeMark&&d.state.sublimeMark.find();c&&d.setSelection(d.getCursor(),c)},H[I[v+E+"W"]="deleteToSublimeMark"]=function(a){var k=a.state.sublimeMark&&a.state.sublimeMark.find();if(k){var i=a.getCursor(),h=k;if(J.cmpPos(i,h)>0){var g=h;h=i,i=g}a.state.sublimeKilled=a.getRange(i,h),a.replaceRange("",i,h)}},H[I[v+E+"X"]="swapWithSublimeMark"]=function(d){var c=d.state.sublimeMark&&d.state.sublimeMark.find();c&&(d.state.sublimeMark.clear(),d.state.sublimeMark=d.setBookmark(d.getCursor()),d.setCursor(c))},H[I[v+E+"Y"]="sublimeYank"]=function(b){null!=b.state.sublimeKilled&&b.replaceSelection(b.state.sublimeKilled,null,"paste")},I[v+E+"G"]="clearBookmarks",H[I[v+E+"C"]="showInCenter"]=function(d){var c=d.cursorCoords(null,"local");d.scrollTo(null,(c.top+c.bottom)/2-d.getScrollInfo().clientHeight/2)},H[I["Shift-Alt-Up"]="selectLinesUpward"]=function(b){b.operation(function(){for(var a=b.listSelections(),f=0;f<a.length;f++){var d=a[f];d.head.line>b.firstLine()&&b.addSelection(G(d.head.line-1,d.head.ch))}})},H[I["Shift-Alt-Down"]="selectLinesDownward"]=function(b){b.operation(function(){for(var a=b.listSelections(),f=0;f<a.length;f++){var d=a[f];d.head.line<b.lastLine()&&b.addSelection(G(d.head.line+1,d.head.ch))}})},H[I[E+"F3"]="findUnder"]=function(b){j(b,!0)},H[I["Shift-"+E+"F3"]="findUnderPrevious"]=function(b){j(b,!1)},H[I["Alt-F3"]="findAllUnder"]=function(g){var f=t(g);if(f){for(var k=g.getSearchCursor(f.query),i=[],h=-1;k.findNext();){i.push({anchor:k.from(),head:k.to()}),k.from().line<=f.from.line&&k.from().ch<=f.from.ch&&h++}g.setSelections(i,h)}},I["Shift-"+E+"["]="fold",I["Shift-"+E+"]"]="unfold",I[v+E+"0"]=I[v+E+"j"]="unfoldAll",I[E+"I"]="findIncremental",I["Shift-"+E+"I"]="findIncrementalReverse",I[E+"H"]="replace",I.F3="findNext",I["Shift-F3"]="findPrev",J.normalizeKeyMap(I)});!function(b){"object"==typeof exports&&"object"==typeof module?b(require("../lib/codemirror")):"function"==typeof define&&define.amd?define(["../lib/codemirror"],b):b(CodeMirror)}(function(aC){function aA(d,c){return d.line==c.line&&d.ch==c.ch}function ay(b){az.push(b),az.length>50&&az.shift()}function ax(b){return az.length?void (az[az.length-1]+=b):ay(b)}function aw(b){return az[az.length-(b?Math.min(b,1):1)]||""}function av(){return az.length>1&&az.pop(),aw()}function at(e,c,j,i,f){null==f&&(f=e.getRange(c,j)),i&&au&&au.cm==e&&aA(c,au.pos)&&e.isClean(au.gen)?ax(f):ay(f),e.replaceRange("",c,j,"+delete"),au=i?{cm:e,pos:c,gen:e.changeGeneration()}:null}function ar(e,d,f){return e.findPosH(d,f,"char",!0)}function aq(e,d,f){return e.findPosH(d,f,"word",!0)}function ap(e,d,f){return e.findPosV(d,f,"line",e.doc.sel.goalColumn)}function ao(e,d,f){return e.findPosV(d,f,"page",e.doc.sel.goalColumn)}function an(r,q,p){for(var o=q.line,n=r.getLine(o),m=/\S/.test(p<0?n.slice(0,q.ch):n.slice(q.ch)),l=r.firstLine(),k=r.lastLine();;){if(o+=p,o<l||o>k){return r.clipPos(aB(o-p,p<0?0:null))}n=r.getLine(o);var b=/\S/.test(n);if(b){m=!0}else{if(m){return aB(o,0)}}}}function am(b,p,o){for(var n=p.line,m=p.ch,l=b.getLine(p.line),k=!1;;){var j=l.charAt(m+(o<0?-1:0));if(j){if(k&&/[!?.]/.test(j)){return aB(n,m+(o>0?1:0))}k||(k=/\w/.test(j)),m+=o}else{if(n==(o<0?b.firstLine():b.lastLine())){return aB(n,m)}if(l=b.getLine(n+o),!/\S/.test(l)){return aB(n,m)}n+=o,m=o<0?l.length:0}}}function al(b,p,o){var n;if(b.findMatchingBracket&&(n=b.findMatchingBracket(p,!0))&&n.match&&(n.forward?1:-1)==o){return o>0?aB(n.to.line,n.to.ch+1):n.to}for(var m=!0;;m=!1){var l=b.getTokenAt(p),k=aB(p.line,o<0?l.start:l.end);if(!(m&&o>0&&l.end==p.ch)&&/\w/.test(l.string)){return k}var c=b.findPosH(k,o,"char");if(aA(k,c)){return p}p=c}}function ak(e,d){var f=e.state.emacsPrefix;return f?(ab(e),"-"==f?-1:Number(f)):d?null:1}function aj(d){var c="string"==typeof d?function(a){a.execCommand(d)}:d;return function(b){var f=ak(b);c(b);for(var e=1;e<f;++e){c(b)}}}function ai(i,c,n,m){var l=ak(i);l<0&&(m=-m,l=-l);for(var k=0;k<l;++k){var j=n(i,c,m);if(aA(j,c)){break}c=j}return c}function ah(e,d){var f=function(a){a.extendSelection(ai(a,a.getCursor(),e,d))};return f.motion=!0,f}function ag(h,g,l){for(var j,k=h.listSelections(),i=k.length;i--;){j=k[i].head,at(h,j,ai(h,j,g,l),!0)}}function af(f){if(f.somethingSelected()){for(var h,e=f.listSelections(),g=e.length;g--;){h=e[g],at(f,h.anchor,h.head)}return !0}}function ae(d,c){return d.state.emacsPrefix?void ("-"!=c&&(d.state.emacsPrefix+=c)):(d.state.emacsPrefix=c,d.on("keyHandled",ac),void d.on("inputRead",aa))}function ac(d,c){d.state.emacsPrefixMap||ad.hasOwnProperty(c)||ab(d)}function ab(b){b.state.emacsPrefix=null,b.off("keyHandled",ac),b.off("inputRead",aa)}function aa(h,g){var l=ak(h);if(l>1&&"+input"==g.origin){for(var k=g.text.join("\n"),j="",i=1;i<l;++i){j+=k}h.replaceSelection(j)}}function Z(b){b.state.emacsPrefixMap=!0,b.addKeyMap(Q),b.on("keyHandled",Y),b.on("inputRead",Y)}function Y(d,c){("string"!=typeof c||!/^\d$/.test(c)&&"Ctrl-U"!=c)&&(d.removeKeyMap(Q),d.state.emacsPrefixMap=!1,d.off("keyHandled",Y),d.off("inputRead",Y))}function X(b){b.setCursor(b.getCursor()),b.setExtending(!b.getExtending()),b.on("change",function(){b.setExtending(!1)})}function W(b){b.setExtending(!1),b.setCursor(b.getCursor())}function V(e,d,f){e.openDialog?e.openDialog(d+': <input type="text" style="width: 10em"/>',f,{bottom:!0}):f(prompt(d,""))}function U(f,e){var h=f.getCursor(),g=f.findPosH(h,1,"word");f.replaceRange(e(f.getRange(h,g)),h,g),f.setCursor(g)}function T(b){for(var n=b.getCursor(),m=n.line,l=n.ch,k=[];m>=b.firstLine();){for(var j=b.getLine(m),i=null==l?j.length:l;i>0;){var l=j.charAt(--i);if(")"==l){k.push("(")}else{if("]"==l){k.push("[")}else{if("}"==l){k.push("{")}else{if(/[\(\{\[]/.test(l)&&(!k.length||k.pop()!=l)){return b.extendSelection(aB(m,i))}}}}}--m,l=null}}function S(b){b.execCommand("clearSearch"),W(b)}function P(b){Q[b]=function(a){ae(a,b)},R["Ctrl-"+b]=function(a){ae(a,b)},ad["Ctrl-"+b]=!0}for(var aB=aC.Pos,az=[],au=null,ad={"Alt-G":!0,"Ctrl-X":!0,"Ctrl-Q":!0,"Ctrl-U":!0},R=aC.keyMap.emacs=aC.normalizeKeyMap({"Ctrl-W":function(b){at(b,b.getCursor("start"),b.getCursor("end"))},"Ctrl-K":aj(function(b){var h=b.getCursor(),g=b.clipPos(aB(h.line)),f=b.getRange(h,g);/\S/.test(f)||(f+="\n",g=aB(h.line+1,0)),at(b,h,g,!0,f)}),"Alt-W":function(b){ay(b.getSelection()),W(b)},"Ctrl-Y":function(d){var c=d.getCursor();d.replaceRange(aw(ak(d)),c,c,"paste"),d.setSelection(c,d.getCursor())},"Alt-Y":function(b){b.replaceSelection(av(),"around","paste")},"Ctrl-Space":X,"Ctrl-Shift-2":X,"Ctrl-F":ah(ar,1),"Ctrl-B":ah(ar,-1),Right:ah(ar,1),Left:ah(ar,-1),"Ctrl-D":function(b){ag(b,ar,1)},Delete:function(b){af(b)||ag(b,ar,1)},"Ctrl-H":function(b){ag(b,ar,-1)},Backspace:function(b){af(b)||ag(b,ar,-1)},"Alt-F":ah(aq,1),"Alt-B":ah(aq,-1),"Alt-D":function(b){ag(b,aq,1)},"Alt-Backspace":function(b){ag(b,aq,-1)},"Ctrl-N":ah(ap,1),"Ctrl-P":ah(ap,-1),Down:ah(ap,1),Up:ah(ap,-1),"Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd",End:"goLineEnd",Home:"goLineStart","Alt-V":ah(ao,-1),"Ctrl-V":ah(ao,1),PageUp:ah(ao,-1),PageDown:ah(ao,1),"Ctrl-Up":ah(an,-1),"Ctrl-Down":ah(an,1),"Alt-A":ah(am,-1),"Alt-E":ah(am,1),"Alt-K":function(b){ag(b,am,1)},"Ctrl-Alt-K":function(b){ag(b,al,1)},"Ctrl-Alt-Backspace":function(b){ag(b,al,-1)},"Ctrl-Alt-F":ah(al,1),"Ctrl-Alt-B":ah(al,-1),"Shift-Ctrl-Alt-2":function(d){var c=d.getCursor();d.setSelection(ai(d,c,al,1),c)},"Ctrl-Alt-T":function(g){var f=al(g,g.getCursor(),-1),j=al(g,f,1),i=al(g,j,1),h=al(g,i,-1);g.replaceRange(g.getRange(h,i)+g.getRange(j,h)+g.getRange(f,j),f,i)},"Ctrl-Alt-U":aj(T),"Alt-Space":function(b){for(var j=b.getCursor(),i=j.ch,h=j.ch,g=b.getLine(j.line);i&&/\s/.test(g.charAt(i-1));){--i}for(;h<g.length&&/\s/.test(g.charAt(h));){++h}b.replaceRange(" ",aB(j.line,i),aB(j.line,h))},"Ctrl-O":aj(function(b){b.replaceSelection("\n","start")}),"Ctrl-T":aj(function(b){b.execCommand("transposeChars")}),"Alt-C":aj(function(b){U(b,function(d){var c=d.search(/\w/);return -1==c?d:d.slice(0,c)+d.charAt(c).toUpperCase()+d.slice(c+1).toLowerCase()})}),"Alt-U":aj(function(b){U(b,function(c){return c.toUpperCase()})}),"Alt-L":aj(function(b){U(b,function(c){return c.toLowerCase()})}),"Alt-;":"toggleComment","Ctrl-/":aj("undo"),"Shift-Ctrl--":aj("undo"),"Ctrl-Z":aj("undo"),"Cmd-Z":aj("undo"),"Shift-Alt-,":"goDocStart","Shift-Alt-.":"goDocEnd","Ctrl-S":"findNext","Ctrl-R":"findPrev","Ctrl-G":S,"Shift-Alt-5":"replace","Alt-/":"autocomplete","Ctrl-J":"newlineAndIndent",Enter:!1,Tab:"indentAuto","Alt-G G":function(d){var c=ak(d,!0);return null!=c&&c>0?d.setCursor(c-1):void V(d,"Goto line",function(a){var e;a&&!isNaN(e=Number(a))&&e==(0|e)&&e>0&&d.setCursor(e-1)})},"Ctrl-X Tab":function(b){b.indentSelection(ak(b,!0)||b.getOption("indentUnit"))},"Ctrl-X Ctrl-X":function(b){b.setSelection(b.getCursor("head"),b.getCursor("anchor"))},"Ctrl-X Ctrl-S":"save","Ctrl-X Ctrl-W":"save","Ctrl-X S":"saveAll","Ctrl-X F":"open","Ctrl-X U":aj("undo"),"Ctrl-X K":"close","Ctrl-X Delete":function(b){at(b,b.getCursor(),am(b,b.getCursor(),1),!0)},"Ctrl-X H":"selectAll","Ctrl-Q Tab":aj("insertTab"),"Ctrl-U":Z}),Q={"Ctrl-G":ab},O=0;O<10;++O){P(String(O))}P("-")});!function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],b):b(CodeMirror)}(function(r){function n(y,x,w,v){var u=y.getLineHandle(x.line),t=x.ch-1,s=t>=0&&o[u.text.charAt(t)]||o[u.text.charAt(++t)];if(!s){return null}var f=">"==s.charAt(1)?1:-1;if(w&&f>0!=(t==x.ch)){return null}var d=y.getTokenTypeAt(p(x.line,t+1)),c=m(y,p(x.line,t+(f>0?1:0)),f,d||null,v);return null==c?null:{from:p(x.line,t),to:c&&c.pos,match:c&&c.ch==s.charAt(0),forward:f>0}}function m(F,E,D,C,B){for(var A=B&&B.maxScanLineLength||10000,z=B&&B.maxScanLines||1000,y=[],x=B&&B.bracketRegex?B.bracketRegex:/[(){}[\]]/,w=D>0?Math.min(E.line+z,F.lastLine()+1):Math.max(F.firstLine()-1,E.line-z),v=E.line;v!=w;v+=D){var u=F.getLine(v);if(u){var t=D>0?0:u.length-1,s=D>0?u.length:-1;if(!(u.length>A)){for(v==E.line&&(t=E.ch-(D<0?1:0));t!=s;t+=D){var d=u.charAt(t);if(x.test(d)&&(void 0===C||F.getTokenTypeAt(p(v,t+1))==C)){var c=o[d];if(">"==c.charAt(1)==D>0){y.push(d)}else{if(!y.length){return{pos:p(v,t),ch:d}}y.pop()}}}}}}return v-D==(D>0?F.lastLine():F.firstLine())?!1:null}function l(y,x,w){for(var v=y.state.matchBrackets.maxHighlightLineLength||1000,u=[],t=y.listSelections(),s=0;s<t.length;s++){var e=t[s].empty()&&n(y,t[s].head,!1,w);if(e&&y.getLine(e.from.line).length<=v){var c=e.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";u.push(y.markText(e.from,p(e.from.line,e.from.ch+1),{className:c})),e.to&&y.getLine(e.to.line).length<=v&&u.push(y.markText(e.to,p(e.to.line,e.to.ch+1),{className:c}))}}if(u.length){q&&y.state.focused&&y.focus();var b=function(){y.operation(function(){for(var d=0;d<u.length;d++){u[d].clear()}})};if(!x){return b}setTimeout(b,800)}}function j(b){b.operation(function(){k&&(k(),k=null),k=l(b,!1,b.state.matchBrackets)})}var q=/MSIE \d/.test(navigator.userAgent)&&(null==document.documentMode||document.documentMode<8),p=r.Pos,o={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"},k=null;r.defineOption("matchBrackets",!1,function(a,f,e){e&&e!=r.Init&&a.off("cursorActivity",j),f&&(a.state.matchBrackets="object"==typeof f?f:{},a.on("cursorActivity",j))}),r.defineExtension("matchBrackets",function(){l(this,!0)}),r.defineExtension("findMatchingBracket",function(e,d,f){return n(this,e,d,f)}),r.defineExtension("scanForBracket",function(f,e,h,g){return m(this,f,e,h,g)})});!function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],b):b(CodeMirror)}(function(F){function C(b,d){return"pairs"==d&&"string"==typeof b?b:"object"==typeof b&&null!=b[d]?b[d]:E[d]}function y(b){return function(a){return t(a,b)}}function x(e){var d=e.state.closeBrackets;if(!d){return null}var f=e.getModeAt(e.getCursor());return f.closeBrackets||d}function w(a){var n=x(a);if(!n||a.getOption("disableInput")){return F.Pass}for(var m=C(n,"pairs"),l=a.listSelections(),i=0;i<l.length;i++){if(!l[i].empty()){return F.Pass}var d=r(a,l[i].head);if(!d||m.indexOf(d)%2!=0){return F.Pass}}for(var i=l.length-1;i>=0;i--){var c=l[i].head;a.replaceRange("",D(c.line,c.ch-1),D(c.line,c.ch+1),"+delete")}}function v(a){var l=x(a),k=l&&C(l,"explode");if(!k||a.getOption("disableInput")){return F.Pass}for(var j=a.listSelections(),i=0;i<j.length;i++){if(!j[i].empty()){return F.Pass}var d=r(a,j[i].head);if(!d||k.indexOf(d)%2!=0){return F.Pass}}a.operation(function(){a.replaceSelection("\n\n",null),a.execCommand("goCharLeft"),j=a.listSelections();for(var b=0;b<j.length;b++){var e=j[b].head.line;a.indentLine(e,null,!0),a.indentLine(e+1,null,!0)}})}function u(a){var c=F.cmpPos(a.anchor,a.head)>0;return{anchor:new D(a.anchor.line,a.anchor.ch+(c?-1:1)),head:new D(a.head.line,a.head.ch+(c?1:-1))}}function t(J,I){var H=x(J);if(!H||J.getOption("disableInput")){return F.Pass}var G=C(H,"pairs"),p=G.indexOf(I);if(-1==p){return F.Pass}for(var c,a,n=C(H,"triples"),l=G.charAt(p+1)==I,i=J.listSelections(),d=p%2==0,P=0;P<i.length;P++){var M,O=i[P],N=O.head,a=J.getRange(N,D(N.line,N.ch+1));if(d&&!O.empty()){M="surround"}else{if(!l&&d||a!=I){if(l&&N.ch>1&&n.indexOf(I)>=0&&J.getRange(D(N.line,N.ch-2),N)==I+I&&(N.ch<=2||J.getRange(D(N.line,N.ch-3),D(N.line,N.ch-2))!=I)){M="addFour"}else{if(l){if(F.isWordChar(a)||!q(J,N,I)){return F.Pass}M="both"}else{if(!d||J.getLine(N.line).length!=N.ch&&!s(a,G)&&!/\s/.test(a)){return F.Pass}M="both"}}}else{M=n.indexOf(I)>=0&&J.getRange(N,D(N.line,N.ch+3))==I+I+I?"skipThree":"skip"}}if(c){if(c!=M){return F.Pass}}else{c=M}}var L=p%2?G.charAt(p-1):I,K=p%2?I:G.charAt(p+1);J.operation(function(){if("skip"==c){J.execCommand("goCharRight")}else{if("skipThree"==c){for(var b=0;b<3;b++){J.execCommand("goCharRight")}}else{if("surround"==c){for(var e=J.getSelections(),b=0;b<e.length;b++){e[b]=L+e[b]+K}J.replaceSelections(e,"around"),e=J.listSelections().slice();for(var b=0;b<e.length;b++){e[b]=u(e[b])}J.setSelections(e)}else{"both"==c?(J.replaceSelection(L+K,null),J.triggerElectric(L+K),J.execCommand("goCharLeft")):"addFour"==c&&(J.replaceSelection(L+L+L+L,"before"),J.execCommand("goCharRight"))}}}})}function s(e,d){var f=d.lastIndexOf(e);return f>-1&&f%2==1}function r(e,c){var f=e.getRange(D(c.line,c.ch-1),D(c.line,c.ch+1));return 2==f.length?f:null}function q(a,n,m){var l=a.getLine(n.line),k=a.getTokenAt(n);if(/\bstring2?\b/.test(k.type)){return !1}var j=new F.StringStream(l.slice(0,n.ch)+m+l.slice(n.ch),4);for(j.pos=j.start=k.start;;){var i=a.getMode().token(j,k.state);if(j.pos>=n.ch+1){return/\bstring2?\b/.test(i)}j.start=j.pos}}var E={pairs:"()[]{}''\"\"",triples:"",explode:"[]{}"},D=F.Pos;F.defineOption("autoCloseBrackets",!1,function(a,f,e){e&&e!=F.Init&&(a.removeKeyMap(A),a.state.closeBrackets=null),f&&(a.state.closeBrackets=f,a.addKeyMap(A))});for(var B=E.pairs+"`",A={Backspace:w,Enter:v},z=0;z<B.length;z++){A["'"+B.charAt(z)+"'"]=y(B.charAt(z))}});!function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],b):b(CodeMirror)}(function(b){b.registerHelper("fold","brace",function(J,I){function D(g){for(var e=I.ch,d=0;;){var c=e<=0?-1:G.lastIndexOf(g,e-1);if(-1!=c){if(1==d&&c<I.ch){break}if(E=J.getTokenTypeAt(b.Pos(H,c+1)),!/^(comment|string)/.test(E)){return c+1}e=c-1}else{if(1==d){break}d=1,e=G.length}}}var F,E,H=I.line,G=J.getLine(H),C="{",B="}",F=D("{");if(null==F&&(C="[",B="]",F=D("[")),null!=F){var y,x,A=1,z=J.lastLine();b:for(var w=H;w<=z;++w){for(var v=J.getLine(w),u=w==H?F:0;;){var t=v.indexOf(C,u),a=v.indexOf(B,u);if(t<0&&(t=v.length),a<0&&(a=v.length),u=Math.min(t,a),u==v.length){break}if(J.getTokenTypeAt(b.Pos(w,u+1))==E){if(u==t){++A}else{if(!--A){y=w,x=u;break b}}}++u}}if(null!=y&&(H!=y||x!=F)){return{from:b.Pos(H,F),to:b.Pos(y,x)}}}}),b.registerHelper("fold","import",function(a,n){function m(t){if(t<a.firstLine()||t>a.lastLine()){return null}var s=a.getTokenAt(b.Pos(t,1));if(/\S/.test(s.string)||(s=a.getTokenAt(b.Pos(t,s.end+1))),"keyword"!=s.type||"import"!=s.string){return null}for(var r=t,q=Math.min(a.lastLine(),t+10);r<=q;++r){var p=a.getLine(r),o=p.indexOf(";");if(-1!=o){return{startCh:s.end,end:b.Pos(r,o)}}}}var k,n=n.line,l=m(n);if(!l||m(n-1)||(k=m(n-2))&&k.end.line==n-1){return null}for(var j=l.end;;){var i=m(j.line+1);if(null==i){break}j=i.end}return{from:a.clipPos(b.Pos(n,l.startCh+1)),to:j}}),b.registerHelper("fold","include",function(a,l){function k(f){if(f<a.firstLine()||f>a.lastLine()){return null}var e=a.getTokenAt(b.Pos(f,1));return/\S/.test(e.string)||(e=a.getTokenAt(b.Pos(f,e.end+1))),"meta"==e.type&&"#include"==e.string.slice(0,8)?e.start+8:void 0}var l=l.line,j=k(l);if(null==j||null!=k(l-1)){return null}for(var i=l;;){var h=k(i+1);if(null==h){break}++i}return{from:b.Pos(l,j+1),to:a.clipPos(b.Pos(i))}})}),function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],b):b(CodeMirror)}(function(b){b.registerGlobalHelper("fold","comment",function(c){return c.blockCommentStart&&c.blockCommentEnd},function(N,M){var L=N.getModeAt(M),K=L.blockCommentStart,J=L.blockCommentEnd;if(K&&J){for(var G,I=M.line,H=N.getLine(I),F=M.ch,E=0;;){var D=F<=0?-1:H.lastIndexOf(K,F-1);if(-1!=D){if(1==E&&D<M.ch){return}if(/comment/.test(N.getTokenTypeAt(b.Pos(I,D+1)))&&(H.slice(D-J.length,D)==J||!/comment/.test(N.getTokenTypeAt(b.Pos(I,D))))){G=D+K.length;break}F=D-1}else{if(1==E){return}E=1,F=H.length}}var A,z,C=1,B=N.lastLine();b:for(var y=I;y<=B;++y){for(var x=N.getLine(y),w=y==I?G:0;;){var v=x.indexOf(K,w),a=x.indexOf(J,w);if(v<0&&(v=x.length),a<0&&(a=x.length),w=Math.min(v,a),w==x.length){break}if(w==v){++C}else{if(!--C){A=y,z=w;break b}}++w}}if(null!=A&&(I!=A||z!=G)){return{from:b.Pos(I,G),to:b.Pos(A,z)}}}})}),function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],b):b(CodeMirror)}(function(g){function f(t,s,r,q){function n(b){var l=p(t,s);if(!l||l.to.line-l.from.line<o){return null}for(var k=t.findMarksAt(l.from),d=0;d<k.length;++d){if(k[d].__isFold&&"fold"!==q){if(!b){return null}l.cleared=!0,k[d].clear()}}return l}if(r&&r.call){var p=r;r=null}else{var p=h(t,r,"rangeFinder")}"number"==typeof s&&(s=g.Pos(s,0));var o=h(t,r,"minFoldSize"),e=n(!0);if(h(t,r,"scanUp")){for(;!e&&s.line>t.firstLine();){s=g.Pos(s.line-1,0),e=n(!1)}}if(e&&!e.cleared&&"unfold"!==q){var c=j(t,r);g.on(c,"mousedown",function(d){a.clear(),g.e_preventDefault(d)});var a=t.markText(e.from,e.to,{replacedWith:c,clearOnEnter:!0,__isFold:!0});a.on("clear",function(k,b){g.signal(t,"unfold",t,k,b)}),g.signal(t,"fold",t,e.from,e.to)}}function j(k,e){var m=h(k,e,"widget");if("string"==typeof m){var l=document.createTextNode(m);m=document.createElement("span"),m.appendChild(l),m.className="CodeMirror-foldmarker"}return m}function h(k,d,m){if(d&&void 0!==d[m]){return d[m]}var l=k.options.foldOptions;return l&&void 0!==l[m]?l[m]:i[m]}g.newFoldFunction=function(b,d){return function(c,a){f(c,a,{rangeFinder:b,widget:d})}},g.defineExtension("foldCode",function(b,k,e){f(this,b,k,e)}),g.defineExtension("isFolded",function(e){for(var d=this.findMarksAt(e),k=0;k<d.length;++k){if(d[k].__isFold){return !0}}}),g.commands.toggleFold=function(b){b.foldCode(b.getCursor())},g.commands.fold=function(b){b.foldCode(b.getCursor(),null,"fold")},g.commands.unfold=function(b){b.foldCode(b.getCursor(),null,"unfold")},g.commands.foldAll=function(a){a.operation(function(){for(var e=a.firstLine(),b=a.lastLine();e<=b;e++){a.foldCode(g.Pos(e,0),null,"fold")}})},g.commands.unfoldAll=function(a){a.operation(function(){for(var e=a.firstLine(),b=a.lastLine();e<=b;e++){a.foldCode(g.Pos(e,0),null,"unfold")}})},g.registerHelper("fold","combine",function(){var b=Array.prototype.slice.call(arguments,0);return function(a,m){for(var l=0;l<b.length;++l){var k=b[l](a,m);if(k){return k}}}}),g.registerHelper("fold","auto",function(l,k){for(var o=l.getHelpers(k,"fold"),n=0;n<o.length;n++){var m=o[n](l,k);if(m){return m}}});var i={rangeFinder:g.fold.auto,widget:"\u2194",minFoldSize:0,scanUp:!1};g.defineOption("foldOptions",null),g.defineExtension("foldOption",function(d,c){return h(this,d,c)})}),function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror"),require("./foldcode")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","./foldcode"],b):b(CodeMirror)}(function(x){function v(b){this.options=b,this.from=this.to=0}function u(b){return b===!0&&(b={}),null==b.gutter&&(b.gutter="CodeMirror-foldgutter"),null==b.indicatorOpen&&(b.indicatorOpen="CodeMirror-foldgutter-open"),null==b.indicatorFolded&&(b.indicatorFolded="CodeMirror-foldgutter-folded"),b}function t(b,h){for(var g=b.findMarksAt(w(h)),f=0;f<g.length;++f){if(g[f].__isFold&&g[f].find().from.line==h){return g[f]}}}function s(d){if("string"==typeof d){var c=document.createElement("div");return c.className=d+" CodeMirror-guttermarker-subtle",c}return d.cloneNode(!0)}function r(b,z,y){var l=b.state.foldGutter.options,k=z,f=b.foldOption(l,"minFoldSize"),e=b.foldOption(l,"rangeFinder");b.eachLine(z,y,function(i){var h=null;if(t(b,k)){h=s(l.indicatorFolded)}else{var g=w(k,0),a=e&&e(b,g);a&&a.to.line-a.from.line>=f&&(h=s(l.indicatorOpen))}b.setGutterMarker(i,l.gutter,h),++k})}function q(e){var d=e.getViewport(),f=e.state.foldGutter;f&&(e.operation(function(){r(e,d.from,d.to)}),f.from=d.from,f.to=d.to)}function p(b,l,k){var j=b.state.foldGutter;if(j){var i=j.options;if(k==i.gutter){var e=t(b,l);e?e.clear():b.foldCode(w(l,0),i.rangeFinder)}}}function o(e){var d=e.state.foldGutter;if(d){var f=d.options;d.from=d.to=0,clearTimeout(d.changeUpdate),d.changeUpdate=setTimeout(function(){q(e)},f.foldOnChangeTimeSpan||600)}}function n(e){var d=e.state.foldGutter;if(d){var f=d.options;clearTimeout(d.changeUpdate),d.changeUpdate=setTimeout(function(){var a=e.getViewport();d.from==d.to||a.from-d.to>20||d.from-a.to>20?q(e):e.operation(function(){a.from<d.from&&(r(e,a.from,d.from),d.from=a.from),a.to>d.to&&(r(e,d.to,a.to),d.to=a.to)})},f.updateViewportTimeSpan||400)}}function m(f,e){var h=f.state.foldGutter;if(h){var g=e.line;g>=h.from&&g<h.to&&r(f,g,g+1)}}x.defineOption("foldGutter",!1,function(a,d,c){c&&c!=x.Init&&(a.clearGutter(a.state.foldGutter.options.gutter),a.state.foldGutter=null,a.off("gutterClick",p),a.off("change",o),a.off("viewportChange",n),a.off("fold",m),a.off("unfold",m),a.off("swapDoc",o)),d&&(a.state.foldGutter=new v(u(d)),q(a),a.on("gutterClick",p),a.on("change",o),a.on("viewportChange",n),a.on("fold",m),a.on("unfold",m),a.on("swapDoc",o))});var w=x.Pos}),function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],b):b(CodeMirror)}(function(b){b.registerHelper("fold","indent",function(v,u){var t=v.getOption("tabSize"),s=v.getLine(u.line);if(/\S/.test(s)){for(var r=function(c){return b.countColumn(c,null,t)},q=r(s),p=null,o=u.line+1,n=v.lastLine();o<=n;++o){var m=v.getLine(o),a=r(m);if(a>q){p=o}else{if(/\S/.test(m)){break}}}return p?{from:b.Pos(u.line,s.length),to:b.Pos(p,v.getLine(p).length)}:void 0}})}),function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],b):b(CodeMirror)}(function(b){b.registerHelper("fold","markdown",function(v,u){function s(f){var e=v.getTokenTypeAt(b.Pos(f,0));return e&&/\bheader\b/.test(e)}function r(e,d,h){var g=d&&d.match(/^#+/);return g&&s(e)?g[0].length:(g=h&&h.match(/^[=\-]+\s*$/),g&&s(e+1)?"="==h[0]?1:2:t)}var t=100,q=v.getLine(u.line),p=v.getLine(u.line+1),o=r(u.line,q,p);if(o===t){return void 0}for(var n=v.lastLine(),m=u.line,a=v.getLine(m+2);m<n&&!(r(m+1,p,a)<=o);){++m,p=a,a=v.getLine(m+2)}return{from:b.Pos(u.line,q.length),to:b.Pos(m,v.getLine(m).length)}})}),function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],b):b(CodeMirror)}(function(F){function D(d,c){return d.line-c.line||d.ch-c.ch}function z(f,e,h,g){this.line=e,this.ch=h,this.cm=f,this.text=f.getLine(e),this.min=g?g.from:f.firstLine(),this.max=g?g.to-1:f.lastLine()}function y(b,f){var e=b.cm.getTokenTypeAt(E(b.line,f));return e&&/\btag\b/.test(e)}function x(b){return b.line>=b.max?void 0:(b.ch=0,b.text=b.cm.getLine(++b.line),!0)}function w(b){return b.line<=b.min?void 0:(b.text=b.cm.getLine(--b.line),b.ch=b.text.length,!0)}function v(f){for(;;){var e=f.text.indexOf(">",f.ch);if(-1==e){if(x(f)){continue}return}if(y(f,e+1)){var h=f.text.lastIndexOf("/",e),g=h>-1&&!/\S/.test(f.text.slice(h+1,e));return f.ch=e+1,g?"selfClose":"regular"}f.ch=e+1}}function u(e){for(;;){var d=e.ch?e.text.lastIndexOf("<",e.ch-1):-1;if(-1==d){if(w(e)){continue}return}if(y(e,d+1)){A.lastIndex=d,e.ch=d;var f=A.exec(e.text);if(f&&f.index==d){return f}}else{e.ch=d}}}function t(d){for(;;){A.lastIndex=d.ch;var c=A.exec(d.text);if(!c){if(x(d)){continue}return}if(y(d,c.index+1)){return d.ch=c.index+c[0].length,c}d.ch=c.index+1}}function s(f){for(;;){var e=f.ch?f.text.lastIndexOf(">",f.ch-1):-1;if(-1==e){if(w(f)){continue}return}if(y(f,e+1)){var h=f.text.lastIndexOf("/",e),g=h>-1&&!/\S/.test(f.text.slice(h+1,e));return f.ch=e+1,g?"selfClose":"regular"}f.ch=e}}function r(b,p){for(var o=[];;){var m,n=t(b),l=b.line,k=b.ch-(n?n[0].length:0);if(!n||!(m=v(b))){return}if("selfClose"!=m){if(n[1]){for(var j=o.length-1;j>=0;--j){if(o[j]==n[2]){o.length=j;break}}if(j<0&&(!p||p==n[2])){return{tag:n[2],from:E(l,k),to:E(b.line,b.ch)}}}else{o.push(n[2])}}}}function q(b,p){for(var o=[];;){var n=s(b);if(!n){return}if("selfClose"!=n){var m=b.line,l=b.ch,k=u(b);if(!k){return}if(k[1]){o.push(k[2])}else{for(var j=o.length-1;j>=0;--j){if(o[j]==k[2]){o.length=j;break}}if(j<0&&(!p||p==k[2])){return{tag:k[2],from:E(b.line,b.ch),to:E(m,l)}}}}else{u(b)}}}var E=F.Pos,C="A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",B=C+"-:.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",A=new RegExp("<(/?)(["+C+"]["+B+"]*)","g");F.registerHelper("fold","xml",function(b,l){for(var k=new z(b,l.line,0);;){var i,j=t(k);if(!j||k.line!=l.line||!(i=v(k))){return}if(!j[1]&&"selfClose"!=i){var l=E(k.line,k.ch),g=r(k,j[2]);return g&&{from:l,to:g.from}}}}),F.findMatchingTag=function(c,p,o){var n=new z(c,p.line,p.ch,o);if(-1!=n.text.indexOf(">")||-1!=n.text.indexOf("<")){var l=v(n),k=l&&E(n.line,n.ch),g=l&&u(n);if(l&&g&&!(D(n,p)>0)){var b={from:E(n.line,n.ch),to:k,tag:g[2]};return"selfClose"==l?{open:b,close:null,at:"open"}:g[1]?{open:q(n,g[2]),close:b,at:"close"}:(n=new z(c,k.line,k.ch,o),{open:b,close:r(n,g[2]),at:"open"})}}},F.findEnclosingTag=function(i,g,n){for(var m=new z(i,g.line,g.ch,n);;){var l=q(m);if(!l){break}var k=new z(i,g.line,g.ch,n),j=r(k,l.tag);if(j){return{open:l,close:j}}}},F.scanForClosingTag=function(g,f,j,i){var h=new z(g,f.line,f.ch,i?{from:0,to:i}:null);return r(h,j)}});!function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],b):b(CodeMirror)}(function(D){function A(e,d){this.cm=e,this.options=d,this.widget=null,this.debounce=0,this.tick=0,this.startPos=this.cm.getCursor("start"),this.startLen=this.cm.getLine(this.startPos.line).length-this.cm.getSelection().length;var f=this;e.on("cursorActivity",this.activityFunc=function(){f.cursorActivity()})}function x(a,f){var e=D.cmpPos(f.from,a.from);return e>0&&a.to.ch-a.from.ch!=f.to.ch-f.from.ch}function w(h,g,l){var k=h.options.hintOptions,j={};for(var i in p){j[i]=p[i]}if(k){for(var i in k){void 0!==k[i]&&(j[i]=k[i])}}if(l){for(var i in l){void 0!==l[i]&&(j[i]=l[i])}}return j.hint.resolve&&(j.hint=j.hint.resolve(h,g)),j}function v(b){return"string"==typeof b?b:b.text}function u(j,i){function m(b,e){var c;c="string"!=typeof e?function(d){return e(d,i)}:E.hasOwnProperty(e)?E[e]:e,n[b]=c}var E={Up:function(){i.moveFocus(-1)},Down:function(){i.moveFocus(1)},PageUp:function(){i.moveFocus(-i.menuSize()+1,!0)},PageDown:function(){i.moveFocus(i.menuSize()-1,!0)},Home:function(){i.setFocus(0)},End:function(){i.setFocus(i.length-1)},Enter:i.pick,Tab:i.pick,Esc:i.close},o=j.options.customKeys,n=o?{}:E;if(o){for(var l in o){o.hasOwnProperty(l)&&m(l,o[l])}}var k=j.options.extraKeys;if(k){for(var l in k){k.hasOwnProperty(l)&&m(l,k[l])}}return n}function t(d,c){for(;c&&c!=d;){if("LI"===c.nodeName.toUpperCase()&&c.parentNode==d){return c}c=c.parentNode}}function s(V,U){this.completion=V,this.data=U,this.picked=!1;var T=this,S=V.cm,R=this.hints=document.createElement("ul");R.className="CodeMirror-hints",this.selectedHint=U.selectedHint||0;for(var Q=U.list,P=0;P<Q.length;++P){var O=R.appendChild(document.createElement("li")),N=Q[P],M=C+(P!=this.selectedHint?"":" "+B);null!=N.className&&(M=N.className+" "+M),O.className=M,N.render?N.render(O,U,N):O.appendChild(document.createTextNode(N.displayText||v(N))),O.hintId=P}var K=S.cursorCoords(V.options.alignWithWord?U.from:null),I=K.left,G=K.bottom,E=!0;R.style.left=I+"px",R.style.top=G+"px";var k=window.innerWidth||Math.max(document.body.offsetWidth,document.documentElement.offsetWidth),j=window.innerHeight||Math.max(document.body.offsetHeight,document.documentElement.offsetHeight);(V.options.container||document.body).appendChild(R);var i=R.getBoundingClientRect(),c=i.bottom-j;if(c>0){var b=i.bottom-i.top,a=K.top-(K.bottom-i.top);if(a-b>0){R.style.top=(G=K.top-b)+"px",E=!1}else{if(b>j){R.style.height=j-5+"px",R.style.top=(G=K.bottom-i.top)+"px";var L=S.getCursor();U.from.ch!=L.ch&&(K=S.cursorCoords(L),R.style.left=(I=K.left)+"px",i=R.getBoundingClientRect())}}}var J=i.right-k;if(J>0&&(i.right-i.left>k&&(R.style.width=k-5+"px",J-=i.right-i.left-k),R.style.left=(I=K.left-J)+"px"),S.addKeyMap(this.keyMap=u(V,{moveFocus:function(e,d){T.changeActive(T.selectedHint+e,d)},setFocus:function(d){T.changeActive(d)},menuSize:function(){return T.screenAmount()},length:Q.length,close:function(){V.close()},pick:function(){T.pick()},data:U})),V.options.closeOnUnfocus){var H;S.on("blur",this.onBlur=function(){H=setTimeout(function(){V.close()},100)}),S.on("focus",this.onFocus=function(){clearTimeout(H)})}var F=S.getScrollInfo();return S.on("scroll",this.onScroll=function(){var f=S.getScrollInfo(),d=S.getWrapperElement().getBoundingClientRect(),h=G+F.top-f.top,g=h-(window.pageYOffset||(document.documentElement||document.body).scrollTop);return E||(g+=R.offsetHeight),g<=d.top||g>=d.bottom?V.close():(R.style.top=h+"px",void (R.style.left=I+F.left-f.left+"px"))}),D.on(R,"dblclick",function(e){var d=t(R,e.target||e.srcElement);d&&null!=d.hintId&&(T.changeActive(d.hintId),T.pick())}),D.on(R,"click",function(e){var d=t(R,e.target||e.srcElement);d&&null!=d.hintId&&(T.changeActive(d.hintId),V.options.completeOnSingleClick&&T.pick())}),D.on(R,"mousedown",function(){setTimeout(function(){S.focus()},20)}),D.signal(U,"select",Q[0],R.firstChild),!0}function r(f,e){if(!f.somethingSelected()){return e}for(var h=[],g=0;g<e.length;g++){e[g].supportsSelection&&h.push(e[g])}return h}function q(a,n){var l,m=a.getHelpers(n,"hint");if(m.length){for(var j,k=!1,i=0;i<m.length;i++){m[i].async&&(k=!0)}return k?(j=function(g,d,E){function h(e,c){if(e==o.length){return d(null)}var b=o[e];if(b.async){b(g,function(f){f?d(f):h(e+1)},E)}else{var c=b(g,E);c?d(c):h(e+1)}}var o=r(g,m);h(0)},j.async=!0):j=function(g,d){for(var E=r(g,m),o=0;o<E.length;o++){var h=E[o](g,d);if(h&&h.list.length){return h}}},j.supportsSelection=!0,j}return(l=a.getHelper(a.getCursor(),"hintWords"))?function(c){return D.hint.fromList(c,{words:l})}:D.hint.anyword?function(d,e){return D.hint.anyword(d,e)}:function(){}}var C="CodeMirror-hint",B="CodeMirror-hint-active";D.showHint=function(g,f,j){if(!f){return g.showHint(j)}j&&j.async&&(f.async=!0);var i={hint:f};if(j){for(var h in j){i[h]=j[h]}}return g.showHint(i)},D.defineExtension("showHint",function(a){a=w(this,this.getCursor("start"),a);var h=this.listSelections();if(!(h.length>1)){if(this.somethingSelected()){if(!a.hint.supportsSelection){return}for(var g=0;g<h.length;g++){if(h[g].head.line!=h[g].anchor.line){return}}}this.state.completionActive&&this.state.completionActive.close();var d=this.state.completionActive=new A(this,a);d.options.hint&&(D.signal(this,"startCompletion",this),d.update(!0))}});var z=window.requestAnimationFrame||function(b){return setTimeout(b,1000/60)},y=window.cancelAnimationFrame||clearTimeout;A.prototype={close:function(){this.active()&&(this.cm.state.completionActive=null,this.tick=null,this.cm.off("cursorActivity",this.activityFunc),this.widget&&this.data&&D.signal(this.data,"close"),this.widget&&this.widget.close(),D.signal(this.cm,"endCompletion",this.cm))},active:function(){return this.cm.state.completionActive==this},pick:function(a,f){var e=a.list[f];e.hint?e.hint(this.cm,a,e):this.cm.replaceRange(v(e),e.from||a.from,e.to||a.to,"complete"),D.signal(a,"pick",e),this.close()},cursorActivity:function(){this.debounce&&(y(this.debounce),this.debounce=0);var e=this.cm.getCursor(),d=this.cm.getLine(e.line);if(e.line!=this.startPos.line||d.length-e.ch!=this.startLen-this.startPos.ch||e.ch<this.startPos.ch||this.cm.somethingSelected()||e.ch&&this.options.closeCharacters.test(d.charAt(e.ch-1))){this.close()}else{var f=this;this.debounce=z(function(){f.update()}),this.widget&&this.widget.disable()}},update:function(e){if(null!=this.tick){if(this.options.hint.async){var d=++this.tick,f=this;this.options.hint(this.cm,function(a){f.tick==d&&f.finishUpdate(a,e)},this.options)}else{this.finishUpdate(this.options.hint(this.cm,this.options),e)}}},finishUpdate:function(a,f){this.data&&D.signal(this.data,"update");var e=this.widget&&this.widget.picked||f&&this.options.completeSingle;this.widget&&this.widget.close(),a&&this.data&&x(this.data,a)||(this.data=a,a&&a.list.length&&(e&&1==a.list.length?this.pick(a,0):(this.widget=new s(this,a),D.signal(a,"shown"))))}},s.prototype={close:function(){if(this.completion.widget==this){this.completion.widget=null,this.hints.parentNode.removeChild(this.hints),this.completion.cm.removeKeyMap(this.keyMap);var b=this.completion.cm;this.completion.options.closeOnUnfocus&&(b.off("blur",this.onBlur),b.off("focus",this.onFocus)),b.off("scroll",this.onScroll)}},disable:function(){this.completion.cm.removeKeyMap(this.keyMap);var b=this;this.keyMap={Enter:function(){b.picked=!0}},this.completion.cm.addKeyMap(this.keyMap)},pick:function(){this.completion.pick(this.data,this.selectedHint)},changeActive:function(a,f){if(a>=this.data.list.length?a=f?this.data.list.length-1:0:a<0&&(a=f?0:this.data.list.length-1),this.selectedHint!=a){var c=this.hints.childNodes[this.selectedHint];c.className=c.className.replace(" "+B,""),c=this.hints.childNodes[this.selectedHint=a],c.className+=" "+B,c.offsetTop<this.hints.scrollTop?this.hints.scrollTop=c.offsetTop-3:c.offsetTop+c.offsetHeight>this.hints.scrollTop+this.hints.clientHeight&&(this.hints.scrollTop=c.offsetTop+c.offsetHeight-this.hints.clientHeight+3),D.signal(this.data,"select",this.data.list[this.selectedHint],c)}},screenAmount:function(){return Math.floor(this.hints.clientHeight/this.hints.firstChild.offsetHeight)||1}},D.registerHelper("hint","auto",{resolve:q}),D.registerHelper("hint","fromList",function(I,H){var G=I.getCursor(),F=I.getTokenAt(G),E=D.Pos(G.line,F.end);if(F.string&&/\w/.test(F.string[F.string.length-1])){var o=F.string,n=D.Pos(G.line,F.start)}else{var o="",n=E}for(var m=[],l=0;l<H.words.length;l++){var a=H.words[l];a.slice(0,o.length)==o&&m.push(a)}return m.length?{list:m,from:n,to:E}:void 0}),D.commands.autocomplete=D.showHint;var p={hint:D.hint.auto,completeSingle:!0,alignWithWord:!0,closeCharacters:/[\s()\[\]{};:>,]/,closeOnUnfocus:!0,completeOnSingleClick:!0,container:null,customKeys:null,extraKeys:null};D.defineOption("hintOptions",null)});!function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],b):b(CodeMirror)}(function(e){var d=/[\w$]+/,f=500;e.registerHelper("hint","anyword",function(F,E){for(var D=E&&E.word||d,C=E&&E.range||f,B=F.getCursor(),A=F.getLine(B.line),z=B.ch,y=z;y&&D.test(A.charAt(y-1));){--y}for(var x=y!=z&&A.slice(y,z),w=E&&E.list||[],v={},u=new RegExp(D.source,"g"),c=-1;c<=1;c+=2){for(var b=B.line,a=Math.min(Math.max(b+c*C,F.firstLine()),F.lastLine())+c;b!=a;b+=c){for(var G,H=F.getLine(b);G=u.exec(H);){(b!=B.line||G[0]!==x)&&(x&&0!=G[0].lastIndexOf(x,0)||Object.prototype.hasOwnProperty.call(v,G[0])||(v[G[0]]=!0,w.push(G[0])))}}}return{list:w,from:e.Pos(B.line,y),to:e.Pos(B.line,z)}})});!function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],b):b(CodeMirror)}(function(j){function n(b){for(var c=0;c<b.state.activeLines.length;c++){b.removeLineClass(b.state.activeLines[c],"wrap",i),b.removeLineClass(b.state.activeLines[c],"background",p),b.removeLineClass(b.state.activeLines[c],"gutter",o)}}function m(e,d){if(e.length!=d.length){return !1}for(var f=0;f<e.length;f++){if(e[f]!=d[f]){return !1}}return !0}function l(b,q){for(var f=[],e=0;e<q.length;e++){var d=q[e];if(d.empty()){var c=b.getLineHandleVisualStart(d.head.line);f[f.length-1]!=c&&f.push(c)}}m(b.state.activeLines,f)||b.operation(function(){n(b);for(var a=0;a<f.length;a++){b.addLineClass(f[a],"wrap",i),b.addLineClass(f[a],"background",p),b.addLineClass(f[a],"gutter",o)}b.state.activeLines=f})}function k(d,c){l(d,c.ranges)}var i="CodeMirror-activeline",p="CodeMirror-activeline-background",o="CodeMirror-activeline-gutter";j.defineOption("styleActiveLine",!1,function(a,h,g){var e=g&&g!=j.Init;h&&!e?(a.state.activeLines=[],l(a,a.listSelections()),a.on("beforeSelectionChange",k)):!h&&e&&(a.off("beforeSelectionChange",k),n(a),delete a.state.activeLines)})});!function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],b):b(CodeMirror)}(function(g){function h(d){var c=d.search(j);return -1==c?0:c}var f={},j=/[^\s\u00a0]/,i=g.Pos;g.commands.toggleComment=function(b){b.toggleComment()},g.defineExtension("toggleComment",function(b){b||(b=f);for(var p=this,o=1/0,n=this.listSelections(),m=null,l=n.length-1;l>=0;l--){var k=n[l].from(),d=n[l].to();k.line>=o||(d.line>=o&&(d=i(o,0)),o=k.line,null==m?p.uncomment(k,d,b)?m="un":(p.lineComment(k,d,b),m="line"):"un"==m?p.uncomment(k,d,b):p.lineComment(k,d,b))}}),g.defineExtension("lineComment",function(t,s,r){r||(r=f);var q=this,p=q.getModeAt(t),o=r.lineComment||p.lineComment;if(!o){return void ((r.blockCommentStart||p.blockCommentStart)&&(r.fullLines=!0,q.blockComment(t,s,r)))}var e=q.getLine(t.line);if(null!=e){var d=Math.min(0!=s.ch||s.line==t.line?s.line+1:s.line,q.lastLine()+1),c=null==r.padding?" ":r.padding,b=r.commentBlankLines||t.line==s.line;q.operation(function(){if(r.indent){for(var a=null,n=t.line;n<d;++n){var m=q.getLine(n),l=m.slice(0,h(m));(null==a||a.length>l.length)&&(a=l)}for(var n=t.line;n<d;++n){var m=q.getLine(n),u=a.length;(b||j.test(m))&&(m.slice(0,u)!=a&&(u=h(m)),q.replaceRange(a+o+c,i(n,0),i(n,u)))}}else{for(var n=t.line;n<d;++n){(b||j.test(q.getLine(n)))&&q.replaceRange(o+c,i(n,0))}}})}}),g.defineExtension("blockComment",function(r,q,p){p||(p=f);var o=this,n=o.getModeAt(r),m=p.blockCommentStart||n.blockCommentStart,d=p.blockCommentEnd||n.blockCommentEnd;if(!m||!d){return void ((p.lineComment||n.lineComment)&&0!=p.fullLines&&o.lineComment(r,q,p))}var c=Math.min(q.line,o.lastLine());c!=r.line&&0==q.ch&&j.test(o.getLine(c))&&--c;var b=null==p.padding?" ":p.padding;r.line>c||o.operation(function(){if(0!=p.fullLines){var e=j.test(o.getLine(c));o.replaceRange(b+d,i(c)),o.replaceRange(m+b,i(r.line,0));var a=p.blockCommentLead||n.blockCommentLead;if(null!=a){for(var k=r.line+1;k<=c;++k){(k!=c||e)&&o.replaceRange(a+b,i(k,0))}}}else{o.replaceRange(d,q),o.replaceRange(m,r)}})}),g.defineExtension("uncomment",function(V,U,T){T||(T=f);var L,S=this,R=S.getModeAt(V),Q=Math.min(0!=U.ch||U.line==V.line?U.line:U.line-1,S.lastLine()),P=Math.min(V.line,Q),O=T.lineComment||R.lineComment,N=[],M=null==T.padding?" ":T.padding;V:if(O){for(var K=P;K<=Q;++K){var J=S.getLine(K),H=J.indexOf(O);if(H>-1&&!/comment/.test(S.getTokenTypeAt(i(K,H+1)))&&(H=-1),-1==H&&(K!=Q||K==P)&&j.test(J)){break V}if(H>-1&&j.test(J.slice(0,H))){break V}N.push(J)}if(S.operation(function(){for(var l=P;l<=Q;++l){var k=N[l-P],n=k.indexOf(O),m=n+O.length;n<0||(k.slice(m,m+M.length)==M&&(m+=M.length),L=!0,S.replaceRange("",i(l,n),i(l,m)))}}),L){return !0}}var G=T.blockCommentStart||R.blockCommentStart,F=T.blockCommentEnd||R.blockCommentEnd;if(!G||!F){return !1}var E=T.blockCommentLead||R.blockCommentLead,D=S.getLine(P),C=Q==P?D:S.getLine(Q),B=D.indexOf(G),d=C.lastIndexOf(F);if(-1==d&&P!=Q&&(C=S.getLine(--Q),d=C.lastIndexOf(F)),-1==B||-1==d||!/comment/.test(S.getTokenTypeAt(i(P,B+1)))||!/comment/.test(S.getTokenTypeAt(i(Q,d+1)))){return !1}var c=D.lastIndexOf(G,V.ch),b=-1==c?-1:D.slice(0,V.ch).indexOf(F,c+G.length);if(-1!=c&&-1!=b&&b+F.length!=V.ch){return !1}b=C.indexOf(F,U.ch);var I=C.slice(U.ch).lastIndexOf(G,b-U.ch);return c=-1==b||-1==I?-1:U.ch+I,-1!=b&&-1!=c&&c!=U.ch?!1:(S.operation(function(){S.replaceRange("",i(Q,d-(M&&C.slice(d-M.length,d)==M?M.length:0)),i(Q,d+F.length));var l=B+G.length;if(M&&D.slice(l,l+M.length)==M&&(l+=M.length),S.replaceRange("",i(P,B),i(P,l)),E){for(var k=P+1;k<=Q;++k){var o=S.getLine(k),n=o.indexOf(E);if(-1!=n&&!j.test(o.slice(0,n))){var m=n+E.length;M&&o.slice(m,m+M.length)==M&&(m+=M.length),S.replaceRange("",i(k,n),i(k,m))}}}}),!0)})});!function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],b):b(CodeMirror)}(function(g){function i(B){if(B.getOption("disableInput")){return g.Pass}for(var z,A=B.listSelections(),y=[],x=0;x<A.length;x++){var w=A[x].head,v=B.getTokenAt(w);if("comment"!=v.type){return g.Pass}var u=g.innerMode(B.getMode(),v.state).mode;if(z){if(z!=u){return g.Pass}}else{z=u}var t=null;if(z.blockCommentStart&&z.blockCommentContinue){var q,s=v.string.indexOf(z.blockCommentEnd),r=B.getRange(g.Pos(w.line,0),g.Pos(w.line,v.end));if(-1!=s&&s==v.string.length-z.blockCommentEnd.length&&w.ch>=s){}else{if(0==v.string.indexOf(z.blockCommentStart)){if(t=r.slice(0,v.start),!/^\s*$/.test(t)){t="";for(var e=0;e<v.start;++e){t+=" "}}}else{-1!=(q=r.indexOf(z.blockCommentContinue))&&q+z.blockCommentContinue.length>v.start&&/^\s*$/.test(r.slice(0,q))&&(t=r.slice(0,q))}}null!=t&&(t+=z.blockCommentContinue)}if(null==t&&z.lineComment&&h(B)){var a=B.getLine(w.line),q=a.indexOf(z.lineComment);q>-1&&(t=a.slice(0,q),/\S/.test(t)?t=null:t+=z.lineComment+a.slice(q+z.lineComment.length).match(/^\s*/)[0])}if(null==t){return g.Pass}y[x]="\n"+t}B.operation(function(){for(var b=A.length-1;b>=0;b--){B.replaceRange(y[b],A[b].from(),A[b].to(),"+insert")}})}function h(d){var c=d.getOption("continueComments");return c&&"object"==typeof c?c.continueLineComment!==!1:!0}for(var f=["clike","css","javascript"],j=0;j<f.length;++j){g.extendMode(f[j],{blockCommentContinue:" * "})}g.defineOption("continueComments",null,function(a,m,l){if(l&&l!=g.Init&&a.removeKeyMap("continueComment"),m){var k="Enter";"string"==typeof m?k=m:"object"==typeof m&&m.key&&(k=m.key);var d={name:"continueComment"};d[k]=i,a.addKeyMap(d)}})});(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../lib/codemirror"],a)}else{a(CodeMirror)}}})(function(a){a.modeInfo=[{name:"APL",mime:"text/apl",mode:"apl",ext:["dyalog","apl"]},{name:"PGP",mimes:["application/pgp","application/pgp-keys","application/pgp-signature"],mode:"asciiarmor",ext:["pgp"]},{name:"ASN.1",mime:"text/x-ttcn-asn",mode:"asn.1",ext:["asn","asn1"]},{name:"Asterisk",mime:"text/x-asterisk",mode:"asterisk",file:/^extensions\.conf$/i},{name:"Brainfuck",mime:"text/x-brainfuck",mode:"brainfuck",ext:["b","bf"]},{name:"C",mime:"text/x-csrc",mode:"clike",ext:["c","h"]},{name:"C++",mime:"text/x-c++src",mode:"clike",ext:["cpp","c++","cc","cxx","hpp","h++","hh","hxx"],alias:["cpp"]},{name:"Cobol",mime:"text/x-cobol",mode:"cobol",ext:["cob","cpy"]},{name:"C#",mime:"text/x-csharp",mode:"clike",ext:["cs"],alias:["csharp"]},{name:"Clojure",mime:"text/x-clojure",mode:"clojure",ext:["clj"]},{name:"CMake",mime:"text/x-cmake",mode:"cmake",ext:["cmake","cmake.in"],file:/^CMakeLists.txt$/},{name:"CoffeeScript",mime:"text/x-coffeescript",mode:"coffeescript",ext:["coffee"],alias:["coffee","coffee-script"]},{name:"Common Lisp",mime:"text/x-common-lisp",mode:"commonlisp",ext:["cl","lisp","el"],alias:["lisp"]},{name:"Cypher",mime:"application/x-cypher-query",mode:"cypher",ext:["cyp","cypher"]},{name:"Cython",mime:"text/x-cython",mode:"python",ext:["pyx","pxd","pxi"]},{name:"CSS",mime:"text/css",mode:"css",ext:["css"]},{name:"CQL",mime:"text/x-cassandra",mode:"sql",ext:["cql"]},{name:"D",mime:"text/x-d",mode:"d",ext:["d"]},{name:"Dart",mimes:["application/dart","text/x-dart"],mode:"dart",ext:["dart"]},{name:"diff",mime:"text/x-diff",mode:"diff",ext:["diff","patch"]},{name:"Django",mime:"text/x-django",mode:"django"},{name:"Dockerfile",mime:"text/x-dockerfile",mode:"dockerfile",file:/^Dockerfile$/},{name:"DTD",mime:"application/xml-dtd",mode:"dtd",ext:["dtd"]},{name:"Dylan",mime:"text/x-dylan",mode:"dylan",ext:["dylan","dyl","intr"]},{name:"EBNF",mime:"text/x-ebnf",mode:"ebnf"},{name:"ECL",mime:"text/x-ecl",mode:"ecl",ext:["ecl"]},{name:"Eiffel",mime:"text/x-eiffel",mode:"eiffel",ext:["e"]},{name:"Elm",mime:"text/x-elm",mode:"elm",ext:["elm"]},{name:"Embedded Javascript",mime:"application/x-ejs",mode:"htmlembedded",ext:["ejs"]},{name:"Embedded Ruby",mime:"application/x-erb",mode:"htmlembedded",ext:["erb"]},{name:"Erlang",mime:"text/x-erlang",mode:"erlang",ext:["erl"]},{name:"Factor",mime:"text/x-factor",mode:"factor",ext:["factor"]},{name:"Forth",mime:"text/x-forth",mode:"forth",ext:["forth","fth","4th"]},{name:"Fortran",mime:"text/x-fortran",mode:"fortran",ext:["f","for","f77","f90"]},{name:"F#",mime:"text/x-fsharp",mode:"mllike",ext:["fs"],alias:["fsharp"]},{name:"Gas",mime:"text/x-gas",mode:"gas",ext:["s"]},{name:"Gherkin",mime:"text/x-feature",mode:"gherkin",ext:["feature"]},{name:"GitHub Flavored Markdown",mime:"text/x-gfm",mode:"gfm",file:/^(readme|contributing|history).md$/i},{name:"Go",mime:"text/x-go",mode:"go",ext:["go"]},{name:"Groovy",mime:"text/x-groovy",mode:"groovy",ext:["groovy"]},{name:"HAML",mime:"text/x-haml",mode:"haml",ext:["haml"]},{name:"Haskell",mime:"text/x-haskell",mode:"haskell",ext:["hs"]},{name:"Haxe",mime:"text/x-haxe",mode:"haxe",ext:["hx"]},{name:"HXML",mime:"text/x-hxml",mode:"haxe",ext:["hxml"]},{name:"ASP.NET",mime:"application/x-aspx",mode:"htmlembedded",ext:["aspx"],alias:["asp","aspx"]},{name:"HTML",mime:"text/html",mode:"htmlmixed",ext:["html","htm"],alias:["xhtml"]},{name:"HTTP",mime:"message/http",mode:"http"},{name:"IDL",mime:"text/x-idl",mode:"idl",ext:["pro"]},{name:"Jade",mime:"text/x-jade",mode:"jade",ext:["jade"]},{name:"Java",mime:"text/x-java",mode:"clike",ext:["java"]},{name:"Java Server Pages",mime:"application/x-jsp",mode:"htmlembedded",ext:["jsp"],alias:["jsp"]},{name:"JavaScript",mimes:["text/javascript","text/ecmascript","application/javascript","application/x-javascript","application/ecmascript"],mode:"javascript",ext:["js"],alias:["ecmascript","js","node"]},{name:"JSON",mimes:["application/json","application/x-json"],mode:"javascript",ext:["json","map"],alias:["json5"]},{name:"JSON-LD",mime:"application/ld+json",mode:"javascript",ext:["jsonld"],alias:["jsonld"]},{name:"Jinja2",mime:"null",mode:"jinja2"},{name:"Julia",mime:"text/x-julia",mode:"julia",ext:["jl"]},{name:"Kotlin",mime:"text/x-kotlin",mode:"kotlin",ext:["kt"]},{name:"LESS",mime:"text/x-less",mode:"css",ext:["less"]},{name:"LiveScript",mime:"text/x-livescript",mode:"livescript",ext:["ls"],alias:["ls"]},{name:"Lua",mime:"text/x-lua",mode:"lua",ext:["lua"]},{name:"Markdown",mime:"text/x-markdown",mode:"markdown",ext:["markdown","md","mkd"]},{name:"mIRC",mime:"text/mirc",mode:"mirc"},{name:"MariaDB SQL",mime:"text/x-mariadb",mode:"sql"},{name:"Mathematica",mime:"text/x-mathematica",mode:"mathematica",ext:["m","nb"]},{name:"Modelica",mime:"text/x-modelica",mode:"modelica",ext:["mo"]},{name:"MUMPS",mime:"text/x-mumps",mode:"mumps"},{name:"MS SQL",mime:"text/x-mssql",mode:"sql"},{name:"MySQL",mime:"text/x-mysql",mode:"sql"},{name:"Nginx",mime:"text/x-nginx-conf",mode:"nginx",file:/nginx.*\.conf$/i},{name:"NTriples",mime:"text/n-triples",mode:"ntriples",ext:["nt"]},{name:"Objective C",mime:"text/x-objectivec",mode:"clike",ext:["m","mm"]},{name:"OCaml",mime:"text/x-ocaml",mode:"mllike",ext:["ml","mli","mll","mly"]},{name:"Octave",mime:"text/x-octave",mode:"octave",ext:["m"]},{name:"Pascal",mime:"text/x-pascal",mode:"pascal",ext:["p","pas"]},{name:"PEG.js",mime:"null",mode:"pegjs",ext:["jsonld"]},{name:"Perl",mime:"text/x-perl",mode:"perl",ext:["pl","pm","cgi"]},{name:"PHP",mime:"application/x-httpd-php",mode:"php",ext:["php","php3","php4","php5","phtml"]},{name:"Pig",mime:"text/x-pig",mode:"pig",ext:["pig"]},{name:"Plain Text",mime:"text/plain",mode:"null",ext:["txt","text","conf","def","list","log"]},{name:"PLSQL",mime:"text/x-plsql",mode:"sql",ext:["pls"]},{name:"Properties files",mime:"text/x-properties",mode:"properties",ext:["properties","ini","in"],alias:["ini","properties"]},{name:"Python",mime:"text/x-python",mode:"python",ext:["py","pyw"]},{name:"Puppet",mime:"text/x-puppet",mode:"puppet",ext:["pp"]},{name:"Q",mime:"text/x-q",mode:"q",ext:["q"]},{name:"R",mime:"text/x-rsrc",mode:"r",ext:["r"],alias:["rscript"]},{name:"reStructuredText",mime:"text/x-rst",mode:"rst",ext:["rst"],alias:["rst"]},{name:"RPM Changes",mime:"text/x-rpm-changes",mode:"rpm"},{name:"RPM Spec",mime:"text/x-rpm-spec",mode:"rpm",ext:["spec"]},{name:"Ruby",mime:"text/x-ruby",mode:"ruby",ext:["rb"],alias:["jruby","macruby","rake","rb","rbx"]},{name:"Rust",mime:"text/x-rustsrc",mode:"rust",ext:["rs"]},{name:"Sass",mime:"text/x-sass",mode:"sass",ext:["sass"]},{name:"Scala",mime:"text/x-scala",mode:"clike",ext:["scala"]},{name:"Scheme",mime:"text/x-scheme",mode:"scheme",ext:["scm","ss"]},{name:"SCSS",mime:"text/x-scss",mode:"css",ext:["scss"]},{name:"Shell",mime:"text/x-sh",mode:"shell",ext:["sh","ksh","bash"],alias:["bash","sh","zsh"]},{name:"Sieve",mime:"application/sieve",mode:"sieve",ext:["siv","sieve"]},{name:"Slim",mimes:["text/x-slim","application/x-slim"],mode:"slim",ext:["slim"]},{name:"Smalltalk",mime:"text/x-stsrc",mode:"smalltalk",ext:["st"]},{name:"Smarty",mime:"text/x-smarty",mode:"smarty",ext:["tpl"]},{name:"Solr",mime:"text/x-solr",mode:"solr"},{name:"Soy",mime:"text/x-soy",mode:"soy",ext:["soy"],alias:["closure template"]},{name:"SPARQL",mime:"application/sparql-query",mode:"sparql",ext:["rq","sparql"],alias:["sparul"]},{name:"Spreadsheet",mime:"text/x-spreadsheet",mode:"spreadsheet",alias:["excel","formula"]},{name:"SQL",mime:"text/x-sql",mode:"sql",ext:["sql"]},{name:"Squirrel",mime:"text/x-squirrel",mode:"clike",ext:["nut"]},{name:"Swift",mime:"text/x-swift",mode:"swift",ext:["swift"]},{name:"MariaDB",mime:"text/x-mariadb",mode:"sql"},{name:"sTeX",mime:"text/x-stex",mode:"stex"},{name:"LaTeX",mime:"text/x-latex",mode:"stex",ext:["text","ltx"],alias:["tex"]},{name:"SystemVerilog",mime:"text/x-systemverilog",mode:"verilog",ext:["v"]},{name:"Tcl",mime:"text/x-tcl",mode:"tcl",ext:["tcl"]},{name:"Textile",mime:"text/x-textile",mode:"textile",ext:["textile"]},{name:"TiddlyWiki ",mime:"text/x-tiddlywiki",mode:"tiddlywiki"},{name:"Tiki wiki",mime:"text/tiki",mode:"tiki"},{name:"TOML",mime:"text/x-toml",mode:"toml",ext:["toml"]},{name:"Tornado",mime:"text/x-tornado",mode:"tornado"},{name:"troff",mime:"troff",mode:"troff",ext:["1","2","3","4","5","6","7","8","9"]},{name:"TTCN",mime:"text/x-ttcn",mode:"ttcn",ext:["ttcn","ttcn3","ttcnpp"]},{name:"TTCN_CFG",mime:"text/x-ttcn-cfg",mode:"ttcn-cfg",ext:["cfg"]},{name:"Turtle",mime:"text/turtle",mode:"turtle",ext:["ttl"]},{name:"TypeScript",mime:"application/typescript",mode:"javascript",ext:["ts"],alias:["ts"]},{name:"Twig",mime:"text/x-twig",mode:"twig"},{name:"VB.NET",mime:"text/x-vb",mode:"vb",ext:["vb"]},{name:"VBScript",mime:"text/vbscript",mode:"vbscript",ext:["vbs"]},{name:"Velocity",mime:"text/velocity",mode:"velocity",ext:["vtl"]},{name:"Verilog",mime:"text/x-verilog",mode:"verilog",ext:["v"]},{name:"XML",mimes:["application/xml","text/xml"],mode:"xml",ext:["xml","xsl","xsd"],alias:["rss","wsdl","xsd"]},{name:"XQuery",mime:"application/xquery",mode:"xquery",ext:["xy","xquery"]},{name:"YAML",mime:"text/x-yaml",mode:"yaml",ext:["yaml","yml"],alias:["yml"]},{name:"Z80",mime:"text/x-z80",mode:"z80",ext:["z80"]}];for(var b=0;b<a.modeInfo.length;b++){var c=a.modeInfo[b];if(c.mimes){c.mime=c.mimes[0]}}a.findModeByMIME=function(f){f=f.toLowerCase();for(var e=0;e<a.modeInfo.length;e++){var g=a.modeInfo[e];if(g.mime==f){return g}if(g.mimes){for(var d=0;d<g.mimes.length;d++){if(g.mimes[d]==f){return g}}}}};a.findModeByExtension=function(f){for(var e=0;e<a.modeInfo.length;e++){var g=a.modeInfo[e];if(g.ext){for(var d=0;d<g.ext.length;d++){if(g.ext[d]==f){return g}}}}};a.findModeByFileName=function(e){for(var f=0;f<a.modeInfo.length;f++){var h=a.modeInfo[f];if(h.file&&h.file.test(e)){return h}}var d=e.lastIndexOf(".");var g=d>-1&&e.substring(d+1,e.length);if(g){return a.findModeByExtension(g)}};a.findModeByName=function(e){e=e.toLowerCase();for(var f=0;f<a.modeInfo.length;f++){var g=a.modeInfo[f];if(g.name.toLowerCase()==e){return g}if(g.alias){for(var d=0;d<g.alias.length;d++){if(g.alias[d].toLowerCase()==e){return g}}}}}});(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"),"cjs")}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],function(b){a(b,"amd")})}else{a(CodeMirror,"plain")}}})(function(a,c){if(!a.modeURL){a.modeURL="../mode/%N/%N.js"}var e={};function d(f,h){var g=h;return function(){if(--g==0){f()}}}function b(l,f){var k=a.modes[l].dependencies;if(!k){return f()}var j=[];for(var h=0;h<k.length;++h){if(!a.modes.hasOwnProperty(k[h])){j.push(k[h])}}if(!j.length){return f()}var g=d(f,j.length);for(var h=0;h<j.length;++h){a.requireMode(j[h],g)}}a.requireMode=function(k,f){if(typeof k!="string"){k=k.name}if(a.modes.hasOwnProperty(k)){return b(k,f)}if(e.hasOwnProperty(k)){return e[k].push(f)}var h=a.modeURL.replace(/%N/g,k);if(c=="plain"){var g=document.createElement("script");g.src=h;var i=document.getElementsByTagName("script")[0];var j=e[k]=[f];a.on(g,"load",function(){b(k,function(){for(var l=0;l<j.length;++l){j[l]()}})});i.parentNode.insertBefore(g,i)}else{if(c=="cjs"){require(h);f()}else{if(c=="amd"){requirejs([h],f)}}}};a.autoLoadMode=function(f,g){if(!a.modes.hasOwnProperty(g)){a.requireMode(g,function(){f.setOption("mode",f.getOption("mode"))})}}});